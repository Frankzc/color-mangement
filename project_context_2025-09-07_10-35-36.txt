

=== FILE: index.html ===
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>时装设计师颜色管理系统</title>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="/src/main.js"></script>
</body>
</html>

=== FILE: postcss.config.js ===
// ===== postcss.config.js =====
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
    ...(process.env.NODE_ENV === 'production' 
      ? { 
          cssnano: {
            preset: 'default'
          }
        } 
      : {}
    )
  },
}

=== FILE: tailwind.config.js ===
// ===== tailwind.config.js =====
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{vue,js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          200: '#bae6fd',
          300: '#7dd3fc',
          400: '#38bdf8',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
          800: '#075985',
          900: '#0c4a6e',
        },
        fashion: {
          'navy': '#2C3E50',
          'blue': '#3498DB',
          'coral': '#E74C3C',
          'emerald': '#27AE60',
          'amber': '#F39C12',
          'rose': '#E91E63',
          'purple': '#9B59B6',
          'teal': '#1ABC9C'
        },
        gray: {
          50: '#F8F9FA',
          100: '#F1F3F4',
          200: '#E9ECEF',
          300: '#DEE2E6',
          400: '#CED4DA',
          500: '#ADB5BD',
          600: '#6C757D',
          700: '#495057',
          800: '#343A40',
          900: '#212529',
        }
      },
      fontFamily: {
        sans: [
          '-apple-system', 
          'BlinkMacSystemFont', 
          'Segoe UI', 
          'Roboto', 
          'Helvetica Neue',
          'Arial',
          'sans-serif'
        ],
        serif: ['Georgia', 'serif'],
        mono: ['Menlo', 'Monaco', 'Courier New', 'monospace']
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem'
      },
      borderRadius: {
        'xl': '0.75rem',
        '2xl': '1rem',
        '3xl': '1.5rem'
      },
      boxShadow: {
        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
        'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 20px -5px rgba(0, 0, 0, 0.04)',
        'strong': '0 10px 40px -10px rgba(0, 0, 0, 0.2)'
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
        'bounce-in': 'bounceIn 0.6s ease-out',
        'spin-slow': 'spin 3s linear infinite'
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' }
        },
        slideUp: {
          '0%': { transform: 'translateY(10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' }
        },
        bounceIn: {
          '0%': { transform: 'scale(0.3)', opacity: '0' },
          '50%': { transform: 'scale(1.05)' },
          '70%': { transform: 'scale(0.9)' },
          '100%': { transform: 'scale(1)', opacity: '1' }
        }
      },
      screens: {
        'xs': '475px',
      }
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/aspect-ratio'),
    require('@tailwindcss/typography')
  ],
  darkMode: 'class'
}

=== FILE: test.vue ===
// ===== src/views/LoginView.vue =====
<template>
  <div class="login-view">
    <div class="login-container">
      <!-- Logo区域 -->
      <div class="login-header">
        <div class="logo">
          <ColorSwatchIcon class="w-12 h-12 text-blue-500" />
          <h1>Fashion Color</h1>
        </div>
        <p class="subtitle">时装设计师颜色管理系统</p>
      </div>

      <!-- 登录表单 -->
      <div class="login-form">
        <h2 class="form-title">登录您的账户</h2>
        
        <form @submit.prevent="handleLogin">
          <div class="form-group">
            <label for="username" class="form-label">用户名</label>
            <input
              id="username"
              v-model="form.username"
              type="text"
              class="form-input"
              :class="{ 'form-input--error': errors.username }"
              placeholder="请输入用户名"
              required
            />
            <div v-if="errors.username" class="form-error">
              {{ errors.username }}
            </div>
          </div>

          <div class="form-group">
            <label for="password" class="form-label">密码</label>
            <div class="password-input">
              <input
                id="password"
                v-model="form.password"
                :type="showPassword ? 'text' : 'password'"
                class="form-input"
                :class="{ 'form-input--error': errors.password }"
                placeholder="请输入密码"
                required
              />
              <button
                type="button"
                @click="togglePassword"
                class="password-toggle"
              >
                <EyeIcon v-if="!showPassword" class="w-5 h-5" />
                <EyeSlashIcon v-else class="w-5 h-5" />
              </button>
            </div>
            <div v-if="errors.password" class="form-error">
              {{ errors.password }}
            </div>
          </div>

          <div v-if="errors.general" class="form-error form-error--general">
            {{ errors.general }}
          </div>

          <BaseButton
            type="submit"
            :loading="isLoading"
            variant="primary"
            size="lg"
            block
          >
            登录
          </BaseButton>
        </form>

        <!-- 预设账号提示 -->
        <div class="preset-accounts">
          <p class="preset-title">预设账号信息：</p>
          <div class="account-list">
            <div class="account-item">
              <div class="account-info">
                <strong>设计师账号</strong>
                <span>用户名: designer</span>
                <span>密码: fashion123</span>
              </div>
              <BaseButton
                @click="quickLogin('designer', 'fashion123')"
                variant="secondary"
                size="sm"
                outline
              >
                快速登录
              </BaseButton>
            </div>
            
            <div class="account-item">
              <div class="account-info">
                <strong>管理员账号</strong>
                <span>用户名: admin</span>
                <span>密码: admin123</span>
              </div>
              <BaseButton
                @click="quickLogin('admin', 'admin123')"
                variant="secondary"
                size="sm"
                outline
              >
                快速登录
              </BaseButton>
            </div>
          </div>
        </div>
      </div>

      <!-- 功能特色 -->
      <div class="features">
        <h3 class="features-title">系统特色</h3>
        <div class="features-list">
          <div class="feature-item">
            <MagnifyingGlassIcon class="w-6 h-6 text-blue-500" />
            <span>智能颜色搜索</span>
          </div>
          <div class="feature-item">
            <PhotoIcon class="w-6 h-6 text-green-500" />
            <span>图片取色功能</span>
          </div>
          <div class="feature-item">
            <HeartIcon class="w-6 h-6 text-red-500" />
            <span>收藏管理</span>
          </div>
          <div class="feature-item">
            <DevicePhoneMobileIcon class="w-6 h-6 text-purple-500" />
            <span>响应式设计</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'
import { useUserStore } from '@stores/userStore'
import { useUiStore } from '@stores/uiStore'
import {
  ColorSwatchIcon,
  MagnifyingGlassIcon,
  PhotoIcon,
  HeartIcon,
  DevicePhoneMobileIcon,
  EyeIcon,
  EyeSlashIcon
} from '@heroicons/vue/24/outline'
import BaseButton from '@components/common/BaseButton.vue'

const router = useRouter()
const userStore = useUserStore()
const uiStore = useUiStore()

// 响应式数据
const isLoading = ref(false)
const showPassword = ref(false)
const form = reactive({
  username: '',
  password: ''
})
const errors = reactive({
  username: '',
  password: '',
  general: ''
})

// 方法
const togglePassword = () => {
  showPassword.value = !showPassword.value
}

const clearErrors = () => {
  errors.username = ''
  errors.password = ''
  errors.general = ''
}

const validateForm = () => {
  clearErrors()
  let isValid = true

  if (!form.username.trim()) {
    errors.username = '请输入用户名'
    isValid = false
  }

  if (!form.password.trim()) {
    errors.password = '请输入密码'
    isValid = false
  } else if (form.password.length < 6) {
    errors.password = '密码长度不能少于6位'
    isValid = false
  }

  return isValid
}

const handleLogin = async () => {
  if (!validateForm()) return

  isLoading.value = true
  clearErrors()

  try {
    // 模拟登录延迟
    await new Promise(resolve => setTimeout(resolve, 1000))
    
    const result = userStore.login(form.username, form.password)
    
    if (result.success) {
      uiStore.showToast(`欢迎回来，${result.user.name}！`, 'success')
      router.push('/')
    } else {
      errors.general = result.message
    }
  } catch (error) {
    console.error('登录失败:', error)
    errors.general = '登录失败，请稍后重试'
  } finally {
    isLoading.value = false
  }
}

const quickLogin = (username, password) => {
  form.username = username
  form.password = password
  handleLogin()
}
</script>

<style lang="scss" scoped>
.login-view {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem 1rem;
}

.login-container {
  background: white;
  border-radius: 1.5rem;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  overflow: hidden;
  max-width: 500px;
  width: 100%;
}

.login-header {
  background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
  color: white;
  text-align: center;
  padding: 3rem 2rem 2rem;
  
  .logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
    
    h1 {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0;
    }
  }
  
  .subtitle {
    opacity: 0.9;
    font-size: 0.875rem;
  }
}

.login-form {
  padding: 2rem;
  
  .form-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 1.5rem;
    text-align: center;
  }
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-label {
  display: block;
  font-size: 0.875rem;
  font-weight: 500;
  color: #374151;
  margin-bottom: 0.5rem;
}

.form-input {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid #e5e7eb;
  border-radius: 0.5rem;
  font-size: 1rem;
  transition: all 0.2s;
  
  &:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
  }
  
  &--error {
    border-color: #ef4444;
    
    &:focus {
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
    }
  }
}

.password-input {
  position: relative;
  
  .password-toggle {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #6b7280;
    cursor: pointer;
    padding: 0.25rem;
    
    &:hover {
      color: #374151;
    }
  }
}

.form-error {
  color: #ef4444;
  font-size: 0.875rem;
  margin-top: 0.5rem;
  
  &--general {
    margin-top: 0;
    margin-bottom: 1rem;
    padding: 0.75rem;
    background: #fef2f2;
    border: 1px solid #fecaca;
    border-radius: 0.5rem;
    text-align: center;
  }
}

.preset-accounts {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid #e5e7eb;
  
  .preset-title {
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    margin-bottom: 1rem;
    text-align: center;
  }
  
  .account-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .account-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: #f9fafb;
    border-radius: 0.5rem;
    
    @media (max-width: 480px) {
      flex-direction: column;
      gap: 0.75rem;
      text-align: center;
    }
  }
  
  .account-info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    
    strong {
      color: #1f2937;
      font-size: 0.875rem;
    }
    
    span {
      font-size: 0.75rem;
      color: #6b7280;
      font-family: 'Monaco', 'Menlo', monospace;
    }
  }
}

.features {
  background: #f9fafb;
  padding: 2rem;
  
  .features-title {
    font-size: 1rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 1rem;
    text-align: center;
  }
  
  .features-list {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    
    @media (max-width: 480px) {
      grid-template-columns: 1fr;
    }
  }
  
  .feature-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: #374151;
  }
}
</style>

// ===== src/components/favorites/FavoriteColorCard.vue =====
<template>
  <div class="favorite-color-card" :class="{ 'favorite-color-card--selected': selected }">
    <!-- 选择框 -->
    <div v-if="selectMode" class="selection-checkbox">
      <input
        type="checkbox"
        :checked="selected"
        @change="$emit('toggle-select', color.hex)"
      />
    </div>

    <!-- 颜色预览 -->
    <div 
      class="color-preview"
      :style="{ backgroundColor: color.hex }"
      @click="handleCardClick"
    >
      <!-- 移除按钮 -->
      <button
        @click.stop="$emit('remove', color)"
        class="remove-btn"
        title="移除收藏"
      >
        <XMarkIcon class="w-4 h-4" />
      </button>
      
      <!-- HEX值 -->
      <div class="hex-value" :style="{ color: color.contrast }">
        {{ color.hex }}
      </div>
      
      <!-- 收藏时间 -->
      <div class="favorite-date" :style="{ color: color.contrast }">
        {{ formatDate(color.addedAt) }}
      </div>
    </div>

    <!-- 颜色信息 -->
    <div class="color-info">
      <h3 class="color-name">{{ color.chinese }}</h3>
      <p class="color-english">{{ color.english }}</p>
      
      <div class="color-details">
        <span class="category">{{ color.category }}</span>
        <span v-if="color.guofeng" class="guofeng">{{ color.guofeng }}</span>
      </div>

      <!-- 操作按钮 -->
      <div class="color-actions">
        <button
          @click="$emit('view-details', color)"
          class="action-btn action-btn--primary"
        >
          查看详情
        </button>
        <button
          @click="copyHex"
          class="action-btn action-btn--secondary"
        >
          复制 HEX
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useUiStore } from '@stores/uiStore'
import { XMarkIcon } from '@heroicons/vue/24/outline'

const props = defineProps({
  color: {
    type: Object,
    required: true
  },
  selectMode: {
    type: Boolean,
    default: false
  },
  selected: {
    type: Boolean,
    default: false
  }
})

defineEmits(['toggle-select', 'remove', 'view-details'])

const uiStore = useUiStore()

const formatDate = (dateString) => {
  if (!dateString) return ''
  const date = new Date(dateString)
  return date.toLocaleDateString('zh-CN')
}

const handleCardClick = () => {
  if (props.selectMode) {
    emit('toggle-select', props.color.hex)
  }
}

const copyHex = async () => {
  try {
    await navigator.clipboard.writeText(props.color.hex)
    uiStore.showToast('HEX值已复制', 'success', 2000)
  } catch (error) {
    uiStore.showToast('复制失败', 'error')
  }
}
</script>

<style lang="scss" scoped>
.favorite-color-card {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  position: relative;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);
  }
  
  &--selected {
    ring: 2px solid #3498db;
    transform: translateY(-2px);
  }
}

.selection-checkbox {
  position: absolute;
  top: 0.5rem;
  left: 0.5rem;
  z-index: 10;
  
  input[type="checkbox"] {
    width: 1.25rem;
    height: 1.25rem;
    accent-color: #3498db;
  }
}

.color-preview {
  height: 120px;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 0.75rem;
}

.remove-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 1.75rem;
  height: 1.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: rgba(239, 68, 68, 0.8);
    transform: scale(1.1);
  }
}

.hex-value {
  font-family: 'Monaco', 'Menlo', monospace;
  font-weight: 600;
  font-size: 1rem;
  text-align: center;
  background: rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  align-self: center;
}

.favorite-date {
  font-size: 0.75rem;
  text-align: center;
  opacity: 0.8;
  background: rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  padding: 0.125rem 0.25rem;
  border-radius: 0.125rem;
  align-self: center;
}

.color-info {
  padding: 1rem;
}

.color-name {
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.25rem;
}

.color-english {
  font-size: 0.875rem;
  color: #6b7280;
  font-style: italic;
  margin-bottom: 0.75rem;
}

.color-details {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
  
  .category {
    font-size: 0.75rem;
    background: #dbeafe;
    color: #1e40af;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
  }
  
  .guofeng {
    font-size: 0.75rem;
    background: #fef2f2;
    color: #dc2626;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
  }
}

.color-actions {
  display: flex;
  gap: 0.5rem;
}

.action-btn {
  flex: 1;
  padding: 0.5rem;
  border: none;
  border-radius: 0.375rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &--primary {
    background: #3498db;
    color: white;
    
    &:hover {
      background: #2980b9;
    }
  }
  
  &--secondary {
    background: #f3f4f6;
    color: #374151;
    
    &:hover {
      background: #e5e7eb;
    }
  }
}
</style>

// ===== src/components/favorites/ColorSchemeCard.vue =====
<template>
  <div class="color-scheme-card">
    <!-- 配色预览 -->
    <div class="scheme-preview">
      <div
        v-for="color in scheme.colors.slice(0, 5)"
        :key="color.hex || color"
        class="scheme-color"
        :style="{ backgroundColor: color.hex || color }"
        :title="color.chinese || color"
      ></div>
      <div v-if="scheme.colors.length > 5" class="scheme-more">
        +{{ scheme.colors.length - 5 }}
      </div>
    </div>

    <!-- 方案信息 -->
    <div class="scheme-info">
      <h3 class="scheme-name">{{ scheme.name }}</h3>
      <p v-if="scheme.description" class="scheme-description">
        {{ scheme.description }}
      </p>
      
      <div class="scheme-meta">
        <span class="color-count">{{ scheme.colors.length }} 个颜色</span>
        <span class="created-date">{{ formatDate(scheme.createdAt) }}</span>
      </div>

      <!-- 操作按钮 -->
      <div class="scheme-actions">
        <button @click="$emit('view', scheme)" class="action-btn action-btn--primary">
          查看
        </button>
        <button @click="$emit('edit', scheme)" class="action-btn action-btn--secondary">
          编辑
        </button>
        <button @click="handleDelete" class="action-btn action-btn--danger">
          删除
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  scheme: {
    type: Object,
    required: true
  }
})

defineEmits(['view', 'edit', 'delete'])

const formatDate = (dateString) => {
  if (!dateString) return ''
  const date = new Date(dateString)
  return date.toLocaleDateString('zh-CN')
}

const handleDelete = () => {
  if (confirm(`确定要删除配色方案"${props.scheme.name}"吗？`)) {
    emit('delete', props.scheme)
  }
}
</script>

<style lang="scss" scoped>
.color-scheme-card {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);
  }
}

.scheme-preview {
  height: 80px;
  display: flex;
  
  .scheme-color {
    flex: 1;
    min-width: 0;
  }
  
  .scheme-more {
    width: 60px;
    background: #f3f4f6;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: #6b7280;
  }
}

.scheme-info {
  padding: 1rem;
}

.scheme-name {
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.5rem;
}

.scheme-description {
  font-size: 0.875rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.scheme-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  font-size: 0.75rem;
  color: #9ca3af;
}

.scheme-actions {
  display: flex;
  gap: 0.5rem;
}

.action-btn {
  flex: 1;
  padding: 0.5rem;
  border: none;
  border-radius: 0.375rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &--primary {
    background: #3498db;
    color: white;
    
    &:hover {
      background: #2980b9;
    }
  }
  
  &--secondary {
    background: #f3f4f6;
    color: #374151;
    
    &:hover {
      background: #e5e7eb;
    }
  }
  
  &--danger {
    background: #fef2f2;
    color: #dc2626;
    
    &:hover {
      background: #fee2e2;
    }
  }
}
</style>

// ===== src/styles/mixins.scss =====
// 按钮混合器
@mixin button-style($bg-color, $text-color: white) {
  background-color: $bg-color;
  color: $text-color;
  border: none;
  border-radius: $rounded-lg;
  padding: $spacing-sm $spacing-md;
  font-weight: 500;
  transition: all $transition-base;
  cursor: pointer;
  
  &:hover {
    background-color: darken($bg-color, 10%);
    transform: translateY(-1px);
    box-shadow: $shadow-md;
  }
  
  &:active {
    transform: translateY(0);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    
    &:hover {
      transform: none;
      box-shadow: none;
    }
  }
}

// 卡片混合器
@mixin card-style {
  background: white;
  border-radius: $rounded-xl;
  box-shadow: $shadow;
  overflow: hidden;
  transition: all $transition-base;
  
  &:hover {
    box-shadow: $shadow-lg;
    transform: translateY(-2px);
  }
}

// 输入框混合器
@mixin input-style {
  width: 100%;
  padding: $spacing-sm $spacing-md;
  border: 2px solid $gray-300;
  border-radius: $rounded-lg;
  transition: all $transition-base;
  
  &:focus {
    outline: none;
    border-color: $primary-blue;
    box-shadow: 0 0 0 3px rgba($primary-blue, 0.1);
  }
  
  &:disabled {
    background: $gray-100;
    cursor: not-allowed;
  }
  
  &.error {
    border-color: $primary-coral;
    
    &:focus {
      box-shadow: 0 0 0 3px rgba($primary-coral, 0.1);
    }
  }
}

// 响应式混合器
@mixin respond-to($breakpoint) {
  @if $breakpoint == xs {
    @media (max-width: #{$breakpoint-sm - 1px}) { @content; }
  }
  @if $breakpoint == sm {
    @media (min-width: $breakpoint-sm) { @content; }
  }
  @if $breakpoint == md {
    @media (min-width: $breakpoint-md) { @content; }
  }
  @if $breakpoint == lg {
    @media (min-width: $breakpoint-lg) { @content; }
  }
  @if $breakpoint == xl {
    @media (min-width: $breakpoint-xl) { @content; }
  }
  @if $breakpoint == 2xl {
    @media (min-width: $breakpoint-2xl) { @content; }
  }
}

// 文本截断混合器
@mixin text-truncate($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// 居中混合器
@mixin center($direction: both) {
  position: absolute;
  
  @if $direction == both {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  } @else if $direction == vertical {
    top: 50%;
    transform: translateY(-50%);
  } @else if $direction == horizontal {
    left: 50%;
    transform: translateX(-50%);
  }
}

// 清除浮动混合器
@mixin clearfix {
  &::after {
    content: "";
    display: table;
    clear: both;
  }
}

// 渐变背景混合器
@mixin gradient-bg($color1, $color2, $direction: 45deg) {
  background: linear-gradient($direction, $color1 0%, $color2 100%);
}

// 阴影混合器
@mixin box-shadow($level: 1) {
  @if $level == 1 {
    box-shadow: $shadow-sm;
  } @else if $level == 2 {
    box-shadow: $shadow;
  } @else if $level == 3 {
    box-shadow: $shadow-md;
  } @else if $level == 4 {
    box-shadow: $shadow-lg;
  } @else if $level == 5 {
    box-shadow: $shadow-xl;
  }
}



// ===== src/views/FavoritesView.vue =====
<template>
  <div class="favorites-view">
    <!-- 页面头部 -->
    <div class="favorites-view__header">
      <h1 class="favorites-view__title">我的收藏</h1>
      <p class="favorites-view__subtitle">
        管理您收藏的颜色和配色方案
      </p>
      
      <!-- 统计信息 -->
      <div class="favorites-view__stats">
        <div class="stat-card">
          <div class="stat-card__number">{{ favoriteStore.favoriteCount }}</div>
          <div class="stat-card__label">收藏颜色</div>
        </div>
        <div class="stat-card">
          <div class="stat-card__number">{{ favoriteStore.schemeCount }}</div>
          <div class="stat-card__label">配色方案</div>
        </div>
      </div>
    </div>

    <!-- 操作工具栏 -->
    <div class="favorites-view__toolbar" v-if="favoriteStore.favoriteCount > 0">
      <div class="toolbar-left">
        <BaseButton
          @click="showCreateScheme = true"
          variant="primary"
          :disabled="selectedColors.length === 0"
        >
          <PlusIcon class="w-4 h-4 mr-2" />
          创建配色方案
        </BaseButton>
        
        <BaseButton
          @click="exportFavorites"
          variant="secondary"
          outline
        >
          <ArrowDownTrayIcon class="w-4 h-4 mr-2" />
          导出收藏
        </BaseButton>
      </div>
      
      <div class="toolbar-right">
        <button
          @click="toggleSelectMode"
          :class="[
            'select-mode-toggle',
            { 'select-mode-toggle--active': selectMode }
          ]"
        >
          {{ selectMode ? '取消选择' : '批量选择' }}
        </button>
        
        <div class="view-toggle">
          <button
            @click="viewMode = 'grid'"
            :class="{ active: viewMode === 'grid' }"
          >
            <Squares2X2Icon class="w-4 h-4" />
          </button>
          <button
            @click="viewMode = 'list'"
            :class="{ active: viewMode === 'list' }"
          >
            <ListBulletIcon class="w-4 h-4" />
          </button>
        </div>
      </div>
    </div>

    <!-- 内容区域 -->
    <div class="favorites-view__content">
      <!-- 空状态 -->
      <div v-if="favoriteStore.favoriteCount === 0" class="empty-state">
        <div class="empty-state__icon">
          <HeartIcon class="w-16 h-16 text-gray-300" />
        </div>
        <h3 class="empty-state__title">还没有收藏任何颜色</h3>
        <p class="empty-state__text">
          在颜色搜索页面点击心形图标来收藏您喜欢的颜色
        </p>
        <BaseButton @click="$router.push('/')" variant="primary">
          <MagnifyingGlassIcon class="w-4 h-4 mr-2" />
          去搜索颜色
        </BaseButton>
      </div>

      <!-- 收藏的颜色 -->
      <div v-else>
        <!-- 配色方案列表 -->
        <div v-if="favoriteStore.schemeCount > 0" class="schemes-section">
          <h2 class="section-title">我的配色方案</h2>
          <div class="schemes-grid">
            <ColorSchemeCard
              v-for="scheme in favoriteStore.colorSchemes"
              :key="scheme.id"
              :scheme="scheme"
              @edit="editScheme"
              @delete="deleteScheme"
              @view="viewScheme"
            />
          </div>
        </div>

        <!-- 收藏颜色列表 -->
        <div class="colors-section">
          <h2 class="section-title">
            收藏的颜色
            <span class="section-count">({{ favoriteStore.favoriteCount }})</span>
          </h2>
          
          <!-- 网格视图 -->
          <div v-if="viewMode === 'grid'" class="colors-grid">
            <FavoriteColorCard
              v-for="color in favoriteStore.favoriteColors"
              :key="color.hex"
              :color="color"
              :select-mode="selectMode"
              :selected="selectedColors.includes(color.hex)"
              @toggle-select="toggleColorSelect"
              @remove="removeFavorite"
              @view-details="viewColorDetails"
            />
          </div>
          
          <!-- 列表视图 -->
          <div v-else class="colors-list">
            <FavoriteColorRow
              v-for="color in favoriteStore.favoriteColors"
              :key="color.hex"
              :color="color"
              :select-mode="selectMode"
              :selected="selectedColors.includes(color.hex)"
              @toggle-select="toggleColorSelect"
              @remove="removeFavorite"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- 创建配色方案弹窗 -->
    <CreateSchemeModal
      v-if="showCreateScheme"
      :colors="selectedColorObjects"
      @close="showCreateScheme = false"
      @created="handleSchemeCreated"
    />

    <!-- 颜色详情弹窗 -->
    <ColorDetailModal
      v-if="selectedColor"
      :color="selectedColor"
      @close="selectedColor = null"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUiStore } from '@stores/uiStore'
import {
  HeartIcon,
  MagnifyingGlassIcon,
  PlusIcon,
  ArrowDownTrayIcon,
  Squares2X2Icon,
  ListBulletIcon
} from '@heroicons/vue/24/outline'

import BaseButton from '@components/common/BaseButton.vue'
import FavoriteColorCard from '@components/favorites/FavoriteColorCard.vue'
import FavoriteColorRow from '@components/favorites/FavoriteColorRow.vue'
import ColorSchemeCard from '@components/favorites/ColorSchemeCard.vue'
import CreateSchemeModal from '@components/favorites/CreateSchemeModal.vue'
import ColorDetailModal from '@components/color/ColorDetailModal.vue'

const favoriteStore = useFavoriteStore()
const uiStore = useUiStore()

// 响应式数据
const viewMode = ref('grid') // grid 或 list
const selectMode = ref(false)
const selectedColors = ref([])
const showCreateScheme = ref(false)
const selectedColor = ref(null)

// 计算属性
const selectedColorObjects = computed(() => {
  return favoriteStore.favoriteColors.filter(color => 
    selectedColors.value.includes(color.hex)
  )
})

// 方法
const toggleSelectMode = () => {
  selectMode.value = !selectMode.value
  if (!selectMode.value) {
    selectedColors.value = []
  }
}

const toggleColorSelect = (hex) => {
  const index = selectedColors.value.indexOf(hex)
  if (index > -1) {
    selectedColors.value.splice(index, 1)
  } else {
    selectedColors.value.push(hex)
  }
}

const removeFavorite = (color) => {
  favoriteStore.removeFromFavorites(color.hex)
  uiStore.showToast(`已移除 ${color.chinese}`, 'success')
}

const viewColorDetails = (color) => {
  selectedColor.value = color
}

const editScheme = (scheme) => {
  // TODO: 实现编辑配色方案
  console.log('编辑方案:', scheme)
}

const deleteScheme = (scheme) => {
  favoriteStore.deleteScheme(scheme.id)
  uiStore.showToast(`已删除方案 ${scheme.name}`, 'success')
}

const viewScheme = (scheme) => {
  favoriteStore.setCurrentScheme(scheme)
  // TODO: 跳转到方案详情页
}

const handleSchemeCreated = (scheme) => {
  showCreateScheme.value = false
  selectedColors.value = []
  selectMode.value = false
  uiStore.showToast(`配色方案 ${scheme.name} 创建成功`, 'success')
}

const exportFavorites = () => {
  const data = favoriteStore.exportData()
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = `favorites-${new Date().toISOString().split('T')[0]}.json`
  document.body.appendChild(a)
  a.click()
  document.body.removeChild(a)
  URL.revokeObjectURL(url)
  
  uiStore.showToast('收藏数据已导出', 'success')
}
</script>

<style lang="scss" scoped>
.favorites-view {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
  
  &__header {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  &__title {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 1rem;
    
    @media (max-width: 640px) {
      font-size: 2rem;
    }
  }
  
  &__subtitle {
    font-size: 1.125rem;
    color: #6b7280;
    margin-bottom: 2rem;
  }
  
  &__stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    
    @media (max-width: 640px) {
      gap: 1rem;
    }
  }
  
  &__toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding: 1rem;
    background: white;
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    
    @media (max-width: 768px) {
      flex-direction: column;
      gap: 1rem;
      align-items: stretch;
    }
  }
  
  &__content {
    min-height: 400px;
  }
}

.stat-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  text-align: center;
  min-width: 120px;
  
  &__number {
    font-size: 2rem;
    font-weight: 700;
    color: #3498db;
    margin-bottom: 0.5rem;
  }
  
  &__label {
    font-size: 0.875rem;
    color: #6b7280;
  }
}

.toolbar-left,
.toolbar-right {
  display: flex;
  align-items: center;
  gap: 1rem;
  
  @media (max-width: 768px) {
    justify-content: center;
  }
}

.select-mode-toggle {
  padding: 0.5rem 1rem;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  background: white;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    border-color: #3498db;
    color: #3498db;
  }
  
  &--active {
    background: #3498db;
    border-color: #3498db;
    color: white;
  }
}

.view-toggle {
  display: flex;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  overflow: hidden;
  
  button {
    padding: 0.5rem;
    background: white;
    border: none;
    cursor: pointer;
    color: #6b7280;
    transition: all 0.2s;
    
    &:hover {
      background: #f9fafb;
    }
    
    &.active {
      background: #3498db;
      color: white;
    }
  }
}

.empty-state {
  text-align: center;
  padding: 4rem 2rem;
  background: white;
  border-radius: 1rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  
  &__icon {
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: center;
  }
  
  &__title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 1rem;
  }
  
  &__text {
    color: #6b7280;
    margin-bottom: 2rem;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
  }
}

.schemes-section,
.colors-section {
  margin-bottom: 3rem;
}

.section-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.section-count {
  font-size: 0.875rem;
  color: #6b7280;
  font-weight: 400;
}

.schemes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

.colors-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1.5rem;
  
  @media (max-width: 640px) {
    grid-template-columns: 1fr;
  }
}

.colors-list {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}
</style>

// ===== src/components/color/ColorDetailModal.vue =====
<template>
  <Teleport to="body">
    <div class="modal-overlay" @click.self="$emit('close')">
      <div class="color-detail-modal">
        <!-- 关闭按钮 -->
        <button @click="$emit('close')" class="modal-close">
          <XMarkIcon class="w-6 h-6" />
        </button>

        <!-- 颜色预览区 -->
        <div class="color-preview" :style="{ backgroundColor: color.hex }">
          <div class="color-preview__content" :style="{ color: color.contrast }">
            <h1 class="color-preview__hex">{{ color.hex }}</h1>
            <div class="color-preview__names">
              <h2 class="chinese-name">{{ color.chinese }}</h2>
              <p class="english-name">{{ color.english }}</p>
            </div>
            <div v-if="color.guofeng" class="guofeng-badge">
              <span>国风：{{ color.guofeng }}</span>
            </div>
          </div>
        </div>

        <!-- 详细信息 -->
        <div class="color-details">
          <div class="details-grid">
            <!-- 基本信息 -->
            <div class="detail-section">
              <h3 class="section-title">基本信息</h3>
              <div class="info-list">
                <div class="info-item">
                  <span class="label">分类:</span>
                  <span class="value category">{{ color.category }}</span>
                </div>
                <div class="info-item" v-if="color.pantone">
                  <span class="label">Pantone:</span>
                  <span class="value">{{ color.pantone }}</span>
                </div>
                <div class="info-item">
                  <span class="label">亮度:</span>
                  <span class="value">{{ color.brightness || getBrightness(color.rgb) }}</span>
                </div>
              </div>
            </div>

            <!-- 色彩值 -->
            <div class="detail-section">
              <h3 class="section-title">色彩值</h3>
              <div class="color-values">
                <div class="value-item">
                  <span class="value-label">HEX</span>
                  <div class="value-content">
                    <span class="value-text">{{ color.hex }}</span>
                    <button @click="copyValue(color.hex)" class="copy-btn">
                      <DocumentDuplicateIcon class="w-4 h-4" />
                    </button>
                  </div>
                </div>
                
                <div class="value-item">
                  <span class="value-label">RGB</span>
                  <div class="value-content">
                    <span class="value-text">{{ color.rgb.r }}, {{ color.rgb.g }}, {{ color.rgb.b }}</span>
                    <button @click="copyValue(`rgb(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b})`)" class="copy-btn">
                      <DocumentDuplicateIcon class="w-4 h-4" />
                    </button>
                  </div>
                </div>
                
                <div class="value-item">
                  <span class="value-label">CMYK</span>
                  <div class="value-content">
                    <span class="value-text">{{ color.cmyk.c }}%, {{ color.cmyk.m }}%, {{ color.cmyk.y }}%, {{ color.cmyk.k }}%</span>
                    <button @click="copyValue(`cmyk(${color.cmyk.c}%, ${color.cmyk.m}%, ${color.cmyk.y}%, ${color.cmyk.k}%)`)" class="copy-btn">
                      <DocumentDuplicateIcon class="w-4 h-4" />
                    </button>
                  </div>
                </div>
                
                <div class="value-item" v-if="color.hsl">
                  <span class="value-label">HSL</span>
                  <div class="value-content">
                    <span class="value-text">{{ color.hsl.h }}°, {{ color.hsl.s }}%, {{ color.hsl.l }}%</span>
                    <button @click="copyValue(`hsl(${color.hsl.h}, ${color.hsl.s}%, ${color.hsl.l}%)`)" class="copy-btn">
                      <DocumentDuplicateIcon class="w-4 h-4" />
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 标签 -->
          <div class="detail-section" v-if="color.tags && color.tags.length > 0">
            <h3 class="section-title">时尚标签</h3>
            <div class="tags-container">
              <span
                v-for="tag in color.tags"
                :key="tag"
                class="tag"
                :class="getTagClass(tag)"
              >
                {{ tag }}
              </span>
            </div>
          </div>

          <!-- 操作按钮 -->
          <div class="actions-section">
            <BaseButton
              @click="toggleFavorite"
              :variant="isFavorite ? 'danger' : 'primary'"
              class="action-btn"
            >
              <HeartIcon :class="['w-4 h-4 mr-2', { 'fill-current': isFavorite }]" />
              {{ isFavorite ? '取消收藏' : '添加收藏' }}
            </BaseButton>
            
            <BaseButton
              @click="generateScheme"
              variant="secondary"
              class="action-btn"
            >
              <ColorSwatchIcon class="w-4 h-4 mr-2" />
              生成配色
            </BaseButton>
            
            <BaseButton
              @click="findSimilar"
              variant="secondary"
              outline
              class="action-btn"
            >
              <MagnifyingGlassIcon class="w-4 h-4 mr-2" />
              相似颜色
            </BaseButton>
          </div>

          <!-- 相似颜色 -->
          <div class="detail-section" v-if="similarColors.length > 0">
            <h3 class="section-title">相似颜色</h3>
            <div class="similar-colors">
              <div
                v-for="similarColor in similarColors"
                :key="similarColor.hex"
                class="similar-color"
                :style="{ backgroundColor: similarColor.hex }"
                @click="$emit('color-change', similarColor)"
                :title="`${similarColor.chinese} (${similarColor.hex})`"
              >
                <span :style="{ color: similarColor.contrast }">
                  {{ similarColor.hex }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </Teleport>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useColorStore } from '@stores/colorStore'
import { useUiStore } from '@stores/uiStore'
import { getBrightness } from '@utils/colorUtils'
import {
  XMarkIcon,
  HeartIcon,
  DocumentDuplicateIcon,
  ColorSwatchIcon,
  MagnifyingGlassIcon
} from '@heroicons/vue/24/outline'
import BaseButton from '@components/common/BaseButton.vue'

const props = defineProps({
  color: {
    type: Object,
    required: true
  }
})

const emit = defineEmits(['close', 'color-change'])

const favoriteStore = useFavoriteStore()
const colorStore = useColorStore()
const uiStore = useUiStore()

const similarColors = ref([])

// 计算属性
const isFavorite = computed(() => favoriteStore.isFavorite(props.color.hex))

// 方法
const copyValue = async (value) => {
  try {
    await navigator.clipboard.writeText(value)
    uiStore.showToast('已复制到剪贴板', 'success', 2000)
  } catch (error) {
    console.error('复制失败:', error)
    uiStore.showToast('复制失败', 'error')
  }
}

const toggleFavorite = () => {
  favoriteStore.toggleFavorite(props.color)
  const message = isFavorite.value ? '已从收藏中移除' : '已添加到收藏'
  uiStore.showToast(message, 'success')
}

const generateScheme = () => {
  // TODO: 实现配色方案生成
  uiStore.showToast('配色方案功能开发中...', 'info')
}

const findSimilar = () => {
  similarColors.value = colorStore.getSimilarColors(props.color, 6)
  uiStore.showToast(`找到 ${similarColors.value.length} 个相似颜色`, 'success')
}

const getTagClass = (tag) => {
  if (tag.includes('时尚')) return 'tag--fashion'
  if (tag.includes('季')) return 'tag--season'
  if (tag.includes('风格')) return 'tag--style'
  return ''
}
</script>

<style lang="scss" scoped>
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 2rem;
}

.color-detail-modal {
  background: white;
  border-radius: 1rem;
  overflow: hidden;
  max-width: 800px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
}

.modal-close {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 10;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: rgba(0, 0, 0, 0.7);
  }
}

.color-preview {
  height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  
  &__content {
    text-align: center;
  }
  
  &__hex {
    font-family: 'Monaco', 'Menlo', monospace;
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    
    @media (max-width: 640px) {
      font-size: 2rem;
    }
  }
  
  &__names {
    margin-bottom: 1rem;
    
    .chinese-name {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      
      @media (max-width: 640px) {
        font-size: 1.5rem;
      }
    }
    
    .english-name {
      font-size: 1.25rem;
      opacity: 0.9;
      font-style: italic;
    }
  }
}

.guofeng-badge {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  padding: 0.5rem 1rem;
  border-radius: 1rem;
  display: inline-block;
  
  span {
    font-weight: 500;
  }
}

.color-details {
  padding: 2rem;
}

.details-grid {
  display: grid;
  gap: 2rem;
  margin-bottom: 2rem;
  
  @media (min-width: 768px) {
    grid-template-columns: 1fr 1fr;
  }
}

.detail-section {
  &:not(.details-grid > &) {
    margin-bottom: 2rem;
  }
}

.section-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 1rem;
  border-bottom: 2px solid #e5e7eb;
  padding-bottom: 0.5rem;
}

.info-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  .label {
    font-weight: 500;
    color: #6b7280;
  }
  
  .value {
    font-weight: 600;
    color: #1f2937;
    
    &.category {
      color: #3498db;
    }
  }
}

.color-values {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.value-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  .value-label {
    font-weight: 600;
    color: #374151;
    min-width: 60px;
  }
  
  .value-content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
    justify-content: flex-end;
  }
  
  .value-text {
    font-family: 'Monaco', 'Menlo', monospace;
    font-size: 0.875rem;
    color: #1f2937;
    background: #f3f4f6;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
  }
  
  .copy-btn {
    background: none;
    border: none;
    color: #6b7280;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 0.25rem;
    transition: all 0.2s;
    
    &:hover {
      background: #f3f4f6;
      color: #3498db;
    }
  }
}

.tags-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tag {
  padding: 0.375rem 0.75rem;
  background: #f3f4f6;
  color: #374151;
  border-radius: 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  
  &--fashion {
    background: #fce7f3;
    color: #be185d;
  }
  
  &--season {
    background: #dcfce7;
    color: #166534;
  }
  
  &--style {
    background: #ede9fe;
    color: #7c3aed;
  }
}

.actions-section {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 2rem;
  
  .action-btn {
    flex: 1;
    min-width: 150px;
    
    @media (max-width: 640px) {
      flex: none;
      width: 100%;
    }
  }
}

.similar-colors {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 0.75rem;
}

.similar-color {
  height: 80px;
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 0.75rem;
  font-weight: 600;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
}

@media (max-width: 640px) {
  .modal-overlay {
    padding: 1rem;
  }
  
  .color-details {
    padding: 1rem;
  }
  
  .details-grid {
    grid-template-columns: 1fr;
  }
  
  .actions-section {
    flex-direction: column;
  }
}
</style>

// ===== src/views/ProfileView.vue =====
<template>
  <div class="profile-view">
    <!-- 页面头部 -->
    <div class="profile-header">
      <div class="profile-info">
        <div class="avatar">
          <img v-if="user.avatar" :src="user.avatar" :alt="user.name" />
          <div v-else class="avatar-placeholder">
            <UserCircleIcon class="w-16 h-16 text-gray-400" />
          </div>
        </div>
        <div class="user-details">
          <h1 class="user-name">{{ user.name }}</h1>
          <p class="user-email">{{ user.email }}</p>
          <p class="login-time">
            登录时间: {{ formatDate(user.loginTime) }}
          </p>
        </div>
      </div>
    </div>

    <!-- 统计信息 -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">
          <HeartIcon class="w-8 h-8 text-red-500" />
        </div>
        <div class="stat-info">
          <div class="stat-number">{{ favoriteStore.favoriteCount }}</div>
          <div class="stat-label">收藏颜色</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">
          <ColorSwatchIcon class="w-8 h-8 text-blue-500" />
        </div>
        <div class="stat-info">
          <div class="stat-number">{{ favoriteStore.schemeCount }}</div>
          <div class="stat-label">配色方案</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">
          <MagnifyingGlassIcon class="w-8 h-8 text-green-500" />
        </div>
        <div class="stat-info">
          <div class="stat-number">{{ searchHistory.length }}</div>
          <div class="stat-label">搜索记录</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">
          <ClockIcon class="w-8 h-8 text-purple-500" />
        </div>
        <div class="stat-info">
          <div class="stat-number">{{ daysActive }}</div>
          <div class="stat-label">活跃天数</div>
        </div>
      </div>
    </div>

    <!-- 设置面板 -->
    <div class="settings-section">
      <h2 class="section-title">个人偏好设置</h2>
      
      <div class="settings-grid">
        <!-- 显示偏好 -->
        <div class="setting-card">
          <h3 class="setting-title">显示偏好</h3>
          <div class="setting-content">
            <div class="setting-item">
              <label class="setting-label">默认视图模式</label>
              <select 
                v-model="preferences.defaultView"
                @change="updatePreferences"
                class="setting-select"
              >
                <option value="grid">网格视图</option>
                <option value="list">列表视图</option>
              </select>
            </div>
            
            <div class="setting-item">
              <label class="setting-label">默认排序方式</label>
              <select 
                v-model="preferences.sortBy"
                @change="updatePreferences"
                class="setting-select"
              >
                <option value="name">按名称排序</option>
                <option value="hue">按色相排序</option>
                <option value="brightness">按亮度排序</option>
                <option value="saturation">按饱和度排序</option>
              </select>
            </div>
            
            <div class="setting-item">
              <label class="setting-label">每页显示数量</label>
              <select 
                v-model="preferences.pageSize"
                @change="updatePreferences"
                class="setting-select"
              >
                <option value="12">12个</option>
                <option value="24">24个</option>
                <option value="48">48个</option>
              </select>
            </div>
          </div>
        </div>

        <!-- 收藏偏好 -->
        <div class="setting-card">
          <h3 class="setting-title">收藏偏好</h3>
          <div class="setting-content">
            <div class="setting-item">
              <label class="setting-label">偏爱的颜色分类</label>
              <div class="checkbox-group">
                <label 
                  v-for="category in colorStore.categories"
                  :key="category"
                  class="checkbox-item"
                >
                  <input
                    type="checkbox"
                    :value="category"
                    v-model="preferences.favoriteCategories"
                    @change="updatePreferences"
                  />
                  <span>{{ category }}</span>
                </label>
              </div>
            </div>
            
            <div class="setting-item">
              <label class="checkbox-item">
                <input
                  type="checkbox"
                  v-model="preferences.showGuofengFirst"
                  @change="updatePreferences"
                />
                <span>优先显示国风颜色</span>
              </label>
            </div>
            
            <div class="setting-item">
              <label class="checkbox-item">
                <input
                  type="checkbox"
                  v-model="preferences.autoSaveSchemes"
                  @change="updatePreferences"
                />
                <span>自动保存配色方案</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 数据管理 -->
    <div class="data-section">
      <h2 class="section-title">数据管理</h2>
      
      <div class="data-actions">
        <div class="action-card">
          <div class="action-info">
            <h3>导出数据</h3>
            <p>导出您的收藏颜色和配色方案</p>
          </div>
          <BaseButton @click="exportData" variant="primary">
            <ArrowDownTrayIcon class="w-4 h-4 mr-2" />
            导出
          </BaseButton>
        </div>
        
        <div class="action-card">
          <div class="action-info">
            <h3>导入数据</h3>
            <p>从备份文件恢复数据</p>
          </div>
          <div class="import-actions">
            <input
              ref="fileInput"
              type="file"
              accept=".json"
              @change="handleFileImport"
              style="display: none"
            />
            <BaseButton @click="$refs.fileInput.click()" variant="secondary">
              <ArrowUpTrayIcon class="w-4 h-4 mr-2" />
              导入
            </BaseButton>
          </div>
        </div>
        
        <div class="action-card danger">
          <div class="action-info">
            <h3>清除数据</h3>
            <p>清除所有收藏和偏好设置</p>
          </div>
          <BaseButton @click="clearAllData" variant="danger">
            <TrashIcon class="w-4 h-4 mr-2" />
            清除
          </BaseButton>
        </div>
      </div>
    </div>

    <!-- 最近活动 -->
    <div class="activity-section">
      <h2 class="section-title">最近活动</h2>
      
      <div class="activity-list">
        <div 
          v-for="activity in recentActivity"
          :key="activity.id"
          class="activity-item"
        >
          <div class="activity-icon">
            <component :is="activity.icon" class="w-5 h-5" />
          </div>
          <div class="activity-content">
            <p class="activity-text">{{ activity.text }}</p>
            <span class="activity-time">{{ formatDate(activity.time) }}</span>
          </div>
        </div>
        
        <div v-if="recentActivity.length === 0" class="empty-activity">
          <p>暂无活动记录</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'
import { useUserStore } from '@stores/userStore'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useColorStore } from '@stores/colorStore'
import { useUiStore } from '@stores/uiStore'
import {
  UserCircleIcon,
  HeartIcon,
  ColorSwatchIcon,
  MagnifyingGlassIcon,
  ClockIcon,
  ArrowDownTrayIcon,
  ArrowUpTrayIcon,
  TrashIcon
} from '@heroicons/vue/24/outline'
import BaseButton from '@components/common/BaseButton.vue'

const userStore = useUserStore()
const favoriteStore = useFavoriteStore()
const colorStore = useColorStore()
const uiStore = useUiStore()

// 响应式数据
const searchHistory = ref([])
const recentActivity = ref([])
const preferences = ref({
  defaultView: 'grid',
  sortBy: 'name',
  pageSize: 24,
  favoriteCategories: [],
  showGuofengFirst: false,
  autoSaveSchemes: true
})

// 计算属性
const user = computed(() => userStore.user)
const daysActive = computed(() => {
  if (!user.value?.loginTime) return 0
  const loginDate = new Date(user.value.loginTime)
  const now = new Date()
  const diffTime = Math.abs(now - loginDate)
  return Math.ceil(diffTime / (1000 * 60 * 60 * 24))
})

// 方法
const formatDate = (dateString) => {
  if (!dateString) return ''
  const date = new Date(dateString)
  return date.toLocaleString('zh-CN')
}

const updatePreferences = () => {
  userStore.updatePreferences(preferences.value)
  uiStore.showToast('偏好设置已保存', 'success')
}

const exportData = () => {
  const data = {
    user: user.value,
    favorites: favoriteStore.exportData(),
    preferences: preferences.value,
    exportDate: new Date().toISOString()
  }
  
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = `profile-backup-${new Date().toISOString().split('T')[0]}.json`
  document.body.appendChild(a)
  a.click()
  document.body.removeChild(a)
  URL.revokeObjectURL(url)
  
  uiStore.showToast('数据导出成功', 'success')
}

const handleFileImport = async (event) => {
  const file = event.target.files[0]
  if (!file) return
  
  try {
    const text = await file.text()
    const data = JSON.parse(text)
    
    if (data.favorites) {
      favoriteStore.importData(data.favorites)
    }
    
    if (data.preferences) {
      preferences.value = { ...preferences.value, ...data.preferences }
      updatePreferences()
    }
    
    uiStore.showToast('数据导入成功', 'success')
  } catch (error) {
    console.error('导入失败:', error)
    uiStore.showToast('导入失败，请检查文件格式', 'error')
  }
}

const clearAllData = () => {
  if (confirm('确定要清除所有数据吗？此操作不可撤销。')) {
    favoriteStore.clearFavorites()
    preferences.value = {
      defaultView: 'grid',
      sortBy: 'name',
      pageSize: 24,
      favoriteCategories: [],
      showGuofengFirst: false,
      autoSaveSchemes: true
    }
    updatePreferences()
    
    uiStore.showToast('所有数据已清除', 'success')
  }
}

const loadRecentActivity = () => {
  // 模拟最近活动数据
  recentActivity.value = [
    {
      id: 1,
      icon: HeartIcon,
      text: '收藏了颜色：航空蓝',
      time: new Date(Date.now() - 1000 * 60 * 30).toISOString()
    },
    {
      id: 2,
      icon: MagnifyingGlassIcon,
      text: '搜索了"红色"',
      time: new Date(Date.now() - 1000 * 60 * 60).toISOString()
    },
    {
      id: 3,
      icon: ColorSwatchIcon,
      text: '创建了配色方案：春日暖阳',
      time: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString()
    }
  ]
}

onMounted(() => {
  // 加载用户偏好
  const userPrefs = userStore.getPreference('all', {})
  preferences.value = { ...preferences.value, ...userPrefs }
  
  // 加载活动记录
  loadRecentActivity()
})
</script>

<style lang="scss" scoped>
.profile-view {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.profile-header {
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  
  .profile-info {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    
    @media (max-width: 640px) {
      flex-direction: column;
      text-align: center;
    }
  }
  
  .avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .avatar-placeholder {
      width: 100%;
      height: 100%;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
  
  .user-name {
    font-size: 1.5rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 0.5rem;
  }
  
  .user-email {
    color: #6b7280;
    margin-bottom: 0.25rem;
  }
  
  .login-time {
    font-size: 0.875rem;
    color: #9ca3af;
  }
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.stat-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 1rem;
  
  .stat-icon {
    flex-shrink: 0;
  }
  
  .stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 0.25rem;
  }
  
  .stat-label {
    font-size: 0.875rem;
    color: #6b7280;
  }
}

.section-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 1.5rem;
}

.settings-section {
  margin-bottom: 3rem;
}

.settings-grid {
  display: grid;
  gap: 1.5rem;
  
  @media (min-width: 768px) {
    grid-template-columns: 1fr 1fr;
  }
}

.setting-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  
  .setting-title {
    font-size: 1rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 1rem;
  }
  
  .setting-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .setting-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .setting-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: #374151;
  }
  
  .setting-select {
    padding: 0.5rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    background: white;
    
    &:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.1);
    }
  }
}

.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  max-height: 150px;
  overflow-y: auto;
}

.checkbox-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  font-size: 0.875rem;
  
  input[type="checkbox"] {
    accent-color: #3498db;
  }
}

.data-section {
  margin-bottom: 3rem;
}

.data-actions {
  display: grid;
  gap: 1rem;
  
  @media (min-width: 768px) {
    grid-template-columns: repeat(3, 1fr);
  }
}

.action-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  
  &.danger {
    border: 1px solid #fecaca;
    background: #fef2f2;
  }
  
  .action-info {
    flex: 1;
    
    h3 {
      font-size: 1rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.25rem;
    }
    
    p {
      font-size: 0.875rem;
      color: #6b7280;
    }
  }
  
  .import-actions {
    display: flex;
    gap: 0.5rem;
  }
}

.activity-section {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

.activity-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.activity-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem;
  border-radius: 0.5rem;
  transition: background-color 0.2s;
  
  &:hover {
    background: #f9fafb;
  }
  
  .activity-icon {
    width: 2rem;
    height: 2rem;
    background: #f3f4f6;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6b7280;
    flex-shrink: 0;
  }
  
  .activity-content {
    flex: 1;
    
    .activity-text {
      font-size: 0.875rem;
      color: #1f2937;
      margin-bottom: 0.25rem;
    }
    
    .activity-time {
      font-size: 0.75rem;
      color: #9ca3af;
    }
  }
}

.empty-activity {
  text-align: center;
  padding: 2rem;
  color: #6b7280;
}

@media (max-width: 640px) {
  .settings-grid,
  .data-actions {
    grid-template-columns: 1fr;
  }
  
  .action-card {
    flex-direction: column;
    text-align: center;
  }
}

// ===== src/components/common/BaseToast.vue =====
<template>
  <Teleport to="body">
    <Transition name="toast">
      <div 
        v-if="uiStore.toast.show"
        :class="[
          'toast',
          `toast--${uiStore.toast.type}`
        ]"
      >
        <div class="toast__content">
          <div class="toast__icon">
            <component :is="iconComponent" class="w-5 h-5" />
          </div>
          <p class="toast__message">{{ uiStore.toast.message }}</p>
          <button @click="uiStore.hideToast" class="toast__close">
            <XMarkIcon class="w-4 h-4" />
          </button>
        </div>
      </div>
    </Transition>
  </Teleport>
</template>

<script setup>
import { computed } from 'vue'
import { useUiStore } from '@/stores/uiStore'
import { 
  CheckCircleIcon, 
  ExclamationTriangleIcon, 
  XCircleIcon, 
  InformationCircleIcon,
  XMarkIcon 
} from '@heroicons/vue/24/outline'

const uiStore = useUiStore()

const iconComponent = computed(() => {
  const iconMap = {
    success: CheckCircleIcon,
    warning: ExclamationTriangleIcon,
    error: XCircleIcon,
    info: InformationCircleIcon
  }
  return iconMap[uiStore.toast.type] || InformationCircleIcon
})
</script>

<style lang="scss" scoped>
.toast {
  position: fixed;
  top: 1rem;
  right: 1rem;
  min-width: 320px;
  max-width: 480px;
  border-radius: 0.75rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  z-index: 1100;
  
  &__content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
  }
  
  &__icon {
    flex-shrink: 0;
  }
  
  &__message {
    flex: 1;
    margin: 0;
    font-size: 0.875rem;
    line-height: 1.25rem;
  }
  
  &__close {
    flex-shrink: 0;
    background: none;
    border: none;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
  }
  
  &--info {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #93c5fd;
  }
  
  &--success {
    background: #dcfce7;
    color: #166534;
    border: 1px solid #86efac;
  }
  
  &--warning {
    background: #fef3c7;
    color: #92400e;
    border: 1px solid #fcd34d;
  }
  
  &--error {
    background: #fee2e2;
    color: #dc2626;
    border: 1px solid #fca5a5;
  }
}

.toast-enter-active,
.toast-leave-active {
  transition: all 0.3s ease;
}

.toast-enter-from {
  transform: translateX(100%);
  opacity: 0;
}

.toast-leave-to {
  transform: translateX(100%);
  opacity: 0;
}

@media (max-width: 640px) {
  .toast {
    right: 1rem;
    left: 1rem;
    min-width: auto;
  }
}
</style>

// ===== src/components/common/BaseButton.vue =====
<template>
  <button
    :class="[
      'btn',
      `btn--${variant}`,
      `btn--${size}`,
      {
        'btn--loading': loading,
        'btn--outline': outline,
        'btn--block': block,
        'btn--disabled': disabled || loading
      }
    ]"
    :disabled="disabled || loading"
    :type="type"
    @click="handleClick"
  >
    <div v-if="loading" class="btn__spinner"></div>
    <slot v-else />
  </button>
</template>

<script setup>
const emit = defineEmits(['click'])

const props = defineProps({
  variant: {
    type: String,
    default: 'primary',
    validator: (value) => ['primary', 'secondary', 'success', 'warning', 'danger'].includes(value)
  },
  size: {
    type: String,
    default: 'md',
    validator: (value) => ['sm', 'md', 'lg'].includes(value)
  },
  type: {
    type: String,
    default: 'button',
    validator: (value) => ['button', 'submit', 'reset'].includes(value)
  },
  outline: {
    type: Boolean,
    default: false
  },
  block: {
    type: Boolean,
    default: false
  },
  loading: {
    type: Boolean,
    default: false
  },
  disabled: {
    type: Boolean,
    default: false
  }
})

const handleClick = (event) => {
  if (!props.disabled && !props.loading) {
    emit('click', event)
  }
}
</script>

<style lang="scss" scoped>
.btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid transparent;
  border-radius: 0.5rem;
  font-weight: 500;
  transition: all 0.2s;
  cursor: pointer;
  text-decoration: none;
  
  &:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  &--disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
  }
  
  // 尺寸
  &--sm {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    min-height: 2rem;
  }
  
  &--md {
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    min-height: 2.5rem;
  }
  
  &--lg {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    min-height: 3rem;
  }
  
  // 变体
  &--primary {
    background: #3498db;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #2980b9;
      transform: translateY(-1px);
    }
  }
  
  &--secondary {
    background: #6c757d;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #5a6268;
      transform: translateY(-1px);
    }
  }
  
  &--success {
    background: #27ae60;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #229954;
      transform: translateY(-1px);
    }
  }
  
  &--warning {
    background: #f39c12;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #e67e22;
      transform: translateY(-1px);
    }
  }
  
  &--danger {
    background: #e74c3c;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #c0392b;
      transform: translateY(-1px);
    }
  }
  
  // 轮廓样式
  &--outline {
    background: transparent;
    border-color: currentColor;
    
    &.btn--primary {
      color: #3498db;
      &:hover:not(.btn--disabled) {
        background: #3498db;
        color: white;
      }
    }
    
    &.btn--secondary {
      color: #6c757d;
      &:hover:not(.btn--disabled) {
        background: #6c757d;
        color: white;
      }
    }
    
    &.btn--success {
      color: #27ae60;
      &:hover:not(.btn--disabled) {
        background: #27ae60;
        color: white;
      }
    }
    
    &.btn--warning {
      color: #f39c12;
      &:hover:not(.btn--disabled) {
        background: #f39c12;
        color: white;
      }
    }
    
    &.btn--danger {
      color: #e74c3c;
      &:hover:not(.btn--disabled) {
        background: #e74c3c;
        color: white;
      }
    }
  }
  
  // 块级
  &--block {
    width: 100%;
  }
  
  // 加载状态
  &--loading {
    pointer-events: none;
  }
  
  &__spinner {
    width: 1rem;
    height: 1rem;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// 触摸设备优化
@media (hover: none) and (pointer: coarse) {
  .btn {
    min-height: 44px; // iOS推荐的最小触摸目标
    
    &:active:not(.btn--disabled) {
      transform: scale(0.95);
    }
  }
}
</style>

// ===== src/components/navigation/MainNav.vue =====
<template>
  <nav class="main-nav">
    <div class="main-nav__container">
      <!-- Logo -->
      <div class="main-nav__logo">
        <router-link to="/" class="main-nav__brand">
          <div class="main-nav__icon">
            <ColorSwatchIcon class="w-8 h-8" />
          </div>
          <div class="main-nav__text">
            <h1 class="main-nav__title">Fashion Color</h1>
            <p class="main-nav__subtitle">时装设计师颜色管理系统</p>
          </div>
        </router-link>
      </div>
      
      <!-- 导航菜单 -->
      <div class="main-nav__menu" :class="{ 'main-nav__menu--open': mobileMenuOpen }">
        <router-link
          v-for="item in navItems"
          :key="item.name"
          :to="item.path"
          class="main-nav__item"
          :class="{ 'main-nav__item--active': $route.path === item.path }"
          @click="closeMobileMenu"
        >
          <component :is="item.icon" class="main-nav__icon" />
          <span>{{ item.label }}</span>
        </router-link>
      </div>
      
      <!-- 用户操作 -->
      <div class="main-nav__actions">
        <!-- 收藏计数 -->
        <div class="main-nav__favorites" v-if="favoriteStore.favoriteCount > 0">
          <router-link to="/favorites" class="main-nav__favorites-link">
            <HeartIcon class="w-5 h-5" />
            <span class="main-nav__favorites-count">{{ favoriteStore.favoriteCount }}</span>
          </router-link>
        </div>
        
        <!-- 用户菜单 -->
        <div class="main-nav__user" v-if="userStore.isAuthenticated">
          <button @click="toggleUserMenu" class="main-nav__user-button">
            <UserCircleIcon class="w-6 h-6" />
          </button>
          
          <!-- 用户下拉菜单 -->
          <div v-if="userMenuOpen" class="main-nav__user-menu">
            <router-link to="/profile" class="main-nav__user-item" @click="userMenuOpen = false">
              个人中心
            </router-link>
            <button @click="handleLogout" class="main-nav__user-item">
              退出登录
            </button>
          </div>
        </div>
        
        <!-- 登录按钮 -->
        <router-link v-else to="/login" class="main-nav__login">
          登录
        </router-link>
        
        <!-- 移动端菜单按钮 -->
        <button
          @click="toggleMobileMenu"
          class="main-nav__mobile-toggle"
        >
          <Bars3Icon v-if="!mobileMenuOpen" class="w-6 h-6" />
          <XMarkIcon v-else class="w-6 h-6" />
        </button>
      </div>
    </div>
  </nav>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import { useRoute } from 'vue-router'
import { useFavoriteStore } from '@/stores/favoriteStore'
import { useUserStore } from '@/stores/userStore'
import {
  MagnifyingGlassIcon,
  PhotoIcon,
  ColorSwatchIcon,
  HeartIcon,
  UserCircleIcon,
  Bars3Icon,
  XMarkIcon
} from '@heroicons/vue/24/outline'

const route = useRoute()
const favoriteStore = useFavoriteStore()
const userStore = useUserStore()

const mobileMenuOpen = ref(false)
const userMenuOpen = ref(false)

const navItems = [
  {
    name: 'search',
    path: '/',
    label: '颜色搜索',
    icon: MagnifyingGlassIcon
  },
  {
    name: 'extract',
    path: '/extract',
    label: '图片取色',
    icon: PhotoIcon
  },
  {
    name: 'wheel',
    path: '/wheel',
    label: '色环选色',
    icon: ColorSwatchIcon
  },
  {
    name: 'favorites',
    path: '/favorites',
    label: '我的收藏',
    icon: HeartIcon
  }
]

const toggleMobileMenu = () => {
  mobileMenuOpen.value = !mobileMenuOpen.value
}

const closeMobileMenu = () => {
  mobileMenuOpen.value = false
}

const toggleUserMenu = () => {
  userMenuOpen.value = !userMenuOpen.value
}

const handleLogout = () => {
  userStore.logout()
  userMenuOpen.value = false
}

// 点击外部关闭菜单
const handleClickOutside = (event) => {
  if (!event.target.closest('.main-nav__user')) {
    userMenuOpen.value = false
  }
  if (!event.target.closest('.main-nav__menu') && !event.target.closest('.main-nav__mobile-toggle')) {
    mobileMenuOpen.value = false
  }
}

onMounted(() => {
  document.addEventListener('click', handleClickOutside)
})

onUnmounted(() => {
  document.removeEventListener('click', handleClickOutside)
})
</script>

<style lang="scss" scoped>
.main-nav {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid #e5e7eb;
  position: sticky;
  top: 0;
  z-index: 100;
  
  &__container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 4rem;
    
    @media (min-width: 1024px) {
      padding: 0 2rem;
    }
  }
  
  &__logo {
    flex-shrink: 0;
  }
  
  &__brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: inherit;
  }
  
  &__icon {
    color: #3498db;
  }
  
  &__text {
    @media (max-width: 640px) {
      display: none;
    }
  }
  
  &__title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #2c3e50;
    margin: 0;
    line-height: 1.2;
  }
  
  &__subtitle {
    font-size: 0.75rem;
    color: #6b7280;
    margin: 0;
    line-height: 1;
  }
  
  &__menu {
    display: none;
    gap: 1rem;
    
    @media (min-width: 768px) {
      display: flex;
      gap: 2rem;
    }
    
    // 移动端菜单
    @media (max-width: 767px) {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border-bottom: 1px solid #e5e7eb;
      flex-direction: column;
      padding: 1rem;
      gap: 0;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      
      &--open {
        display: flex;
      }
    }
  }
  
  &__item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    text-decoration: none;
    color: #6b7280;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 0.2s;
    
    &:hover {
      color: #3498db;
      background: #f1f5f9;
    }
    
    &--active {
      color: #3498db;
      background: #dbeafe;
    }
    
    @media (max-width: 767px) {
      padding: 0.75rem 0;
      border-bottom: 1px solid #f3f4f6;
      border-radius: 0;
      
      &:last-child {
        border-bottom: none;
      }
    }
  }
  
  &__icon {
    width: 1.25rem;
    height: 1.25rem;
  }
  
  &__actions {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  &__favorites {
    position: relative;
  }
  
  &__favorites-link {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem;
    text-decoration: none;
    color: #e74c3c;
    border-radius: 0.5rem;
    transition: all 0.2s;
    
    &:hover {
      background: #fef2f2;
    }
  }
  
  &__favorites-count {
    background: #e74c3c;
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.125rem 0.375rem;
    border-radius: 9999px;
    min-width: 1.25rem;
    text-align: center;
  }
  
  &__user {
    position: relative;
  }
  
  &__user-button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 50%;
    color: #6b7280;
    transition: all 0.2s;
    
    &:hover {
      color: #3498db;
      background: #f1f5f9;
    }
  }
  
  &__user-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    min-width: 8rem;
    z-index: 50;
  }

=== FILE: vite.config.js ===
// vite.config.js - 修复SCSS警告
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import legacy from '@vitejs/plugin-legacy'
import { resolve } from 'path'

export default defineConfig({
  plugins: [
    vue(),
    legacy({
      targets: ['defaults', 'not IE 11']
    })
  ],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src'),
      '@assets': resolve(__dirname, 'src/assets'),
      '@components': resolve(__dirname, 'src/components'),
      '@views': resolve(__dirname, 'src/views'),
      '@stores': resolve(__dirname, 'src/stores'),
      '@utils': resolve(__dirname, 'src/utils'),
      '@styles': resolve(__dirname, 'src/styles')
    }
  },
  css: {
    preprocessorOptions: {
      scss: {
        // 使用现代Sass API，避免legacy警告
        api: 'modern-compiler',
        // 更新additionalData语法
        additionalData: `@use "@styles/variables.scss" as *;`
      }
    }
  },
  build: {
    target: 'es2015',
    outDir: 'dist',
    assetsDir: 'assets',
    sourcemap: false,
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router', 'pinia'],
          utils: ['chroma-js', 'lodash-es', 'fuse.js'],
          ui: ['@heroicons/vue', '@vueuse/core']
        }
      }
    },
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true,
      }
    }
  },
  server: {
    port: 3000,
    host: true,
    open: true
  }
})

=== FILE: public\debug.html ===
<!-- 放在 public/debug.html - 用于测试数据加载 -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>颜色数据测试</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .result { margin: 10px 0; padding: 10px; background: #f5f5f5; border-radius: 4px; }
        .color-item { margin: 5px 0; padding: 5px; background: white; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>颜色数据加载测试</h1>
    <button onclick="testColorLoad()">测试加载颜色数据</button>
    <div id="results"></div>

    <script>
        async function testColorLoad() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="result">正在加载...</div>';
            
            try {
                console.log('开始测试颜色数据加载...');
                
                // 测试网络请求
                const response = await fetch('/colors.json');
                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('原始数据:', data);
                
                let colorArray = [];
                if (data.colors && Array.isArray(data.colors)) {
                    colorArray = data.colors;
                } else if (Array.isArray(data)) {
                    colorArray = data;
                } else {
                    throw new Error('数据格式不正确');
                }
                
                console.log('处理后的颜色数组长度:', colorArray.length);
                
                // 显示结果
                resultsDiv.innerHTML = `
                    <div class="result">
                        <h3>✅ 成功加载 ${colorArray.length} 个颜色</h3>
                        <p>数据结构: ${Array.isArray(data) ? '直接数组' : '包含colors属性的对象'}</p>
                        <p>第一个颜色: ${colorArray[0]?.chinese || '无'} (${colorArray[0]?.hex || '无'})</p>
                        <h4>前5个颜色:</h4>
                        ${colorArray.slice(0, 5).map(color => `
                            <div class="color-item" style="border-left: 4px solid ${color.hex}">
                                ${color.chinese} - ${color.english} - ${color.hex}
                            </div>
                        `).join('')}
                    </div>
                `;
                
            } catch (error) {
                console.error('加载失败:', error);
                resultsDiv.innerHTML = `
                    <div class="result" style="background: #ffe6e6; color: #cc0000;">
                        <h3>❌ 加载失败</h3>
                        <p>错误信息: ${error.message}</p>
                        <p>请检查:</p>
                        <ul>
                            <li>colors.json 文件是否存在于 public 目录</li>
                            <li>文件格式是否正确</li>
                            <li>服务器是否正常运行</li>
                        </ul>
                    </div>
                `;
            }
        }
        
        // 页面加载时自动测试
        window.addEventListener('load', testColorLoad);
    </script>
</body>
</html>

=== FILE: src\App.vue ===
<template>
  <div id="app" class="app">
    <!-- 主导航 -->
    <MainNav />
    
    <!-- 主要内容区域 -->
    <main class="app-main">
      <!-- 全局加载状态 -->
      <BaseLoading 
        v-if="uiStore.isLoading" 
        :text="uiStore.loadingText" 
        overlay 
      />
      
      <!-- 路由视图 -->
      <RouterView v-slot="{ Component, route }">
        <Transition 
          :name="route.meta.transition || 'fade'" 
          mode="out-in"
        >
          <component :is="Component" :key="route.path" />
        </Transition>
      </RouterView>
    </main>
    
    <!-- Toast 消息容器 -->
    <ToastContainer />
    
    <!-- 颜色详情模态框 -->
    <ColorDetailModal 
      v-if="uiStore.modals.colorDetail.visible"
      :color="uiStore.modals.colorDetail.color"
      @close="uiStore.hideColorDetail"
    />
  </div>
</template>

<script setup>
import { onMounted } from 'vue'
import { RouterView } from 'vue-router'
import MainNav from '@/components/navigation/MainNav.vue'
import BaseLoading from '@/components/common/BaseLoading.vue'
import ToastContainer from '@/components/common/ToastContainer.vue'
import ColorDetailModal from '@/components/color/ColorDetailModal.vue'
import { useUIStore } from '@/stores/uiStore'
import { useColorStore } from '@/stores/colorStore'
import { useUserStore } from '@/stores/userStore'

const uiStore = useUIStore()
const colorStore = useColorStore()
const userStore = useUserStore()

onMounted(async () => {
  try {
    console.log('开始应用初始化...')
    
    // 初始化 UI 设置
    uiStore.initializeUI()
    
    // 恢复用户会话（如果需要）
    if (userStore.restoreSession) {
      await userStore.restoreSession()
    }
    
    // 加载颜色数据
    await colorStore.loadColors()
    
    console.log('应用初始化完成')
  } catch (error) {
    console.error('应用初始化失败:', error)
    uiStore.showError('应用初始化失败，请刷新页面重试')
  }
})
</script>

<style lang="scss">
// 全局样式重置
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.6;
  color: #111827;
  background-color: #f8fafc;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  min-height: 100vh;
  overflow-x: hidden;
}

// 应用布局
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.app-main {
  flex: 1;
  position: relative;
}

// 路由过渡动画
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

.slide-enter-active,
.slide-leave-active {
  transition: all 0.3s ease;
}

.slide-enter-from {
  opacity: 0;
  transform: translateX(30px);
}

.slide-leave-to {
  opacity: 0;
  transform: translateX(-30px);
}

// 响应式辅助类
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
  
  @media (max-width: 640px) {
    padding: 0 0.75rem;
  }
}

// 工具类
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 滚动条样式
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f3f4;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 4px;
  
  &:hover {
    background: #9ca3af;
  }
}

// 焦点样式
:focus {
  outline: 2px solid #3498db;
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;
}

// 选择文本样式
::selection {
  background: #dbeafe;
  color: #1e40af;
}

// 暗色主题支持
[data-theme='dark'] {
  .app {
    background: #111827;
    color: #f9fafb;
  }
  
  .app-main {
    background: #111827;
  }
}

// 打印样式
@media print {
  .main-nav,
  .toast-container {
    display: none !important;
  }
  
  .app-main {
    padding: 0;
  }
}
</style>

=== FILE: src\main.js ===
// ===== src/main.js =====
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import router from './router'
import App from './App.vue'

// 样式文件
import './styles/main.scss'

// 创建应用实例
const app = createApp(App)

// 使用插件
app.use(createPinia())
app.use(router)

// 全局属性
app.config.globalProperties.$env = import.meta.env

// 挂载应用
app.mount('#app')

=== FILE: src\components\auth\LoginModal.vue ===
<!-- 需要创建的 LoginModal.vue -->
<template>
  <div class="modal-overlay" @click.self="$emit('close')">
    <div class="login-modal">
      <div class="modal-header">
        <h2>用户登录</h2>
        <button @click="$emit('close')" class="close-btn">
          <XMarkIcon class="w-6 h-6" />
        </button>
      </div>
      
      <div class="login-content">
        <form @submit.prevent="handleSubmit">
          <div class="form-group">
            <label>用户名</label>
            <input 
              v-model="username"
              type="text"
              placeholder="请输入用户名"
              required
            />
          </div>
          
          <div class="form-group">
            <label>密码</label>
            <input 
              v-model="password"
              type="password"
              placeholder="请输入密码"
              required
            />
          </div>
          
          <div class="form-actions">
            <button type="submit" class="login-btn" :disabled="isLoading">
              {{ isLoading ? '登录中...' : '登录' }}
            </button>
          </div>
        </form>
        
        <div class="demo-accounts">
          <p>演示账号：</p>
          <div class="demo-btns">
            <button @click="setDemoAccount('designer')" class="demo-btn">
              设计师 (designer/fashion123)
            </button>
            <button @click="setDemoAccount('admin')" class="demo-btn">
              管理员 (admin/admin123)
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { useUIStore } from '@stores/uiStore'
import { XMarkIcon } from '@heroicons/vue/24/outline'

const emit = defineEmits(['close', 'login'])

const uiStore = useUIStore()

const username = ref('')
const password = ref('')
const isLoading = ref(false)

const demoAccounts = {
  designer: { username: 'designer', password: 'fashion123' },
  admin: { username: 'admin', password: 'admin123' }
}

const setDemoAccount = (type) => {
  const account = demoAccounts[type]
  username.value = account.username
  password.value = account.password
}

const handleSubmit = async () => {
  isLoading.value = true
  
  try {
    // 模拟登录验证
    await new Promise(resolve => setTimeout(resolve, 1000))
    
    const validAccounts = Object.values(demoAccounts)
    const isValid = validAccounts.some(account => 
      account.username === username.value && account.password === password.value
    )
    
    if (isValid) {
      emit('login', { username: username.value })
    } else {
      uiStore.showMessage('用户名或密码错误', 'error')
    }
  } catch (error) {
    uiStore.showMessage('登录失败，请重试', 'error')
  } finally {
    isLoading.value = false
  }
}
</script>

<style lang="scss" scoped>
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.login-modal {
  background: white;
  border-radius: 12px;
  max-width: 400px;
  width: 100%;
  overflow: hidden;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid #e5e7eb;
  
  h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
  }
}

.close-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: #6b7280;
  
  &:hover {
    color: #374151;
  }
}

.login-content {
  padding: 20px;
}

.form-group {
  margin-bottom: 16px;
  
  label {
    display: block;
    margin-bottom: 4px;
    font-size: 14px;
    font-weight: 500;
    color: #374151;
  }
  
  input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
    
    &:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
    }
  }
}

.form-actions {
  margin-top: 20px;
}

.login-btn {
  width: 100%;
  background: #3b82f6;
  color: white;
  border: none;
  padding: 10px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  
  &:hover:not(:disabled) {
    background: #2563eb;
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

.demo-accounts {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
  
  p {
    margin: 0 0 8px 0;
    font-size: 12px;
    color: #6b7280;
  }
}

.demo-btns {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.demo-btn {
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  padding: 6px 10px;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  text-align: left;
  
  &:hover {
    background: #e5e7eb;
  }
}
</style>

=== FILE: src\components\color\ColorCard.vue ===
// ===== src/components/color/ColorCard.vue =====
<template>
  <div class="color-card" @click="handleCardClick">
    <div 
      class="color-card__preview"
      :style="{ backgroundColor: color.hex }"
    >
      <!-- 收藏按钮 -->
      <button
        @click.stop="handleFavoriteClick"
        class="color-card__favorite"
        :class="{ 'color-card__favorite--active': isFavorite }"
      >
        <HeartIcon 
          :class="[
            'w-5 h-5',
            isFavorite ? 'fill-current' : ''
          ]"
        />
      </button>
      
      <!-- 对比色文字 -->
      <div 
        class="color-card__hex"
        :style="{ color: color.contrast }"
      >
        {{ color.hex }}
      </div>
    </div>
    
    <div class="color-card__info">
      <div class="color-card__name">
        <h3>{{ color.chinese }}</h3>
        <p class="color-card__english">{{ color.english }}</p>
      </div>
      
      <div class="color-card__details">
        <p class="color-card__category">{{ color.category }}</p>
        <p class="color-card__rgb">
          RGB({{ color.rgb.r }}, {{ color.rgb.g }}, {{ color.rgb.b }})
        </p>
        <p v-if="color.guofeng" class="color-card__guofeng">
          国风：{{ color.guofeng }}
        </p>
      </div>
      
      <!-- 标签 -->
      <div class="color-card__tags" v-if="color.tags.length > 0">
        <span
          v-for="tag in color.tags.slice(0, 3)"
          :key="tag"
          class="color-card__tag"
          :class="getTagClass(tag)"
        >
          {{ tag }}
        </span>
        <span v-if="color.tags.length > 3" class="color-card__tag-more">
          +{{ color.tags.length - 3 }}
        </span>
      </div>
      
      <!-- 操作按钮 -->
      <div class="color-card__actions">
        <BaseButton
          size="sm"
          variant="secondary"
          @click.stop="handleCopyHex"
        >
          复制 HEX
        </BaseButton>
        
        <BaseButton
          size="sm"
          variant="primary"
          @click.stop="handleViewDetails"
        >
          查看详情
        </BaseButton>
      </div>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'
import { HeartIcon } from '@heroicons/vue/24/outline'
import BaseButton from '@components/common/BaseButton.vue'

const props = defineProps({
  color: {
    type: Object,
    required: true
  }
})

const emit = defineEmits(['click', 'view-details'])

const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

const isFavorite = computed(() => favoriteStore.isFavorite(props.color.hex))

const handleCardClick = () => {
  emit('click', props.color)
}

const handleFavoriteClick = () => {
  favoriteStore.toggleFavorite(props.color)
  const message = isFavorite.value ? '已添加到收藏' : '已从收藏中移除'
  uiStore.showToast(message, 'success', 2000)
}

const handleCopyHex = async () => {
  try {
    await navigator.clipboard.writeText(props.color.hex)
    uiStore.showToast('HEX 值已复制到剪贴板', 'success', 2000)
  } catch (error) {
    console.error('复制失败:', error)
    uiStore.showToast('复制失败，请手动复制', 'error')
  }
}

const handleViewDetails = () => {
  emit('view-details', props.color)
}

const getTagClass = (tag) => {
  if (tag.includes('时尚')) return 'color-card__tag--fashion'
  if (tag.includes('季')) return 'color-card__tag--season'
  if (tag.includes('风格')) return 'color-card__tag--style'
  return ''
}
</script>

<style lang="scss" scoped>
.color-card {
  @include card-style;
  cursor: pointer;
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  &__preview {
    height: 120px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  &__favorite {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(5px);
    border: none;
    border-radius: 50%;
    width: 2rem;
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    
    &:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 1);
    }
    
    &--active {
      color: #e74c3c;
    }
  }
  
  &__hex {
    font-family: 'Monaco', 'Menlo', monospace;
    font-weight: 600;
    font-size: 0.875rem;
    background: rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(5px);
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
  }
  
  &__info {
    padding: 1rem;
  }
  
  &__name {
    margin-bottom: 0.5rem;
    
    h3 {
      font-size: 1rem;
      font-weight: 600;
      color: #1f2937;
      margin: 0 0 0.25rem 0;
    }
  }
  
  &__english {
    font-size: 0.75rem;
    color: #6b7280;
    margin: 0;
    font-style: italic;
  }
  
  &__details {
    margin-bottom: 0.75rem;
    
    p {
      font-size: 0.75rem;
      color: #6b7280;
      margin: 0.125rem 0;
    }
  }
  
  &__category {
    font-weight: 500;
    color: #3498db !important;
  }
  
  &__guofeng {
    color: #e74c3c !important;
    font-weight: 500;
  }
  
  &__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    margin-bottom: 0.75rem;
  }
  
  &__tag {
    @extend .tag !optional;
    font-size: 0.625rem;
    padding: 0.125rem 0.375rem;
    
    &--fashion {
      background: #e91e63;
      color: white;
    }
    
    &--season {
      background: #27ae60;
      color: white;
    }
    
    &--style {
      background: #9b59b6;
      color: white;
    }
  }
  
  &__tag-more {
    font-size: 0.625rem;
    color: #6b7280;
    font-weight: 500;
  }
  
  &__actions {
    display: flex;
    gap: 0.5rem;
  }
}

// 移动端优化
@media (max-width: 640px) {
  .color-card {
    &__actions {
      flex-direction: column;
    }
  }
}
</style>

=== FILE: src\components\color\ColorDetailModal.vue ===
<!-- src/components/color/ColorDetailModal.vue -->
<template>
  <div class="modal-overlay" @click="$emit('close')">
    <div class="modal-content" @click.stop>
      <div class="modal-header">
        <h2>{{ color?.chinese || '颜色详情' }}</h2>
        <button @click="$emit('close')" class="close-btn">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      
      <div v-if="color" class="modal-body">
        <!-- 颜色预览 -->
        <div class="color-preview" :style="{ backgroundColor: color.hex }">
          <div class="color-info">
            <h3>{{ color.chinese }}</h3>
            <p>{{ color.english }}</p>
            <p>{{ color.hex }}</p>
          </div>
        </div>
        
        <!-- 颜色参数 -->
        <div class="color-params">
          <div class="param-group">
            <h4>RGB</h4>
            <p>{{ color.rgb.r }}, {{ color.rgb.g }}, {{ color.rgb.b }}</p>
          </div>
          <div class="param-group">
            <h4>CMYK</h4>
            <p>{{ color.cmyk.c }}%, {{ color.cmyk.m }}%, {{ color.cmyk.y }}%, {{ color.cmyk.k }}%</p>
          </div>
          <div class="param-group" v-if="color.hsl">
            <h4>HSL</h4>
            <p>{{ color.hsl.h }}°, {{ color.hsl.s }}%, {{ color.hsl.l }}%</p>
          </div>
          <div class="param-group" v-if="color.guofeng && color.guofeng !== 'null'">
            <h4>国风色彩</h4>
            <p>{{ color.guofeng }}</p>
          </div>
        </div>
        
        <!-- 标签 -->
        <div v-if="color.tags && color.tags.length" class="color-tags">
          <h4>标签</h4>
          <div class="tags">
            <span v-for="tag in color.tags" :key="tag" class="tag">{{ tag }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  color: {
    type: Object,
    default: null
  }
})

const emit = defineEmits(['close'])
</script>

<style lang="scss" scoped>
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
}

.modal-content {
  background: white;
  border-radius: 1rem;
  max-width: 500px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  border-bottom: 1px solid #e5e7eb;
  
  h2 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
  }
}

.close-btn {
  background: none;
  border: none;
  color: #6b7280;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 0.25rem;
  
  &:hover {
    background: #f3f4f6;
    color: #374151;
  }
}

.modal-body {
  padding: 1.5rem;
}

.color-preview {
  height: 150px;
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  margin-bottom: 1.5rem;
  
  .color-info {
    background: rgba(255, 255, 255, 0.9);
    padding: 1rem;
    border-radius: 0.5rem;
    backdrop-filter: blur(4px);
    
    h3 {
      margin: 0 0 0.25rem 0;
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
    }
    
    p {
      margin: 0;
      font-size: 0.875rem;
      color: #6b7280;
    }
  }
}

.color-params {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.param-group {
  h4 {
    margin: 0 0 0.25rem 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
  }
  
  p {
    margin: 0;
    font-size: 0.875rem;
    color: #6b7280;
    font-family: monospace;
  }
}

.color-tags {
  h4 {
    margin: 0 0 0.75rem 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
  }
}

.tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tag {
  background: #f3f4f6;
  color: #374151;
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  border: 1px solid #e5e7eb;
}
</style>

=== FILE: src\components\color\ColorGrid.vue ===
<!-- ColorGrid.vue - 修复版本 -->
<template>
  <div class="color-grid">
    <!-- 加载状态 -->
    <div v-if="colorStore.isLoading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>正在加载颜色数据...</p>
    </div>
    
    <!-- 颜色网格 -->
    <div 
      v-else
      class="color-grid__container"
    >
      <div 
        v-for="color in displayColors" 
        :key="color.hex"
        class="color-item"
        @click="showColorDetail(color)"
      >
        <!-- 色块区域 - 点击显示详细信息 -->
        <div 
          class="color-block"
          :style="{ backgroundColor: color.hex }"
          :title="`点击查看 ${color.chinese} 详细信息`"
        >
          <!-- 收藏按钮 -->
          <button
            @click.stop="toggleFavorite(color)"
            class="favorite-btn"
            :class="{ 'favorite-btn--active': favoriteStore.isFavorite(color.hex) }"
          >
            <HeartIcon class="heart-icon" />
          </button>
        </div>
        
        <!-- 简化的颜色信息 -->
        <div class="color-info">
          <h3 class="color-name">{{ color.chinese }}</h3>
          <p class="color-english">{{ color.english }}</p>
          <p class="color-hex">{{ color.hex }}</p>
          
          <!-- 国风标识 -->
          <div v-if="color.guofeng" class="guofeng-badge">
            国风
          </div>
        </div>
      </div>
    </div>
    
    <!-- 空状态 -->
    <div v-if="!colorStore.isLoading && displayColors.length === 0" class="empty-state">
      <div class="empty-icon">🎨</div>
      <h3>没有找到匹配的颜色</h3>
      <p>尝试调整搜索条件或筛选选项</p>
      <button @click="clearAllFilters" class="reset-btn">
        重置筛选
      </button>
    </div>
    
    <!-- 颜色详情弹窗 -->
    <ColorDetailModal 
      v-if="selectedColor"
      :color="selectedColor"
      @close="selectedColor = null"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useColorStore } from '@stores/colorStore'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'
import { HeartIcon } from '@heroicons/vue/24/outline'
import ColorDetailModal from './ColorDetailModal.vue'

const props = defineProps({
  colors: {
    type: Array,
    default: () => []
  },
  pageSize: {
    type: Number,
    default: 48
  }
})

const emit = defineEmits(['color-click', 'load-more'])

const colorStore = useColorStore()
const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

const selectedColor = ref(null)

// 计算显示的颜色
const displayColors = computed(() => {
  return props.colors.length > 0 ? props.colors : colorStore.filteredColors
})

// 显示颜色详情
const showColorDetail = (color) => {
  selectedColor.value = color
  emit('color-click', color)
}

// 切换收藏状态
const toggleFavorite = (color) => {
  favoriteStore.toggleFavorite(color)
  
  // 显示反馈消息
  const isFav = favoriteStore.isFavorite(color.hex)
  uiStore.showMessage(
    isFav ? `已收藏 ${color.chinese}` : `已取消收藏 ${color.chinese}`,
    isFav ? 'success' : 'info'
  )
}

// 清空所有筛选
const clearAllFilters = () => {
  colorStore.clearFilters()
  uiStore.showMessage('已重置所有筛选条件', 'info')
}
</script>

<style lang="scss" scoped>
.color-grid {
  width: 100%;
  
  &__container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 16px;
    padding: 16px 0;
    
    @media (max-width: 768px) {
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 12px;
    }
    
    @media (max-width: 480px) {
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
    }
  }
}

.color-item {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    
    .favorite-btn {
      opacity: 1;
    }
  }
}

.color-block {
  height: 80px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  
  @media (max-width: 480px) {
    height: 70px;
  }
}

.favorite-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 32px;
  height: 32px;
  border: none;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s ease;
  
  &:hover {
    background: rgba(255, 255, 255, 1);
    transform: scale(1.1);
  }
  
  &--active {
    opacity: 1;
    background: rgba(239, 68, 68, 0.1);
    
    .heart-icon {
      color: #ef4444;
      fill: currentColor;
    }
  }
}

.heart-icon {
  width: 16px;
  height: 16px;
  color: #6b7280;
  transition: all 0.2s ease;
}

.color-info {
  padding: 12px;
  
  @media (max-width: 480px) {
    padding: 10px;
  }
}

.color-name {
  font-size: 14px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 4px 0;
  line-height: 1.3;
  
  @media (max-width: 480px) {
    font-size: 13px;
  }
}

.color-english {
  font-size: 12px;
  color: #6b7280;
  margin: 0 0 6px 0;
  line-height: 1.3;
  
  @media (max-width: 480px) {
    font-size: 11px;
  }
}

.color-hex {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
  font-size: 11px;
  color: #9ca3af;
  margin: 0;
  font-weight: 500;
  
  @media (max-width: 480px) {
    font-size: 10px;
  }
}

.guofeng-badge {
  display: inline-block;
  background: linear-gradient(45deg, #dc2626, #b91c1c);
  color: white;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  margin-top: 6px;
  letter-spacing: 0.5px;
}

/* 加载状态 */
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid #f3f4f6;
  border-top: 3px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 16px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 空状态 */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: #6b7280;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.empty-state h3 {
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 8px 0;
}

.empty-state p {
  margin: 0 0 24px 0;
  color: #6b7280;
}

.reset-btn {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
  
  &:hover {
    background: #2563eb;
  }
}
</style>

=== FILE: src\components\common\BaseButton.vue ===

<template>
  <button
    :class="[
      'btn',
      `btn--${variant}`,
      `btn--${size}`,
      {
        'btn--loading': loading,
        'btn--outline': outline,
        'btn--block': block,
        'btn--disabled': disabled || loading
      }
    ]"
    :disabled="disabled || loading"
    :type="type"
    @click="handleClick"
  >
    <div v-if="loading" class="btn__spinner"></div>
    <slot v-else />
  </button>
</template>

<script setup>
const emit = defineEmits(['click'])

const props = defineProps({
  variant: {
    type: String,
    default: 'primary',
    validator: (value) => ['primary', 'secondary', 'success', 'warning', 'danger'].includes(value)
  },
  size: {
    type: String,
    default: 'md',
    validator: (value) => ['sm', 'md', 'lg'].includes(value)
  },
  type: {
    type: String,
    default: 'button',
    validator: (value) => ['button', 'submit', 'reset'].includes(value)
  },
  outline: {
    type: Boolean,
    default: false
  },
  block: {
    type: Boolean,
    default: false
  },
  loading: {
    type: Boolean,
    default: false
  },
  disabled: {
    type: Boolean,
    default: false
  }
})

const handleClick = (event) => {
  if (!props.disabled && !props.loading) {
    emit('click', event)
  }
}
</script>

<style lang="scss" scoped>
.btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 2px solid transparent;
  border-radius: 0.5rem;
  font-weight: 500;
  transition: all 0.2s;
  cursor: pointer;
  text-decoration: none;
  
  &:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  &--disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
  }
  
  // 尺寸
  &--sm {
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    min-height: 2rem;
  }
  
  &--md {
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    min-height: 2.5rem;
  }
  
  &--lg {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    min-height: 3rem;
  }
  
  // 变体
  &--primary {
    background: #3498db;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #2980b9;
      transform: translateY(-1px);
    }
  }
  
  &--secondary {
    background: #6c757d;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #5a6268;
      transform: translateY(-1px);
    }
  }
  
  &--success {
    background: #27ae60;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #229954;
      transform: translateY(-1px);
    }
  }
  
  &--warning {
    background: #f39c12;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #e67e22;
      transform: translateY(-1px);
    }
  }
  
  &--danger {
    background: #e74c3c;
    color: white;
    
    &:hover:not(.btn--disabled) {
      background: #c0392b;
      transform: translateY(-1px);
    }
  }
  
  // 轮廓样式
  &--outline {
    background: transparent;
    border-color: currentColor;
    
    &.btn--primary {
      color: #3498db;
      &:hover:not(.btn--disabled) {
        background: #3498db;
        color: white;
      }
    }
    
    &.btn--secondary {
      color: #6c757d;
      &:hover:not(.btn--disabled) {
        background: #6c757d;
        color: white;
      }
    }
    
    &.btn--success {
      color: #27ae60;
      &:hover:not(.btn--disabled) {
        background: #27ae60;
        color: white;
      }
    }
    
    &.btn--warning {
      color: #f39c12;
      &:hover:not(.btn--disabled) {
        background: #f39c12;
        color: white;
      }
    }
    
    &.btn--danger {
      color: #e74c3c;
      &:hover:not(.btn--disabled) {
        background: #e74c3c;
        color: white;
      }
    }
  }
  
  // 块级
  &--block {
    width: 100%;
  }
  
  // 加载状态
  &--loading {
    pointer-events: none;
  }
  
  &__spinner {
    width: 1rem;
    height: 1rem;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// 触摸设备优化
@media (hover: none) and (pointer: coarse) {
  .btn {
    min-height: 44px; // iOS推荐的最小触摸目标
    
    &:active:not(.btn--disabled) {
      transform: scale(0.95);
    }
  }
}
</style>

=== FILE: src\components\common\BaseLoading.vue ===
<!-- src/components/common/BaseLoading.vue -->
<template>
  <div :class="loadingClasses">
    <div class="loading-spinner">
      <div class="spinner"></div>
    </div>
    <div v-if="text" class="loading-text">{{ text }}</div>
  </div>
</template>

<script setup>
import { computed } from 'vue'

const props = defineProps({
  text: {
    type: String,
    default: ''
  },
  overlay: {
    type: Boolean,
    default: false
  },
  center: {
    type: Boolean,
    default: false
  },
  size: {
    type: String,
    default: 'md',
    validator: (value) => ['sm', 'md', 'lg'].includes(value)
  }
})

const loadingClasses = computed(() => {
  const classes = ['base-loading']
  
  if (props.overlay) classes.push('base-loading--overlay')
  if (props.center) classes.push('base-loading--center')
  classes.push(`base-loading--${props.size}`)
  
  return classes
})
</script>

<style lang="scss" scoped>
.base-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.75rem;
  
  &--overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(2px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  &--center {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 200px;
  }
  
  &--sm .spinner {
    width: 1.5rem;
    height: 1.5rem;
  }
  
  &--md .spinner {
    width: 2rem;
    height: 2rem;
  }
  
  &--lg .spinner {
    width: 3rem;
    height: 3rem;
  }
}

.loading-spinner {
  color: #3498db;
}

.spinner {
  width: 2rem;
  height: 2rem;
  border: 3px solid #e5e7eb;
  border-top: 3px solid currentColor;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.loading-text {
  font-size: 0.875rem;
  color: #6b7280;
  text-align: center;
}

@keyframes spin {
  0% { 
    transform: rotate(0deg); 
  }
  100% { 
    transform: rotate(360deg); 
  }
}
</style>

=== FILE: src\components\common\BaseToast.vue ===
// ===== src/components/common/BaseToast.vue =====
<template>
  <Teleport to="body">
    <Transition name="toast">
      <div 
        v-if="uiStore.toast.show"
        :class="[
          'toast',
          `toast--${uiStore.toast.type}`
        ]"
      >
        <div class="toast__content">
          <div class="toast__icon">
            <component :is="iconComponent" class="w-5 h-5" />
          </div>
          <p class="toast__message">{{ uiStore.toast.message }}</p>
          <button @click="uiStore.hideToast" class="toast__close">
            <XMarkIcon class="w-4 h-4" />
          </button>
        </div>
      </div>
    </Transition>
  </Teleport>
</template>

<script setup>
import { computed } from 'vue'
import { useUIStore } from '@stores/uiStore'
import { 
  CheckCircleIcon, 
  ExclamationTriangleIcon, 
  XCircleIcon, 
  InformationCircleIcon,
  XMarkIcon 
} from '@heroicons/vue/24/outline'

const uiStore = useUIStore()

const iconComponent = computed(() => {
  const iconMap = {
    success: CheckCircleIcon,
    warning: ExclamationTriangleIcon,
    error: XCircleIcon,
    info: InformationCircleIcon
  }
  return iconMap[uiStore.toast.type] || InformationCircleIcon
})
</script>

<style lang="scss" scoped>
.toast {
  position: fixed;
  top: 1rem;
  right: 1rem;
  min-width: 320px;
  max-width: 480px;
  border-radius: 0.75rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  z-index: 1100;
  
  &__content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
  }
  
  &__icon {
    flex-shrink: 0;
  }
  
  &__message {
    flex: 1;
    margin: 0;
    font-size: 0.875rem;
    line-height: 1.25rem;
  }
  
  &__close {
    flex-shrink: 0;
    background: none;
    border: none;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 1;
    }
  }
  
  &--info {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #93c5fd;
  }
  
  &--success {
    background: #dcfce7;
    color: #166534;
    border: 1px solid #86efac;
  }
  
  &--warning {
    background: #fef3c7;
    color: #92400e;
    border: 1px solid #fcd34d;
  }
  
  &--error {
    background: #fee2e2;
    color: #dc2626;
    border: 1px solid #fca5a5;
  }
}

.toast-enter-active,
.toast-leave-active {
  transition: all 0.3s ease;
}

.toast-enter-from {
  transform: translateX(100%);
  opacity: 0;
}

.toast-leave-to {
  transform: translateX(100%);
  opacity: 0;
}

@media (max-width: 640px) {
  .toast {
    right: 1rem;
    left: 1rem;
    min-width: auto;
  }
}
</style>



=== FILE: src\components\common\ToastContainer.vue ===
<!-- src/components/common/ToastContainer.vue -->
<template>
  <Teleport to="body">
    <div class="toast-container">
      <TransitionGroup name="toast-list" tag="div">
        <div
          v-for="message in uiStore.messages"
          :key="message.id"
          :class="['toast', `toast--${message.type}`]"
        >
          <div class="toast-icon">
            <CheckIcon v-if="message.type === 'success'" class="w-5 h-5" />
            <XCircleIcon v-else-if="message.type === 'error'" class="w-5 h-5" />
            <ExclamationTriangleIcon v-else-if="message.type === 'warning'" class="w-5 h-5" />
            <InformationCircleIcon v-else class="w-5 h-5" />
          </div>
          <div class="toast-content">
            <div class="toast-title">{{ message.title }}</div>
            <div v-if="message.message" class="toast-message">{{ message.message }}</div>
          </div>
          <button 
            v-if="message.closable"
            @click="uiStore.removeMessage(message.id)" 
            class="toast-close"
          >
            <XMarkIcon class="w-4 h-4" />
          </button>
        </div>
      </TransitionGroup>
    </div>
  </Teleport>
</template>

<script setup>
import { useUIStore } from '@/stores/uiStore'

// 内联 SVG 图标
const CheckIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
  </svg>`
}

const XCircleIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>`
}

const ExclamationTriangleIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
  </svg>`
}

const InformationCircleIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>`
}

const XMarkIcon = {
  template: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
  </svg>`
}

const uiStore = useUIStore()
</script>

<style lang="scss" scoped>
.toast-container {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  pointer-events: none;
  
  @media (max-width: 640px) {
    top: 0.5rem;
    right: 0.5rem;
    left: 0.5rem;
  }
}

.toast {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  padding: 1rem;
  background: white;
  border-radius: 0.5rem;
  border-left: 4px solid;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  pointer-events: auto;
  
  &--success {
    border-left-color: #10b981;
    
    .toast-icon {
      color: #10b981;
    }
  }
  
  &--error {
    border-left-color: #ef4444;
    
    .toast-icon {
      color: #ef4444;
    }
  }
  
  &--warning {
    border-left-color: #f59e0b;
    
    .toast-icon {
      color: #f59e0b;
    }
  }
  
  &--info {
    border-left-color: #3b82f6;
    
    .toast-icon {
      color: #3b82f6;
    }
  }
}

.toast-icon {
  flex-shrink: 0;
  margin-top: 0.125rem;
}

.toast-content {
  flex: 1;
  min-width: 0;
}

.toast-title {
  font-weight: 600;
  color: #111827;
  margin-bottom: 0.25rem;
}

.toast-message {
  font-size: 0.875rem;
  color: #6b7280;
  line-height: 1.4;
}

.toast-close {
  flex-shrink: 0;
  background: none;
  border: none;
  color: #9ca3af;
  cursor: pointer;
  border-radius: 0.25rem;
  padding: 0.125rem;
  
  &:hover {
    color: #6b7280;
    background: #f3f4f6;
  }
}

// 动画
.toast-list-enter-active,
.toast-list-leave-active {
  transition: all 0.3s ease;
}

.toast-list-enter-from {
  opacity: 0;
  transform: translateX(100%);
}

.toast-list-leave-to {
  opacity: 0;
  transform: translateX(100%);
}

.toast-list-move {
  transition: transform 0.3s ease;
}
</style>

=== FILE: src\components\favorites\ColorSchemeCard.vue ===
// ===== src/components/favorites/ColorSchemeCard.vue =====
<template>
  <div class="color-scheme-card">
    <!-- 配色预览 -->
    <div class="scheme-preview">
      <div
        v-for="color in scheme.colors.slice(0, 5)"
        :key="color.hex || color"
        class="scheme-color"
        :style="{ backgroundColor: color.hex || color }"
        :title="color.chinese || color"
      ></div>
      <div v-if="scheme.colors.length > 5" class="scheme-more">
        +{{ scheme.colors.length - 5 }}
      </div>
    </div>

    <!-- 方案信息 -->
    <div class="scheme-info">
      <h3 class="scheme-name">{{ scheme.name }}</h3>
      <p v-if="scheme.description" class="scheme-description">
        {{ scheme.description }}
      </p>
      
      <div class="scheme-meta">
        <span class="color-count">{{ scheme.colors.length }} 个颜色</span>
        <span class="created-date">{{ formatDate(scheme.createdAt) }}</span>
      </div>

      <!-- 操作按钮 -->
      <div class="scheme-actions">
        <button @click="$emit('view', scheme)" class="action-btn action-btn--primary">
          查看
        </button>
        <button @click="$emit('edit', scheme)" class="action-btn action-btn--secondary">
          编辑
        </button>
        <button @click="handleDelete" class="action-btn action-btn--danger">
          删除
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
const props = defineProps({
  scheme: {
    type: Object,
    required: true
  }
})

defineEmits(['view', 'edit', 'delete'])

const formatDate = (dateString) => {
  if (!dateString) return ''
  const date = new Date(dateString)
  return date.toLocaleDateString('zh-CN')
}

const handleDelete = () => {
  if (confirm(`确定要删除配色方案"${props.scheme.name}"吗？`)) {
    emit('delete', props.scheme)
  }
}
</script>

<style lang="scss" scoped>
.color-scheme-card {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);
  }
}

.scheme-preview {
  height: 80px;
  display: flex;
  
  .scheme-color {
    flex: 1;
    min-width: 0;
  }
  
  .scheme-more {
    width: 60px;
    background: #f3f4f6;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: #6b7280;
  }
}

.scheme-info {
  padding: 1rem;
}

.scheme-name {
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.5rem;
}

.scheme-description {
  font-size: 0.875rem;
  color: #6b7280;
  margin-bottom: 0.75rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.scheme-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  font-size: 0.75rem;
  color: #9ca3af;
}

.scheme-actions {
  display: flex;
  gap: 0.5rem;
}

.action-btn {
  flex: 1;
  padding: 0.5rem;
  border: none;
  border-radius: 0.375rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &--primary {
    background: #3498db;
    color: white;
    
    &:hover {
      background: #2980b9;
    }
  }
  
  &--secondary {
    background: #f3f4f6;
    color: #374151;
    
    &:hover {
      background: #e5e7eb;
    }
  }
  
  &--danger {
    background: #fef2f2;
    color: #dc2626;
    
    &:hover {
      background: #fee2e2;
    }
  }
}
</style>

=== FILE: src\components\favorites\CreateSchemeModal.vue ===
<template>
  <div 
    v-if="isVisible" 
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
    @click.self="closeModal"
  >
    <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto">
      <!-- 标题 -->
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-gray-900">创建配色方案</h3>
        <button 
          @click="closeModal" 
          class="text-gray-400 hover:text-gray-600 transition-colors"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- 表单 -->
      <form @submit.prevent="createScheme">
        <!-- 方案名称 -->
        <div class="mb-4">
          <label for="schemeName" class="block text-sm font-medium text-gray-700 mb-2">
            方案名称 <span class="text-red-500">*</span>
          </label>
          <input
            id="schemeName"
            v-model="formData.name"
            type="text"
            placeholder="请输入配色方案名称"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            required
          />
        </div>

        <!-- 方案描述 -->
        <div class="mb-4">
          <label for="schemeDescription" class="block text-sm font-medium text-gray-700 mb-2">
            方案描述
          </label>
          <textarea
            id="schemeDescription"
            v-model="formData.description"
            rows="3"
            placeholder="描述这个配色方案的用途或特点"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
          ></textarea>
        </div>

        <!-- 选择的颜色预览 -->
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            选中的颜色 ({{ selectedColors.length }})
          </label>
          <div v-if="selectedColors.length > 0" class="space-y-2 max-h-32 overflow-y-auto">
            <div 
              v-for="color in selectedColors" 
              :key="color.hex"
              class="flex items-center space-x-3 p-2 bg-gray-50 rounded"
            >
              <div 
                class="w-8 h-8 rounded border border-gray-200 flex-shrink-0"
                :style="{ backgroundColor: color.hex }"
              ></div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-gray-900 truncate">{{ color.chinese }}</p>
                <p class="text-xs text-gray-500">{{ color.hex }}</p>
              </div>
              <button 
                type="button"
                @click="removeColor(color.hex)"
                class="text-red-400 hover:text-red-600 transition-colors"
                title="移除颜色"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </div>
          <div v-else class="text-sm text-gray-500 bg-gray-50 rounded p-3 text-center">
            暂无选中的颜色，请先在颜色列表中选择颜色
          </div>
        </div>

        <!-- 方案标签 -->
        <div class="mb-6">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            方案标签
          </label>
          <div class="flex flex-wrap gap-2 mb-2">
            <button
              v-for="tag in commonTags"
              :key="tag"
              type="button"
              @click="toggleTag(tag)"
              :class="[
                'px-3 py-1 text-xs rounded-full border transition-colors',
                formData.tags.includes(tag)
                  ? 'bg-blue-100 border-blue-300 text-blue-700'
                  : 'bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200'
              ]"
            >
              {{ tag }}
            </button>
          </div>
          <input
            v-model="customTag"
            type="text"
            placeholder="添加自定义标签"
            class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            @keypress.enter.prevent="addCustomTag"
          />
        </div>

        <!-- 按钮组 -->
        <div class="flex space-x-3">
          <button
            type="button"
            @click="closeModal"
            class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"
          >
            取消
          </button>
          <button
            type="submit"
            :disabled="!canCreate"
            :class="[
              'flex-1 px-4 py-2 rounded-md transition-colors',
              canCreate
                ? 'bg-blue-600 text-white hover:bg-blue-700'
                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
            ]"
          >
            创建方案
          </button>
        </div>
      </form>
    </div>
  </div>
</template>

<script>
import { ref, computed, watch } from 'vue'
import { useFavoriteStore } from '@/stores/favoriteStore'

export default {
  name: 'CreateSchemeModal',
  props: {
    isVisible: {
      type: Boolean,
      default: false
    },
    selectedColors: {
      type: Array,
      default: () => []
    }
  },
  emits: ['close', 'created'],
  setup(props, { emit }) {
    const favoriteStore = useFavoriteStore()
    
    // 表单数据
    const formData = ref({
      name: '',
      description: '',
      tags: []
    })
    
    const customTag = ref('')
    
    // 常用标签
    const commonTags = ref([
      '商务风格',
      '时尚搭配',
      '温馨家居',
      '现代简约',
      '复古经典',
      '清新自然',
      '浪漫温馨',
      '高端奢华'
    ])
    
    // 计算属性
    const canCreate = computed(() => {
      return formData.value.name.trim() && props.selectedColors.length > 0
    })
    
    // 方法
    const closeModal = () => {
      emit('close')
      resetForm()
    }
    
    const removeColor = (hex) => {
      // 通知父组件移除颜色
      emit('color-removed', hex)
    }
    
    const toggleTag = (tag) => {
      const index = formData.value.tags.indexOf(tag)
      if (index > -1) {
        formData.value.tags.splice(index, 1)
      } else {
        formData.value.tags.push(tag)
      }
    }
    
    const addCustomTag = () => {
      const tag = customTag.value.trim()
      if (tag && !formData.value.tags.includes(tag)) {
        formData.value.tags.push(tag)
        customTag.value = ''
      }
    }
    
    const createScheme = () => {
      if (!canCreate.value) return
      
      const scheme = {
        id: Date.now().toString(),
        name: formData.value.name.trim(),
        description: formData.value.description.trim(),
        colors: [...props.selectedColors],
        tags: [...formData.value.tags],
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString()
      }
      
      // 添加到收藏存储
      favoriteStore.addColorScheme(scheme)
      
      // 通知父组件
      emit('created', scheme)
      
      // 关闭弹窗
      closeModal()
    }
    
    const resetForm = () => {
      formData.value = {
        name: '',
        description: '',
        tags: []
      }
      customTag.value = ''
    }
    
    // 监听弹窗显示状态
    watch(() => props.isVisible, (newVal) => {
      if (!newVal) {
        resetForm()
      }
    })
    
    return {
      formData,
      customTag,
      commonTags,
      canCreate,
      closeModal,
      removeColor,
      toggleTag,
      addCustomTag,
      createScheme
    }
  }
}
</script>

<style scoped>
/* 自定义滚动条样式 */
.overflow-y-auto::-webkit-scrollbar {
  width: 4px;
}

.overflow-y-auto::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 2px;
}

.overflow-y-auto::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 2px;
}

.overflow-y-auto::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}
</style>

=== FILE: src\components\favorites\FavoriteColorCard.vue ===
// ===== src/components/favorites/FavoriteColorCard.vue =====
<template>
  <div class="favorite-color-card" :class="{ 'favorite-color-card--selected': selected }">
    <!-- 选择框 -->
    <div v-if="selectMode" class="selection-checkbox">
      <input
        type="checkbox"
        :checked="selected"
        @change="$emit('toggle-select', color.hex)"
      />
    </div>

    <!-- 颜色预览 -->
    <div 
      class="color-preview"
      :style="{ backgroundColor: color.hex }"
      @click="handleCardClick"
    >
      <!-- 移除按钮 -->
      <button
        @click.stop="$emit('remove', color)"
        class="remove-btn"
        title="移除收藏"
      >
        <XMarkIcon class="w-4 h-4" />
      </button>
      
      <!-- HEX值 -->
      <div class="hex-value" :style="{ color: color.contrast }">
        {{ color.hex }}
      </div>
      
      <!-- 收藏时间 -->
      <div class="favorite-date" :style="{ color: color.contrast }">
        {{ formatDate(color.addedAt) }}
      </div>
    </div>

    <!-- 颜色信息 -->
    <div class="color-info">
      <h3 class="color-name">{{ color.chinese }}</h3>
      <p class="color-english">{{ color.english }}</p>
      
      <div class="color-details">
        <span class="category">{{ color.category }}</span>
        <span v-if="color.guofeng" class="guofeng">{{ color.guofeng }}</span>
      </div>

      <!-- 操作按钮 -->
      <div class="color-actions">
        <button
          @click="$emit('view-details', color)"
          class="action-btn action-btn--primary"
        >
          查看详情
        </button>
        <button
          @click="copyHex"
          class="action-btn action-btn--secondary"
        >
          复制 HEX
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useUIStore } from '@stores/uiStore'
import { XMarkIcon } from '@heroicons/vue/24/outline'

const props = defineProps({
  color: {
    type: Object,
    required: true
  },
  selectMode: {
    type: Boolean,
    default: false
  },
  selected: {
    type: Boolean,
    default: false
  }
})

defineEmits(['toggle-select', 'remove', 'view-details'])

const uiStore = useUIStore()

const formatDate = (dateString) => {
  if (!dateString) return ''
  const date = new Date(dateString)
  return date.toLocaleDateString('zh-CN')
}

const handleCardClick = () => {
  if (props.selectMode) {
    emit('toggle-select', props.color.hex)
  }
}

const copyHex = async () => {
  try {
    await navigator.clipboard.writeText(props.color.hex)
    uiStore.showToast('HEX值已复制', 'success', 2000)
  } catch (error) {
    uiStore.showToast('复制失败', 'error')
  }
}
</script>

<style lang="scss" scoped>
.favorite-color-card {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  position: relative;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15);
  }
  
  &--selected {
    ring: 2px solid #3498db;
    transform: translateY(-2px);
  }
}

.selection-checkbox {
  position: absolute;
  top: 0.5rem;
  left: 0.5rem;
  z-index: 10;
  
  input[type="checkbox"] {
    width: 1.25rem;
    height: 1.25rem;
    accent-color: #3498db;
  }
}

.color-preview {
  height: 120px;
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 0.75rem;
}

.remove-btn {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  background: rgba(0, 0, 0, 0.5);
  border: none;
  border-radius: 50%;
  width: 1.75rem;
  height: 1.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: rgba(239, 68, 68, 0.8);
    transform: scale(1.1);
  }
}

.hex-value {
  font-family: 'Monaco', 'Menlo', monospace;
  font-weight: 600;
  font-size: 1rem;
  text-align: center;
  background: rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  align-self: center;
}

.favorite-date {
  font-size: 0.75rem;
  text-align: center;
  opacity: 0.8;
  background: rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  padding: 0.125rem 0.25rem;
  border-radius: 0.125rem;
  align-self: center;
}

.color-info {
  padding: 1rem;
}

.color-name {
  font-size: 1rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.25rem;
}

.color-english {
  font-size: 0.875rem;
  color: #6b7280;
  font-style: italic;
  margin-bottom: 0.75rem;
}

.color-details {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
  
  .category {
    font-size: 0.75rem;
    background: #dbeafe;
    color: #1e40af;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
  }
  
  .guofeng {
    font-size: 0.75rem;
    background: #fef2f2;
    color: #dc2626;
    padding: 0.125rem 0.5rem;
    border-radius: 1rem;
  }
}

.color-actions {
  display: flex;
  gap: 0.5rem;
}

.action-btn {
  flex: 1;
  padding: 0.5rem;
  border: none;
  border-radius: 0.375rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &--primary {
    background: #3498db;
    color: white;
    
    &:hover {
      background: #2980b9;
    }
  }
  
  &--secondary {
    background: #f3f4f6;
    color: #374151;
    
    &:hover {
      background: #e5e7eb;
    }
  }
}
</style>

=== FILE: src\components\favorites\FavoriteColorRow.vue ===
<template>
  <div 
    class="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow group"
    :class="{ 'ring-2 ring-blue-500': isSelected }"
  >
    <div class="flex items-center space-x-4">
      <!-- 颜色预览 -->
      <div class="flex-shrink-0">
        <div 
          class="w-12 h-12 rounded-lg border-2 border-gray-100 shadow-sm cursor-pointer transition-transform hover:scale-105"
          :style="{ backgroundColor: color.hex }"
          @click="showColorDetail"
        ></div>
      </div>
      
      <!-- 颜色信息 -->
      <div class="flex-1 min-w-0">
        <div class="flex items-center space-x-2 mb-1">
          <h3 class="text-lg font-medium text-gray-900 truncate">{{ color.chinese }}</h3>
          <span class="text-sm text-gray-500">{{ color.english }}</span>
        </div>
        
        <div class="flex items-center space-x-4 text-sm text-gray-600 mb-2">
          <span class="font-mono font-medium">{{ color.hex }}</span>
          <span class="px-2 py-1 bg-gray-100 rounded text-xs">{{ color.category }}</span>
          <span v-if="color.guofeng" class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs">
            国风 · {{ color.guofeng }}
          </span>
        </div>
        
        <!-- RGB 和 CMYK 值 -->
        <div class="flex items-center space-x-6 text-xs text-gray-500">
          <div>
            <span class="font-medium">RGB:</span>
            <span>{{ color.rgb.r }}, {{ color.rgb.g }}, {{ color.rgb.b }}</span>
          </div>
          <div>
            <span class="font-medium">CMYK:</span>
            <span>{{ color.cmyk.c }}%, {{ color.cmyk.m }}%, {{ color.cmyk.y }}%, {{ color.cmyk.k }}%</span>
          </div>
          <div v-if="color.pantone">
            <span class="font-medium">Pantone:</span>
            <span>{{ color.pantone }}</span>
          </div>
        </div>
        
        <!-- 标签 -->
        <div v-if="color.tags && color.tags.length > 0" class="flex flex-wrap gap-1 mt-2">
          <span 
            v-for="tag in displayTags" 
            :key="tag"
            class="px-2 py-0.5 bg-blue-50 text-blue-600 rounded text-xs"
          >
            {{ tag }}
          </span>
          <button 
            v-if="color.tags.length > maxDisplayTags"
            @click="showAllTags = !showAllTags"
            class="px-2 py-0.5 bg-gray-50 text-gray-500 rounded text-xs hover:bg-gray-100 transition-colors"
          >
            {{ showAllTags ? '收起' : `+${color.tags.length - maxDisplayTags}` }}
          </button>
        </div>
      </div>
      
      <!-- 操作按钮 -->
      <div class="flex-shrink-0 flex items-center space-x-2">
        <!-- 复制按钮 -->
        <button
          @click="copyHex"
          class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-md transition-colors"
          title="复制HEX值"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
          </svg>
        </button>
        
        <!-- 选择按钮 -->
        <button
          v-if="selectable"
          @click="toggleSelection"
          :class="[
            'p-2 rounded-md transition-colors',
            isSelected 
              ? 'text-blue-600 bg-blue-50 hover:bg-blue-100' 
              : 'text-gray-400 hover:text-gray-600 hover:bg-gray-50'
          ]"
          :title="isSelected ? '取消选择' : '选择颜色'"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
        </button>
        
        <!-- 取消收藏按钮 -->
        <button
          @click="removeFavorite"
          class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors"
          title="取消收藏"
        >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path>
          </svg>
        </button>
        
        <!-- 更多操作菜单 -->
        <div class="relative">
          <button
            @click="showMenu = !showMenu"
            class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-md transition-colors"
            title="更多操作"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path>
            </svg>
          </button>
          
          <!-- 下拉菜单 -->
          <div 
            v-if="showMenu"
            class="absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10"
          >
            <button
              @click="exportColor"
              class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"
            >
              导出颜色数据
            </button>
            <button
              @click="shareColor"
              class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"
            >
              分享颜色
            </button>
            <button
              @click="viewSimilar"
              class="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 transition-colors"
            >
              查看相似颜色
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 收藏时间 -->
    <div v-if="favoriteDate" class="mt-3 pt-3 border-t border-gray-100">
      <p class="text-xs text-gray-500">
        收藏于 {{ formatDate(favoriteDate) }}
      </p>
    </div>
  </div>
</template>

<script>
import { ref, computed } from 'vue'
import { useFavoriteStore } from '@/stores/favoriteStore'

export default {
  name: 'FavoriteColorRow',
  props: {
    color: {
      type: Object,
      required: true
    },
    selectable: {
      type: Boolean,
      default: false
    },
    isSelected: {
      type: Boolean,
      default: false
    },
    favoriteDate: {
      type: String,
      default: ''
    }
  },
  emits: ['click', 'remove', 'select', 'detail'],
  setup(props, { emit }) {
    const favoriteStore = useFavoriteStore()
    
    const showMenu = ref(false)
    const showAllTags = ref(false)
    const maxDisplayTags = ref(3)
    
    // 计算显示的标签
    const displayTags = computed(() => {
      if (!props.color.tags) return []
      if (showAllTags.value) return props.color.tags
      return props.color.tags.slice(0, maxDisplayTags.value)
    })
    
    // 方法
    const copyHex = async () => {
      try {
        await navigator.clipboard.writeText(props.color.hex)
        // 这里可以添加Toast提示
        console.log('HEX值已复制到剪贴板')
      } catch (err) {
        console.error('复制失败:', err)
      }
    }
    
    const toggleSelection = () => {
      emit('select', props.color)
    }
    
    const removeFavorite = () => {
      favoriteStore.removeFavoriteColor(props.color.hex)
      emit('remove', props.color)
    }
    
    const showColorDetail = () => {
      emit('detail', props.color)
    }
    
    const exportColor = () => {
      const colorData = {
        hex: props.color.hex,
        chinese: props.color.chinese,
        english: props.color.english,
        rgb: props.color.rgb,
        cmyk: props.color.cmyk,
        category: props.color.category,
        tags: props.color.tags,
        guofeng: props.color.guofeng,
        pantone: props.color.pantone
      }
      
      const dataStr = JSON.stringify(colorData, null, 2)
      const dataBlob = new Blob([dataStr], { type: 'application/json' })
      const url = URL.createObjectURL(dataBlob)
      
      const link = document.createElement('a')
      link.href = url
      link.download = `${props.color.chinese}_${props.color.hex}.json`
      link.click()
      
      URL.revokeObjectURL(url)
      showMenu.value = false
    }
    
    const shareColor = async () => {
      const shareData = {
        title: `颜色分享: ${props.color.chinese}`,
        text: `${props.color.chinese} (${props.color.english}) - ${props.color.hex}`,
        url: window.location.href
      }
      
      try {
        if (navigator.share) {
          await navigator.share(shareData)
        } else {
          await navigator.clipboard.writeText(`${shareData.title}\n${shareData.text}`)
          console.log('分享内容已复制到剪贴板')
        }
      } catch (err) {
        console.error('分享失败:', err)
      }
      
      showMenu.value = false
    }
    
    const viewSimilar = () => {
      // 触发查看相似颜色事件
      emit('view-similar', props.color)
      showMenu.value = false
    }
    
    const formatDate = (dateString) => {
      if (!dateString) return ''
      const date = new Date(dateString)
      return date.toLocaleDateString('zh-CN', {
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      })
    }
    
    // 点击外部关闭菜单
    const handleClickOutside = (event) => {
      if (!event.target.closest('.relative')) {
        showMenu.value = false
      }
    }
    
    // 添加全局点击监听
    if (typeof window !== 'undefined') {
      window.addEventListener('click', handleClickOutside)
    }
    
    return {
      showMenu,
      showAllTags,
      maxDisplayTags,
      displayTags,
      copyHex,
      toggleSelection,
      removeFavorite,
      showColorDetail,
      exportColor,
      shareColor,
      viewSimilar,
      formatDate
    }
  }
}
</script>

<style scoped>
/* 确保菜单在最上层 */
.relative {
  z-index: 10;
}

/* 菜单动画 */
.absolute {
  animation: fadeIn 0.1s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 悬停效果 */
.group:hover .group-hover\:opacity-100 {
  opacity: 1;
}
</style>

=== FILE: src\components\favorites\FavoritesModal.vue ===
<!-- 需要创建的 FavoritesModal.vue -->
<template>
  <div class="modal-overlay" @click.self="$emit('close')">
    <div class="favorites-modal">
      <div class="modal-header">
        <h2>我的收藏</h2>
        <button @click="$emit('close')" class="close-btn">
          <XMarkIcon class="w-6 h-6" />
        </button>
      </div>
      
      <div class="favorites-content">
        <div v-if="favoriteStore.favorites.length === 0" class="empty-favorites">
          <p>您还没有收藏任何颜色</p>
        </div>
        
        <div v-else class="favorites-grid">
          <div 
            v-for="color in favoriteStore.favorites" 
            :key="color.hex"
            class="favorite-item"
            @click="viewColor(color)"
          >
            <div 
              class="color-preview"
              :style="{ backgroundColor: color.hex }"
            >
              <button 
                @click.stop="removeFavorite(color)"
                class="remove-btn"
              >
                <XMarkIcon class="w-4 h-4" />
              </button>
            </div>
            <div class="color-info">
              <h3>{{ color.chinese }}</h3>
              <p>{{ color.english }}</p>
              <p class="hex">{{ color.hex }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'
import { XMarkIcon } from '@heroicons/vue/24/outline'

const emit = defineEmits(['close', 'view-color'])

const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

const viewColor = (color) => {
  emit('view-color', color)
}

const removeFavorite = (color) => {
  favoriteStore.toggleFavorite(color)
  uiStore.showMessage(`已取消收藏 ${color.chinese}`, 'info')
}
</script>

<style lang="scss" scoped>
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.favorites-modal {
  background: white;
  border-radius: 12px;
  max-width: 800px;
  width: 100%;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid #e5e7eb;
  
  h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
  }
}

.close-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: #6b7280;
  
  &:hover {
    color: #374151;
  }
}

.favorites-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.empty-favorites {
  text-align: center;
  padding: 40px;
  color: #6b7280;
}

.favorites-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.favorite-item {
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
}

.color-preview {
  height: 80px;
  position: relative;
}

.remove-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #6b7280;
  
  &:hover {
    background: white;
    color: #ef4444;
  }
}

.color-info {
  padding: 12px;
  
  h3 {
    margin: 0 0 4px 0;
    font-size: 14px;
    font-weight: 600;
  }
  
  p {
    margin: 0 0 2px 0;
    font-size: 12px;
    color: #6b7280;
  }
  
  .hex {
    font-family: monospace;
    font-weight: 500;
  }
}
</style>

=== FILE: src\components\navigation\MainNav.vue ===
<template>
  <nav class="main-nav">
    <div class="main-nav__container">
      <!-- Logo -->
      <div class="main-nav__logo">
        <router-link to="/" class="main-nav__brand">
          <div class="main-nav__icon">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a4 4 0 004-4V5z" />
            </svg>
          </div>
          <div class="main-nav__text">
            <h1 class="main-nav__title">Fashion Color</h1>
            <p class="main-nav__subtitle">时装设计师颜色管理系统</p>
          </div>
        </router-link>
      </div>
      
      <!-- 导航菜单 -->
      <div class="main-nav__menu" :class="{ 'main-nav__menu--open': mobileMenuOpen }">
        <router-link
          v-for="item in navItems"
          :key="item.name"
          :to="item.path"
          class="main-nav__item"
          :class="{ 'main-nav__item--active': isActiveRoute(item.path) }"
          @click="closeMobileMenu"
        >
          <component :is="item.icon" class="main-nav__icon" />
          <span>{{ item.label }}</span>
        </router-link>
      </div>
      
      <!-- 用户操作 -->
      <div class="main-nav__actions">
        <!-- 收藏计数 -->
        <div class="main-nav__favorites" v-if="favoriteStore.favoriteCount > 0">
          <router-link to="/favorites" class="main-nav__favorites-link">
            <HeartIcon class="w-5 h-5" />
            <span class="main-nav__favorites-count">{{ favoriteStore.favoriteCount }}</span>
          </router-link>
        </div>
        
        <!-- 用户菜单 -->
        <div class="main-nav__user" v-if="userStore.isAuthenticated">
          <button @click="toggleUserMenu" class="main-nav__user-button">
            <UserIcon class="w-6 h-6" />
          </button>
          
          <!-- 用户下拉菜单 -->
          <div v-if="userMenuOpen" class="main-nav__user-menu">
            <router-link to="/profile" class="main-nav__user-item" @click="userMenuOpen = false">
              <UserIcon class="w-4 h-4 mr-2" />
              个人中心
            </router-link>
            <button @click="handleLogout" class="main-nav__user-item">
              <LogoutIcon class="w-4 h-4 mr-2" />
              退出登录
            </button>
          </div>
        </div>
        
        <!-- 登录按钮 -->
        <router-link v-else to="/login" class="main-nav__login">
          登录
        </router-link>
        
        <!-- 移动端菜单按钮 -->
        <button
          @click="toggleMobileMenu"
          class="main-nav__mobile-toggle md:hidden"
        >
          <MenuIcon v-if="!mobileMenuOpen" class="w-6 h-6" />
          <XIcon v-else class="w-6 h-6" />
        </button>
      </div>
    </div>
  </nav>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import { useRoute } from 'vue-router'
import { useFavoriteStore } from '@/stores/favoriteStore'
import { useUserStore } from '@/stores/userStore'
import { useUIStore } from '@/stores/uiStore'

// 内联 SVG 图标组件
const SearchIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
  </svg>`
}

const PhotoIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
  </svg>`
}

const SwatchIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a4 4 0 004-4V5z" />
  </svg>`
}

const HeartIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
  </svg>`
}

const UserIcon = {
  template: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
  </svg>`
}

const LogoutIcon = {
  template: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
  </svg>`
}

const MenuIcon = {
  template: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
  </svg>`
}

const XIcon = {
  template: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
  </svg>`
}

// Store 实例
const route = useRoute()
const favoriteStore = useFavoriteStore()
const userStore = useUserStore()
const uiStore = useUIStore()

// 响应式数据
const mobileMenuOpen = ref(false)
const userMenuOpen = ref(false)

// 导航菜单配置 - 确保所有页面都显示
const navItems = [
  {
    name: 'search',
    path: '/',
    label: '颜色搜索',
    icon: SearchIcon
  },
  {
    name: 'extract',
    path: '/extract',
    label: '图片取色',
    icon: PhotoIcon
  },
  {
    name: 'wheel',
    path: '/wheel',
    label: '色环选色',
    icon: SwatchIcon
  },
  {
    name: 'favorites',
    path: '/favorites',
    label: '我的收藏',
    icon: HeartIcon
  }
]

// 方法
const isActiveRoute = (path) => {
  return route.path === path
}

const toggleMobileMenu = () => {
  mobileMenuOpen.value = !mobileMenuOpen.value
}

const closeMobileMenu = () => {
  mobileMenuOpen.value = false
}

const toggleUserMenu = () => {
  userMenuOpen.value = !userMenuOpen.value
}

const handleLogout = async () => {
  try {
    await userStore.logout()
    userMenuOpen.value = false
    uiStore.showSuccess('已成功退出登录')
  } catch (error) {
    uiStore.showError('退出登录失败')
  }
}

// 点击外部关闭菜单
const handleClickOutside = (event) => {
  if (!event.target.closest('.main-nav__user')) {
    userMenuOpen.value = false
  }
  if (!event.target.closest('.main-nav__menu') && !event.target.closest('.main-nav__mobile-toggle')) {
    mobileMenuOpen.value = false
  }
}

onMounted(() => {
  document.addEventListener('click', handleClickOutside)
})

onUnmounted(() => {
  document.removeEventListener('click', handleClickOutside)
})
</script>

<style lang="scss" scoped>
.main-nav {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid #e5e7eb;
  position: sticky;
  top: 0;
  z-index: 100;
  
  &__container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 4rem;
    
    @media (min-width: 1024px) {
      padding: 0 2rem;
    }
  }
  
  &__logo {
    flex-shrink: 0;
  }
  
  &__brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: inherit;
    transition: opacity 0.2s;
    
    &:hover {
      opacity: 0.8;
    }
  }
  
  &__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    background: linear-gradient(135deg, #3498db, #2c3e50);
    color: white;
    border-radius: 0.5rem;
  }
  
  &__text {
    display: flex;
    flex-direction: column;
    
    @media (max-width: 640px) {
      display: none;
    }
  }
  
  &__title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #2c3e50;
    margin: 0;
    line-height: 1.2;
  }
  
  &__subtitle {
    font-size: 0.75rem;
    color: #6b7280;
    margin: 0;
    line-height: 1;
  }
  
  &__menu {
    display: none;
    gap: 1rem;
    
    @media (min-width: 768px) {
      display: flex;
      gap: 2rem;
    }
    
    @media (max-width: 767px) {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border-bottom: 1px solid #e5e7eb;
      flex-direction: column;
      padding: 1rem;
      gap: 0;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      
      &--open {
        display: flex;
      }
    }
  }
  
  &__item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    text-decoration: none;
    color: #6b7280;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 0.2s;
    
    &:hover {
      color: #3498db;
      background: #f1f5f9;
    }
    
    &--active {
      color: #3498db;
      background: #dbeafe;
    }
    
    @media (max-width: 767px) {
      padding: 0.75rem 0;
      border-bottom: 1px solid #f3f4f6;
      border-radius: 0;
      
      &:last-child {
        border-bottom: none;
      }
    }
  }
  
  &__icon {
    width: 1.25rem;
    height: 1.25rem;
  }
  
  &__actions {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  &__favorites {
    position: relative;
  }
  
  &__favorites-link {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem;
    text-decoration: none;
    color: #e74c3c;
    border-radius: 0.5rem;
    transition: all 0.2s;
    
    &:hover {
      background: #fef2f2;
    }
  }
  
  &__favorites-count {
    background: #e74c3c;
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    padding: 0.125rem 0.375rem;
    border-radius: 9999px;
    min-width: 1.25rem;
    text-align: center;
  }
  
  &__user {
    position: relative;
  }
  
  &__user-button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 50%;
    color: #6b7280;
    transition: all 0.2s;
    
    &:hover {
      color: #3498db;
      background: #f1f5f9;
    }
  }
  
  &__user-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    min-width: 10rem;
    z-index: 50;
    overflow: hidden;
  }
  
  &__user-item {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0.75rem 1rem;
    text-decoration: none;
    color: #374151;
    background: none;
    border: none;
    cursor: pointer;
    transition: background 0.2s;
    
    &:hover {
      background: #f9fafb;
    }
  }
  
  &__login {
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;
    background: #3498db;
    color: white;
    text-decoration: none;
    border-radius: 0.5rem;
    font-weight: 500;
    transition: background 0.2s;
    
    &:hover {
      background: #2980b9;
    }
  }
  
  &__mobile-toggle {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    color: #6b7280;
    
    &:hover {
      color: #3498db;
    }
  }
}
</style>

=== FILE: src\components\search\FilterPanel.vue ===
<template>
  <div class="filter-panel">
    <div class="filter-panel__header">
      <h3 class="filter-panel__title">
        <FilterIcon class="w-5 h-5" />
        <span>筛选条件</span>
      </h3>
      <button 
        v-if="hasActiveFilters" 
        @click="clearAllFilters"
        class="filter-panel__clear"
      >
        <XIcon class="w-4 h-4" />
        <span>清除</span>
      </button>
    </div>
    
    <div class="filter-panel__content">
      <!-- 国风色彩筛选 -->
      <div class="filter-group">
        <h4 class="filter-group__title">特色筛选</h4>
        <div class="filter-options">
          <button
            @click="toggleGuofengFilter"
            :class="[
              'filter-option',
              { 'filter-option--active': colorStore.activeFilters.hasGuofeng }
            ]"
          >
            <span class="filter-option__icon">🎨</span>
            <span>国风色彩</span>
            <span class="filter-option__count">({{ colorStore.colorCount.withGuofeng }})</span>
          </button>
        </div>
      </div>
      
      <!-- 分类筛选 -->
      <div class="filter-group" v-if="colorStore.categories.length > 0">
        <h4 class="filter-group__title">颜色分类</h4>
        <div class="filter-options">
          <button
            v-for="category in colorStore.categories"
            :key="category"
            @click="toggleCategoryFilter(category)"
            :class="[
              'filter-option',
              { 'filter-option--active': colorStore.activeFilters.category === category }
            ]"
          >
            <span class="filter-option__color" :style="{ backgroundColor: getCategoryColor(category) }"></span>
            <span>{{ category }}</span>
          </button>
        </div>
      </div>
      
      <!-- 标签筛选 -->
      <div class="filter-group" v-if="displayTags.length > 0">
        <h4 class="filter-group__title">
          <span>标签筛选</span>
          <button 
            v-if="colorStore.allTags.length > maxDisplayTags"
            @click="showAllTags = !showAllTags"
            class="filter-group__toggle"
          >
            {{ showAllTags ? '收起' : `展开 (+${colorStore.allTags.length - maxDisplayTags})` }}
          </button>
        </h4>
        <div class="filter-options filter-options--tags">
          <button
            v-for="tag in displayTags"
            :key="tag"
            @click="toggleTagFilter(tag)"
            :class="[
              'filter-tag',
              { 'filter-tag--active': colorStore.activeFilters.tags.includes(tag) }
            ]"
          >
            {{ tag }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- 活动筛选器显示 -->
    <div v-if="hasActiveFilters" class="active-filters">
      <h4 class="active-filters__title">当前筛选</h4>
      <div class="active-filters__list">
        <!-- 国风筛选 -->
        <span v-if="colorStore.activeFilters.hasGuofeng" class="active-filter">
          <span>国风色彩</span>
          <button @click="toggleGuofengFilter" class="active-filter__remove">
            <XIcon class="w-3 h-3" />
          </button>
        </span>
        
        <!-- 分类筛选 -->
        <span v-if="colorStore.activeFilters.category" class="active-filter">
          <span>{{ colorStore.activeFilters.category }}</span>
          <button @click="toggleCategoryFilter(colorStore.activeFilters.category)" class="active-filter__remove">
            <XIcon class="w-3 h-3" />
          </button>
        </span>
        
        <!-- 标签筛选 -->
        <span 
          v-for="tag in colorStore.activeFilters.tags" 
          :key="tag" 
          class="active-filter"
        >
          <span>{{ tag }}</span>
          <button @click="toggleTagFilter(tag)" class="active-filter__remove">
            <XIcon class="w-3 h-3" />
          </button>
        </span>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useColorStore } from '@/stores/colorStore'

// 内联 SVG 图标
const FilterIcon = {
  template: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z" />
  </svg>`
}

const XIcon = {
  template: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
  </svg>`
}

const colorStore = useColorStore()

// 响应式数据
const showAllTags = ref(false)
const maxDisplayTags = 12

// 计算属性
const hasActiveFilters = computed(() => {
  return colorStore.activeFilters.hasGuofeng ||
         colorStore.activeFilters.category ||
         colorStore.activeFilters.tags.length > 0
})

const displayTags = computed(() => {
  if (showAllTags.value) {
    return colorStore.allTags
  }
  return colorStore.allTags.slice(0, maxDisplayTags)
})

// 方法
const toggleGuofengFilter = () => {
  console.log('切换国风筛选，当前状态:', colorStore.activeFilters.hasGuofeng)
  colorStore.setFilter('hasGuofeng', !colorStore.activeFilters.hasGuofeng)
}

const toggleCategoryFilter = (category) => {
  console.log('切换分类筛选:', category)
  colorStore.setFilter('category', category)
}

const toggleTagFilter = (tag) => {
  console.log('切换标签筛选:', tag)
  colorStore.setFilter('tags', tag)
}

const clearAllFilters = () => {
  console.log('清除所有筛选条件')
  colorStore.clearFilters()
}

// 获取分类对应的颜色
const getCategoryColor = (category) => {
  const categoryColors = {
    '红色系': '#ff4757',
    '橙色系': '#ff6348',
    '黄色系': '#ffa502',
    '绿色系': '#2ed573',
    '蓝色系': '#3742fa',
    '紫色系': '#8c7ae6',
    '粉色系': '#ff4081',
    '灰色系': '#747d8c',
    '黑白系': '#2f3542',
    '棕色系': '#8b4513'
  }
  return categoryColors[category] || '#6c757d'
}
</script>

<style lang="scss" scoped>
.filter-panel {
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 0.75rem;
  overflow: hidden;
  
  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid #e5e7eb;
    background: #f8fafc;
  }
  
  &__title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
    margin: 0;
  }
  
  &__clear {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    background: #fee2e2;
    color: #dc2626;
    border: none;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    
    &:hover {
      background: #fecaca;
    }
  }
  
  &__content {
    padding: 1rem;
  }
}

.filter-group {
  margin-bottom: 1.5rem;
  
  &:last-child {
    margin-bottom: 0;
  }
  
  &__title {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    margin: 0 0 0.75rem 0;
  }
  
  &__toggle {
    font-size: 0.75rem;
    color: #6b7280;
    background: none;
    border: none;
    cursor: pointer;
    
    &:hover {
      color: #3498db;
    }
  }
}

.filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  
  &--tags {
    gap: 0.375rem;
  }
}

.filter-option {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 0.5rem;
  color: #64748b;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
  }
  
  &--active {
    background: #dbeafe;
    border-color: #3498db;
    color: #1e40af;
  }
  
  &__icon {
    font-size: 1rem;
  }
  
  &__color {
    width: 0.75rem;
    height: 0.75rem;
    border-radius: 50%;
    border: 1px solid #e5e7eb;
  }
  
  &__count {
    font-size: 0.75rem;
    color: #9ca3af;
  }
}

.filter-tag {
  padding: 0.25rem 0.5rem;
  background: #f1f5f9;
  border: 1px solid #e2e8f0;
  border-radius: 0.375rem;
  color: #475569;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
  }
  
  &--active {
    background: #dbeafe;
    border-color: #3498db;
    color: #1e40af;
  }
}

.active-filters {
  border-top: 1px solid #e5e7eb;
  padding: 1rem;
  background: #f8fafc;
  
  &__title {
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    margin: 0 0 0.75rem 0;
  }
  
  &__list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
}

.active-filter {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.5rem;
  background: #3498db;
  color: white;
  border-radius: 0.375rem;
  font-size: 0.75rem;
  font-weight: 500;
  
  &__remove {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    border-radius: 50%;
    padding: 0.125rem;
    
    &:hover {
      background: rgba(255, 255, 255, 0.2);
    }
  }
}
</style>

=== FILE: src\components\search\SearchBar.vue ===
// ===== src/components/search/SearchBar.vue =====
<template>
  <div class="search-bar">
    <div class="search-bar__input-group">
      <div class="search-bar__input-wrapper">
        <MagnifyingGlassIcon class="search-bar__search-icon" />
        <input
          v-model="searchQuery"
          @input="handleSearch"
          type="text"
          placeholder="搜索颜色名称、HEX值、RGB值..."
          class="search-bar__input"
        />
        <button
          v-if="searchQuery"
          @click="clearSearch"
          class="search-bar__clear"
        >
          <XMarkIcon class="w-4 h-4" />
        </button>
      </div>
      
      <!-- 快速搜索建议 -->
      <div v-if="showSuggestions && suggestions.length > 0" class="search-bar__suggestions">
        <button
          v-for="suggestion in suggestions"
          :key="suggestion"
          @click="selectSuggestion(suggestion)"
          class="search-bar__suggestion"
        >
          {{ suggestion }}
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, watch } from 'vue'
import { useColorStore } from '@stores/colorStore'
import { MagnifyingGlassIcon, XMarkIcon } from '@heroicons/vue/24/outline'
import { debounce } from 'lodash-es'

const colorStore = useColorStore()

const searchQuery = ref('')
const showSuggestions = ref(false)

// 搜索建议
const suggestions = computed(() => {
  if (!searchQuery.value || searchQuery.value.length < 2) return []
  
  const query = searchQuery.value.toLowerCase()
  const allSuggestions = [
    ...colorStore.colors.map(c => c.chinese),
    ...colorStore.colors.map(c => c.english),
    ...colorStore.categories,
    ...colorStore.allTags
  ]
  
  return allSuggestions
    .filter(item => item.toLowerCase().includes(query))
    .slice(0, 6)
})

// 防抖搜索
const debouncedSearch = debounce((query) => {
  colorStore.setSearchQuery(query)
}, 300)

const handleSearch = () => {
  debouncedSearch(searchQuery.value)
  showSuggestions.value = searchQuery.value.length >= 2
}

const clearSearch = () => {
  searchQuery.value = ''
  colorStore.setSearchQuery('')
  showSuggestions.value = false
}

const selectSuggestion = (suggestion) => {
  searchQuery.value = suggestion
  colorStore.setSearchQuery(suggestion)
  showSuggestions.value = false
}

// 点击外部关闭建议
const handleClickOutside = (event) => {
  if (!event.target.closest('.search-bar')) {
    showSuggestions.value = false
  }
}

document.addEventListener('click', handleClickOutside)
</script>

<style lang="scss" scoped>
.search-bar {
  position: relative;
  max-width: 600px;
  margin: 0 auto 2rem;
  
  &__input-group {
    position: relative;
  }
  
  &__input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }
  
  &__search-icon {
    position: absolute;
    left: 1rem;
    width: 1.25rem;
    height: 1.25rem;
    color: #9ca3af;
    z-index: 1;
  }
  
  &__input {
    width: 100%;
    padding: 1rem 3rem 1rem 3rem;
    border: 2px solid #e5e7eb;
    border-radius: 1rem;
    font-size: 1rem;
    transition: all 0.2s;
    background: white;
    
    &:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }
    
    &::placeholder {
      color: #9ca3af;
    }
  }
  
  &__clear {
    position: absolute;
    right: 1rem;
    background: #f3f4f6;
    border: none;
    border-radius: 50%;
    width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    
    &:hover {
      background: #e5e7eb;
    }
  }
  
  &__suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    z-index: 50;
    max-height: 200px;
    overflow-y: auto;
  }
  
  &__suggestion {
    display: block;
    width: 100%;
    padding: 0.75rem 1rem;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
      background: #f9fafb;
    }
    
    &:first-child {
      border-radius: 0.5rem 0.5rem 0 0;
    }
    
    &:last-child {
      border-radius: 0 0 0.5rem 0.5rem;
    }
  }
}
</style>

=== FILE: src\components\search\SortControls.vue ===
<template>
  <div class="sort-controls">
    <div class="sort-controls__label">
      <SortIcon class="w-4 h-4" />
      <span>排序</span>
    </div>
    
    <div class="sort-controls__options">
      <!-- 排序字段选择 -->
      <select 
        :value="colorStore.sortBy" 
        @change="handleSortFieldChange"
        class="sort-controls__select"
      >
        <option value="name">按名称</option>
        <option value="hue">按色相</option>
        <option value="brightness">按明度</option>
        <option value="saturation">按饱和度</option>
        <option value="lightness">按亮度</option>
        <option value="grayscale">按灰度</option>
        <option value="category">按分类</option>
      </select>
      
      <!-- 排序方向按钮 -->
      <button 
        @click="toggleSortDirection"
        class="sort-controls__direction"
        :title="sortDirectionText"
      >
        <AscIcon v-if="colorStore.sortOrder === 'asc'" class="w-4 h-4" />
        <DescIcon v-else class="w-4 h-4" />
      </button>
    </div>
    
    <!-- 排序状态显示（调试用） -->
    <div v-if="showDebugInfo" class="sort-debug">
      <small>{{ `${colorStore.sortBy}_${colorStore.sortOrder}` }}</small>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { useColorStore } from '@/stores/colorStore'

// 内联 SVG 图标
const SortIcon = {
  template: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4" />
  </svg>`
}

const AscIcon = {
  template: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
  </svg>`
}

const DescIcon = {
  template: `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l-4 4m0 0l4-4m-4 4V8" />
  </svg>`
}

const props = defineProps({
  showDebugInfo: {
    type: Boolean,
    default: false
  }
})

const colorStore = useColorStore()

// 计算属性
const sortDirectionText = computed(() => {
  return colorStore.sortOrder === 'asc' ? '升序排列' : '降序排列'
})

// 方法
const handleSortFieldChange = (event) => {
  const newField = event.target.value
  console.log('排序字段改变:', newField)
  colorStore.setSorting(newField, colorStore.sortOrder)
}

const toggleSortDirection = () => {
  console.log('切换排序方向')
  colorStore.toggleSortOrder()
}
</script>

<style lang="scss" scoped>
.sort-controls {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  
  @media (max-width: 640px) {
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  &__label {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    white-space: nowrap;
  }
  
  &__options {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  &__select {
    padding: 0.375rem 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    background: white;
    font-size: 0.875rem;
    color: #374151;
    cursor: pointer;
    transition: all 0.2s;
    min-width: 120px;
    
    &:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }
    
    &:hover {
      border-color: #9ca3af;
    }
  }
  
  &__direction {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    background: white;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s;
    
    &:hover {
      border-color: #3498db;
      color: #3498db;
      background: #f8fafc;
    }
    
    &:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }
    
    &:active {
      transform: scale(0.95);
    }
  }
}

.sort-debug {
  font-size: 0.75rem;
  color: #9ca3af;
  background: #f3f4f6;
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
}
</style>

=== FILE: src\router\index.js ===
// ===== src/router/index.js =====
import { createRouter, createWebHistory } from 'vue-router'
import { useUserStore } from '../stores/userStore'

// 懒加载页面组件
const SearchView = () => import('../views/SearchView.vue')
const ColorExtractView = () => import('../views/ColorExtractView.vue')
const ColorWheelView = () => import('../views/ColorWheelView.vue')
const FavoritesView = () => import('../views/FavoritesView.vue')
const ProfileView = () => import('../views/ProfileView.vue')
const LoginView = () => import('../views/LoginView.vue')

const routes = [
  {
    path: '/',
    name: 'Search',
    component: SearchView,
    meta: {
      title: '颜色搜索',
      description: '智能搜索和筛选颜色',
      transition: 'fade'
    }
  },
  {
    path: '/extract',
    name: 'ColorExtract',
    component: ColorExtractView,
    meta: {
      title: '图片取色',
      description: '从图片中提取颜色',
      transition: 'slide'
    }
  },
  {
    path: '/wheel',
    name: 'ColorWheel',
    component: ColorWheelView,
    meta: {
      title: '色环选色',
      description: '使用色环选择颜色',
      transition: 'slide'
    }
  },
  {
    path: '/favorites',
    name: 'Favorites',
    component: FavoritesView,
    meta: {
      title: '我的收藏',
      description: '管理收藏的颜色和配色方案',
      requiresAuth: true,
      transition: 'slide'
    }
  },
  {
    path: '/profile',
    name: 'Profile',
    component: ProfileView,
    meta: {
      title: '个人中心',
      description: '个人设置和偏好',
      requiresAuth: true,
      transition: 'fade'
    }
  },
  {
    path: '/login',
    name: 'Login',
    component: LoginView,
    meta: {
      title: '用户登录',
      description: '登录到颜色管理系统'
    }
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: '/'
  }
]

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes,
  scrollBehavior(to, from, savedPosition) {
    if (savedPosition) {
      return savedPosition
    } else {
      return { top: 0 }
    }
  }
})

// 路由守卫
router.beforeEach((to, from, next) => {
  // 设置页面标题
  if (to.meta.title) {
    document.title = `${to.meta.title} - 时装设计师颜色管理系统`
  }
  
  // 检查认证
  if (to.meta.requiresAuth) {
    const userStore = useUserStore()
    if (!userStore.isAuthenticated) {
      next('/login')
      return
    }
  }
  
  next()
})

export default router

=== FILE: src\stores\colorStore.js ===
// src/stores/colorStore.js
import { defineStore } from 'pinia'
import { ref, computed, readonly, watch } from 'vue'

export const useColorStore = defineStore('color', () => {
  // ===== 状态 =====
  const colors = ref([])
  const isLoading = ref(false)
  const error = ref(null)
  const searchQuery = ref('')
  const activeFilters = ref({
    category: '',
    tags: [],
    hasGuofeng: false
  })
  
  // 排序状态
  const sortBy = ref('name')
  const sortOrder = ref('asc')
  
  // ===== 计算属性 =====
  const categories = computed(() => {
    const cats = new Set()
    colors.value.forEach(color => {
      if (color.category) cats.add(color.category)
    })
    return Array.from(cats).sort()
  })
  
  const allTags = computed(() => {
    const tags = new Set()
    colors.value.forEach(color => {
      if (color.tags && Array.isArray(color.tags)) {
        color.tags.forEach(tag => tags.add(tag))
      }
    })
    return Array.from(tags).sort()
  })
  
  const colorCount = computed(() => ({
    total: colors.value.length,
    withGuofeng: colors.value.filter(c => c.guofeng && c.guofeng !== 'null' && c.guofeng !== null && c.guofeng.trim() !== '').length
  }))
  
  // 核心筛选和排序逻辑
  const filteredColors = computed(() => {
    console.log('重新计算筛选颜色，原始数量:', colors.value.length)
    console.log('搜索关键词:', searchQuery.value)
    console.log('活动筛选器:', activeFilters.value)
    console.log('排序方式:', sortBy.value, sortOrder.value)
    
    let result = [...colors.value] // 创建副本
    
    // 1. 搜索筛选
    if (searchQuery.value && searchQuery.value.trim()) {
      const query = searchQuery.value.toLowerCase().trim()
      result = result.filter(color => {
        const matchChinese = color.chinese && color.chinese.toLowerCase().includes(query)
        const matchEnglish = color.english && color.english.toLowerCase().includes(query)
        const matchHex = color.hex && color.hex.toLowerCase().includes(query)
        const matchGuofeng = color.guofeng && color.guofeng !== 'null' && color.guofeng.toLowerCase().includes(query)
        
        return matchChinese || matchEnglish || matchHex || matchGuofeng
      })
      console.log('搜索后颜色数量:', result.length)
    }
    
    // 2. 分类筛选
    if (activeFilters.value.category) {
      result = result.filter(color => color.category === activeFilters.value.category)
      console.log('分类筛选后颜色数量:', result.length)
    }
    
    // 3. 标签筛选
    if (activeFilters.value.tags.length > 0) {
      result = result.filter(color => {
        if (!color.tags || !Array.isArray(color.tags)) return false
        return activeFilters.value.tags.some(tag => color.tags.includes(tag))
      })
      console.log('标签筛选后颜色数量:', result.length)
    }
    
    // 4. 国风筛选 - 修复逻辑
    if (activeFilters.value.hasGuofeng) {
      result = result.filter(color => {
        const hasValidGuofeng = color.guofeng && 
                              color.guofeng !== 'null' && 
                              color.guofeng !== null && 
                              color.guofeng.trim() !== ''
        return hasValidGuofeng
      })
      console.log('国风筛选后颜色数量:', result.length)
    }
    
    // 5. 排序
    const sorted = applySorting(result, sortBy.value, sortOrder.value)
    console.log('最终结果数量:', sorted.length)
    
    return sorted
  })
  
  // ===== 数据加载 =====
  const loadColors = async () => {
    if (colors.value.length > 0) {
      console.log('颜色数据已存在，跳过加载')
      return
    }
    
    isLoading.value = true
    error.value = null
    
    try {
      console.log('开始加载颜色数据...')
      const response = await fetch('/colors.json')
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}: 无法加载颜色数据`)
      }
      
      const data = await response.json()
      console.log('原始数据:', data)
      
      // 处理数据结构
      let colorArray = []
      if (data && data.colors && Array.isArray(data.colors)) {
        colorArray = data.colors
      } else if (Array.isArray(data)) {
        colorArray = data
      } else {
        throw new Error('颜色数据格式不正确')
      }
      
      // 增强颜色数据
      colors.value = colorArray.map(enhanceColorData)
      console.log(`成功加载 ${colors.value.length} 个颜色`)
      
      // 验证国风色彩数量
      const guofengCount = colors.value.filter(c => c.guofeng && c.guofeng !== 'null' && c.guofeng.trim() !== '').length
      console.log(`其中国风色彩 ${guofengCount} 个`)
      
    } catch (err) {
      error.value = err.message
      console.error('颜色数据加载失败:', err)
    } finally {
      isLoading.value = false
    }
  }
  
  // ===== 搜索方法 =====
  const setSearchQuery = (query) => {
    console.log('设置搜索关键词:', query)
    searchQuery.value = query || ''
  }
  
  // ===== 筛选方法 =====
  const setFilter = (filterType, value) => {
    console.log('设置筛选:', filterType, value)
    
    switch (filterType) {
      case 'category':
        // 点击相同分类则取消选择
        activeFilters.value.category = activeFilters.value.category === value ? '' : value
        break
        
      case 'hasGuofeng':
        activeFilters.value.hasGuofeng = Boolean(value)
        break
        
      case 'tags':
        const tagIndex = activeFilters.value.tags.indexOf(value)
        if (tagIndex > -1) {
          // 移除标签
          activeFilters.value.tags.splice(tagIndex, 1)
        } else {
          // 添加标签
          activeFilters.value.tags.push(value)
        }
        break
        
      default:
        console.warn('未知的筛选类型:', filterType)
    }
    
    console.log('筛选器更新后:', activeFilters.value)
  }
  
  const clearFilters = () => {
    activeFilters.value = {
      category: '',
      tags: [],
      hasGuofeng: false
    }
    searchQuery.value = ''
    console.log('已清除所有筛选条件')
  }
  
  // ===== 排序方法 =====
  const setSorting = (field, order = 'asc') => {
    console.log('设置排序:', field, order)
    sortBy.value = field
    sortOrder.value = order
  }
  
  const toggleSortOrder = () => {
    const newOrder = sortOrder.value === 'asc' ? 'desc' : 'asc'
    setSorting(sortBy.value, newOrder)
  }
  
  // ===== 其他工具方法 =====
  const getSimilarColors = (targetColor, limit = 6, threshold = 0.6) => {
    if (!targetColor || !targetColor.hex) {
      console.warn('目标颜色无效')
      return []
    }
    
    const targetHSL = targetColor.hsl || hexToHSL(targetColor.hex)
    
    return colors.value
      .filter(color => color.hex !== targetColor.hex)
      .map(color => {
        const colorHSL = color.hsl || hexToHSL(color.hex)
        const similarity = calculateColorSimilarity(targetHSL, colorHSL)
        return { ...color, similarity }
      })
      .filter(color => color.similarity >= threshold * 100)
      .sort((a, b) => b.similarity - a.similarity)
      .slice(0, limit)
  }
  
  const generateColorScheme = (baseColor, type = 'complementary') => {
    if (!baseColor || !baseColor.hex) {
      console.warn('基础颜色无效')
      return []
    }
    
    const baseHSL = baseColor.hsl || hexToHSL(baseColor.hex)
    const schemes = {
      complementary: [
        { ...baseHSL, h: (baseHSL.h + 180) % 360 }
      ],
      triadic: [
        { ...baseHSL, h: (baseHSL.h + 120) % 360 },
        { ...baseHSL, h: (baseHSL.h + 240) % 360 }
      ],
      analogous: [
        { ...baseHSL, h: (baseHSL.h + 30) % 360 },
        { ...baseHSL, h: (baseHSL.h - 30 + 360) % 360 }
      ],
      monochromatic: [
        { ...baseHSL, l: Math.min(100, baseHSL.l + 20) },
        { ...baseHSL, l: Math.max(0, baseHSL.l - 20) },
        { ...baseHSL, s: Math.min(100, baseHSL.s + 20) }
      ],
      tetradic: [
        { ...baseHSL, h: (baseHSL.h + 90) % 360 },
        { ...baseHSL, h: (baseHSL.h + 180) % 360 },
        { ...baseHSL, h: (baseHSL.h + 270) % 360 }
      ],
      splitComplementary: [
        { ...baseHSL, h: (baseHSL.h + 150) % 360 },
        { ...baseHSL, h: (baseHSL.h + 210) % 360 }
      ]
    }
    
    const schemeColors = schemes[type] || []
    return schemeColors.map(hsl => ({
      hex: hslToHex(hsl.h, hsl.s, hsl.l),
      hsl,
      role: `${type}_color`
    }))
  }
  
  // ===== 返回接口 =====
  return {
    // 只读状态
    colors: readonly(colors),
    isLoading: readonly(isLoading),
    error: readonly(error),
    searchQuery: readonly(searchQuery),
    activeFilters: readonly(activeFilters),
    sortBy: readonly(sortBy),
    sortOrder: readonly(sortOrder),
    
    // 计算属性
    filteredColors,
    categories,
    allTags,
    colorCount,
    
    // 方法
    loadColors,
    setSearchQuery,
    setFilter,
    clearFilters,
    setSorting,
    toggleSortOrder,
    getSimilarColors,
    generateColorScheme
  }
})

// ===== 辅助函数 =====

// 增强颜色数据
function enhanceColorData(color) {
  const hsl = rgbToHSL(color.rgb.r, color.rgb.g, color.rgb.b)
  const brightness = calculateBrightness(color.rgb.r, color.rgb.g, color.rgb.b)
  const contrast = getContrastColor(color.hex)
  const saturation = hsl.s
  const lightness = hsl.l
  const grayscale = calculateGrayscale(color.rgb.r, color.rgb.g, color.rgb.b)
  
  return {
    ...color,
    hsl,
    brightness,
    contrast,
    saturation,
    lightness,
    grayscale
  }
}

// 应用排序
function applySorting(colors, field, order) {
  console.log('应用排序:', field, order, '颜色数量:', colors.length)
  
  return [...colors].sort((a, b) => {
    let aValue, bValue
    
    switch (field) {
      case 'name':
        aValue = a.chinese || a.english || ''
        bValue = b.chinese || b.english || ''
        const nameCompare = aValue.localeCompare(bValue, 'zh-CN')
        return order === 'asc' ? nameCompare : -nameCompare
      
      case 'hue': // 色相 (0-360)
        aValue = a.hsl?.h || 0
        bValue = b.hsl?.h || 0
        break
        
      case 'brightness': // 明度/亮度 
      case 'value':
        aValue = a.brightness || 0
        bValue = b.brightness || 0
        break
        
      case 'saturation': // 饱和度/纯度 (0-100)
      case 'chroma':
        aValue = a.hsl?.s || 0
        bValue = b.hsl?.s || 0
        break
        
      case 'lightness': // 明度 HSL (0-100)
        aValue = a.hsl?.l || 0
        bValue = b.hsl?.l || 0
        break
        
      case 'grayscale': // 灰度值
        aValue = a.grayscale || 0
        bValue = b.grayscale || 0
        break
        
      case 'category': // 分类
        aValue = a.category || ''
        bValue = b.category || ''
        const categoryCompare = aValue.localeCompare(bValue, 'zh-CN')
        return order === 'asc' ? categoryCompare : -categoryCompare
        
      default:
        console.warn('未知排序字段:', field)
        return 0
    }
    
    // 数值比较
    if (order === 'asc') {
      return aValue - bValue
    } else {
      return bValue - aValue
    }
  })
}

// RGB 转 HSL
function rgbToHSL(r, g, b) {
  r /= 255
  g /= 255
  b /= 255
  
  const max = Math.max(r, g, b)
  const min = Math.min(r, g, b)
  let h, s, l = (max + min) / 2
  
  if (max === min) {
    h = s = 0 // 灰色
  } else {
    const d = max - min
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min)
    
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break
      case g: h = (b - r) / d + 2; break
      case b: h = (r - g) / d + 4; break
    }
    h /= 6
  }
  
  return {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    l: Math.round(l * 100)
  }
}

// HEX 转 HSL
function hexToHSL(hex) {
  const r = parseInt(hex.slice(1, 3), 16)
  const g = parseInt(hex.slice(3, 5), 16)
  const b = parseInt(hex.slice(5, 7), 16)
  return rgbToHSL(r, g, b)
}

// HSL 转 HEX
function hslToHex(h, s, l) {
  s /= 100
  l /= 100
  
  const c = (1 - Math.abs(2 * l - 1)) * s
  const x = c * (1 - Math.abs((h / 60) % 2 - 1))
  const m = l - c / 2
  let r = 0, g = 0, b = 0
  
  if (0 <= h && h < 60) {
    r = c; g = x; b = 0
  } else if (60 <= h && h < 120) {
    r = x; g = c; b = 0
  } else if (120 <= h && h < 180) {
    r = 0; g = c; b = x
  } else if (180 <= h && h < 240) {
    r = 0; g = x; b = c
  } else if (240 <= h && h < 300) {
    r = x; g = 0; b = c
  } else if (300 <= h && h < 360) {
    r = c; g = 0; b = x
  }
  
  r = Math.round((r + m) * 255)
  g = Math.round((g + m) * 255)
  b = Math.round((b + m) * 255)
  
  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`
}

// 计算亮度
function calculateBrightness(r, g, b) {
  return Math.round((r * 299 + g * 587 + b * 114) / 1000)
}

// 计算灰度
function calculateGrayscale(r, g, b) {
  return Math.round(0.299 * r + 0.587 * g + 0.114 * b)
}

// 获取对比色
function getContrastColor(hex) {
  const r = parseInt(hex.slice(1, 3), 16)
  const g = parseInt(hex.slice(3, 5), 16)
  const b = parseInt(hex.slice(5, 7), 16)
  const brightness = calculateBrightness(r, g, b)
  return brightness > 128 ? '#000000' : '#ffffff'
}

// 计算颜色相似度
function calculateColorSimilarity(hsl1, hsl2) {
  const hDiff = Math.min(Math.abs(hsl1.h - hsl2.h), 360 - Math.abs(hsl1.h - hsl2.h))
  const sDiff = Math.abs(hsl1.s - hsl2.s)
  const lDiff = Math.abs(hsl1.l - hsl2.l)
  
  const similarity = 100 - (hDiff / 180 * 50 + sDiff / 100 * 25 + lDiff / 100 * 25)
  return Math.max(0, similarity)
}

=== FILE: src\stores\favoriteStore.js ===
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useFavoriteStore = defineStore('favorite', () => {
  const favorites = ref([])
  
  const favoriteColors = computed(() => favorites.value || [])
  
  const isFavorite = (hex) => {
    return (favorites.value || []).some(color => color.hex === hex)
  }
  
  const toggleFavorite = (color) => {
    if (!favorites.value) {
      favorites.value = []
    }
    
    const index = favorites.value.findIndex(fav => fav.hex === color.hex)
    if (index > -1) {
      favorites.value.splice(index, 1)
    } else {
      favorites.value.push({
        ...color,
        addedAt: new Date().toISOString()
      })
    }
    
    // 保存到本地存储
    saveFavoritesToStorage()
  }
  
  const initializeFavorites = () => {
    try {
      const stored = localStorage.getItem('fashion-color-favorites')
      if (stored) {
        favorites.value = JSON.parse(stored)
      } else {
        favorites.value = []
      }
    } catch (error) {
      console.error('收藏数据加载失败:', error)
      favorites.value = []
    }
  }
  
  const saveFavoritesToStorage = () => {
    try {
      localStorage.setItem('fashion-color-favorites', JSON.stringify(favorites.value))
    } catch (error) {
      console.error('收藏数据保存失败:', error)
    }
  }
  
  const clearAllFavorites = () => {
    favorites.value = []
    saveFavoritesToStorage()
  }
  
  return {
    favorites,
    favoriteColors,
    isFavorite,
    toggleFavorite,
    initializeFavorites,
    clearAllFavorites
  }
})

=== FILE: src\stores\index.js ===
// ===== src/stores/index.js =====
import { createPinia } from 'pinia'

const pinia = createPinia()

// 开发环境下添加调试功能
if (import.meta.env.DEV) {
  pinia.use(({ store }) => {
    store.$subscribe((mutation, state) => {
      console.log(`🔄 Store "${store.$id}" changed:`, mutation.type, state)
    })
  })
}

export default pinia

=== FILE: src\stores\uiStore.js ===
// src/stores/uiStore.js
import { defineStore } from 'pinia'
import { ref, reactive } from 'vue'

export const useUIStore = defineStore('ui', () => {
  // 加载状态
  const isLoading = ref(false)
  const loadingText = ref('')
  
  // 消息提示状态
  const messages = ref([])
  const nextMessageId = ref(1)
  
  // 模态框状态
  const modals = reactive({
    colorDetail: {
      visible: false,
      color: null
    },
    createScheme: {
      visible: false,
      colors: []
    }
  })
  
  // 通用设置
  const theme = ref('light')
  const sidebarCollapsed = ref(false)
  
  // 加载控制
  const setLoading = (loading, text = '') => {
    isLoading.value = loading
    loadingText.value = text
  }
  
  const showLoading = (text = '加载中...') => {
    setLoading(true, text)
  }
  
  const hideLoading = () => {
    setLoading(false, '')
  }
  
  // 消息提示（Toast）
  const showMessage = (title, type = 'info', message = '', options = {}) => {
    const toast = {
      id: nextMessageId.value++,
      title,
      message,
      type,
      duration: options.duration ?? 4000,
      closable: options.closable ?? true,
      actions: options.actions ?? [],
      timestamp: new Date().toISOString()
    }
    
    messages.value.push(toast)
    
    // 自动移除消息
    if (toast.duration > 0) {
      setTimeout(() => {
        removeMessage(toast.id)
      }, toast.duration)
    }
    
    return toast.id
  }
  
  // 快捷方法
  const showToast = (title, type = 'info', options = {}) => {
    return showMessage(title, type, '', options)
  }
  
  const showSuccess = (title, options = {}) => {
    return showMessage(title, 'success', '', options)
  }
  
  const showError = (title, options = {}) => {
    return showMessage(title, 'error', '', options)
  }
  
  const showWarning = (title, options = {}) => {
    return showMessage(title, 'warning', '', options)
  }
  
  const showInfo = (title, options = {}) => {
    return showMessage(title, 'info', '', options)
  }
  
  const removeMessage = (id) => {
    const index = messages.value.findIndex(msg => msg.id === id)
    if (index > -1) {
      messages.value.splice(index, 1)
    }
  }
  
  const clearMessages = () => {
    messages.value.length = 0
  }
  
  // 模态框控制
  const showModal = (modalName, data = {}) => {
    if (modals[modalName]) {
      modals[modalName].visible = true
      Object.assign(modals[modalName], data)
    }
  }
  
  const hideModal = (modalName) => {
    if (modals[modalName]) {
      modals[modalName].visible = false
    }
  }
  
  const showColorDetail = (color) => {
    modals.colorDetail.color = color
    modals.colorDetail.visible = true
  }
  
  const hideColorDetail = () => {
    modals.colorDetail.visible = false
    modals.colorDetail.color = null
  }
  
  const showCreateScheme = (colors = []) => {
    modals.createScheme.colors = colors
    modals.createScheme.visible = true
  }
  
  const hideCreateScheme = () => {
    modals.createScheme.visible = false
    modals.createScheme.colors = []
  }
  
  // 主题控制
  const setTheme = (newTheme) => {
    theme.value = newTheme
    document.documentElement.classList.toggle('dark', newTheme === 'dark')
    localStorage.setItem('theme', newTheme)
  }
  
  const toggleTheme = () => {
    setTheme(theme.value === 'light' ? 'dark' : 'light')
  }
  
  // 侧边栏控制
  const toggleSidebar = () => {
    sidebarCollapsed.value = !sidebarCollapsed.value
    localStorage.setItem('sidebarCollapsed', sidebarCollapsed.value.toString())
  }
  
  const setSidebarCollapsed = (collapsed) => {
    sidebarCollapsed.value = collapsed
    localStorage.setItem('sidebarCollapsed', collapsed.toString())
  }
  
  // 初始化
  const initializeUI = () => {
    // 恢复主题设置
    const savedTheme = localStorage.getItem('theme')
    if (savedTheme) {
      setTheme(savedTheme)
    }
    
    // 恢复侧边栏状态
    const savedSidebarState = localStorage.getItem('sidebarCollapsed')
    if (savedSidebarState) {
      sidebarCollapsed.value = savedSidebarState === 'true'
    }
  }
  
  // 清理
  const cleanupMessages = () => {
    // 清理过期消息
    const now = Date.now()
    messages.value = messages.value.filter(msg => {
      const messageTime = new Date(msg.timestamp).getTime()
      return now - messageTime < 60000 // 保留1分钟内的消息
    })
  }
  
  return {
    // 状态
    isLoading,
    loadingText,
    messages,
    modals,
    theme,
    sidebarCollapsed,
    
    // 加载控制
    setLoading,
    showLoading,
    hideLoading,
    
    // 消息提示
    showMessage,
    showToast,
    showSuccess,
    showError,
    showWarning,
    showInfo,
    removeMessage,
    clearMessages,
    
    // 模态框控制
    showModal,
    hideModal,
    showColorDetail,
    hideColorDetail,
    showCreateScheme,
    hideCreateScheme,
    
    // 主题控制
    setTheme,
    toggleTheme,
    
    // 侧边栏控制
    toggleSidebar,
    setSidebarCollapsed,
    
    // 初始化
    initializeUI,
    
    // 清理
    cleanupMessages
  }
})

=== FILE: src\stores\userStore.js ===
// src/stores/userStore.js - 增强的用户认证系统
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useUserStore = defineStore('user', () => {
  const currentUser = ref(null)
  const isAuthenticated = ref(false)
  const preferences = ref({})
  const loginHistory = ref([])
  const rememberMe = ref(false)
  
  const user = computed(() => currentUser.value)
  
  const login = async (credentials) => {
    try {
      // 模拟登录验证
      const validUsers = {
        'designer': { 
          password: 'fashion123', 
          name: '时装设计师', 
          role: 'designer',
          avatar: null,
          permissions: ['read', 'create', 'update']
        },
        'admin': { 
          password: 'admin123', 
          name: '系统管理员', 
          role: 'admin',
          avatar: null,
          permissions: ['read', 'create', 'update', 'delete', 'admin']
        }
      }
      
      const userInfo = validUsers[credentials.username]
      if (userInfo && userInfo.password === credentials.password) {
        const loginTime = new Date().toISOString()
        
        currentUser.value = {
          id: credentials.username,
          username: credentials.username,
          name: userInfo.name,
          role: userInfo.role,
          avatar: userInfo.avatar,
          permissions: userInfo.permissions,
          email: `${credentials.username}@fashioncolor.com`,
          loginTime,
          lastActive: loginTime
        }
        
        isAuthenticated.value = true
        rememberMe.value = credentials.rememberMe || false
        
        // 记录登录历史
        loginHistory.value.unshift({
          timestamp: loginTime,
          ip: '192.168.1.1', // 模拟IP
          device: navigator.userAgent,
          success: true
        })
        
        // 保存到本地存储 - 根据记住我选项决定存储时长
        saveUserSession()
        
        // 加载用户偏好设置
        loadUserPreferences()
        
        return { success: true, user: currentUser.value }
      } else {
        // 记录失败登录
        loginHistory.value.unshift({
          timestamp: new Date().toISOString(),
          ip: '192.168.1.1',
          device: navigator.userAgent,
          success: false,
          username: credentials.username
        })
        throw new Error('用户名或密码错误')
      }
    } catch (error) {
      return { success: false, error: error.message }
    }
  }
  
  const logout = () => {
    currentUser.value = null
    isAuthenticated.value = false
    rememberMe.value = false
    preferences.value = {}
    
    // 清除所有存储的会话数据
    localStorage.removeItem('fashion-color-user-session')
    sessionStorage.removeItem('fashion-color-user-session')
  }
  
  const saveUserSession = () => {
    const sessionData = {
      user: currentUser.value,
      isAuthenticated: isAuthenticated.value,
      preferences: preferences.value,
      timestamp: new Date().toISOString()
    }
    
    const storage = rememberMe.value ? localStorage : sessionStorage
    storage.setItem('fashion-color-user-session', JSON.stringify(sessionData))
  }
  
  const restoreUserSession = () => {
    try {
      // 优先检查 localStorage，然后检查 sessionStorage
      let stored = localStorage.getItem('fashion-color-user-session')
      let isFromLocalStorage = true
      
      if (!stored) {
        stored = sessionStorage.getItem('fashion-color-user-session')
        isFromLocalStorage = false
      }
      
      if (stored) {
        const sessionData = JSON.parse(stored)
        
        // 检查会话是否过期
        const sessionAge = Date.now() - new Date(sessionData.timestamp).getTime()
        const maxAge = isFromLocalStorage ? 
          30 * 24 * 60 * 60 * 1000 : // localStorage: 30天
          24 * 60 * 60 * 1000 // sessionStorage: 24小时
        
        if (sessionAge < maxAge && sessionData.user) {
          currentUser.value = sessionData.user
          isAuthenticated.value = sessionData.isAuthenticated
          preferences.value = sessionData.preferences || {}
          rememberMe.value = isFromLocalStorage
          
          // 更新最后活跃时间
          if (currentUser.value) {
            currentUser.value.lastActive = new Date().toISOString()
            saveUserSession()
          }
          
          return true
        } else {
          // 会话过期，清除数据
          localStorage.removeItem('fashion-color-user-session')
          sessionStorage.removeItem('fashion-color-user-session')
        }
      }
    } catch (error) {
      console.error('恢复用户会话失败:', error)
      localStorage.removeItem('fashion-color-user-session')
      sessionStorage.removeItem('fashion-color-user-session')
    }
    return false
  }
  
  const updateProfile = (updates) => {
    if (currentUser.value) {
      currentUser.value = { 
        ...currentUser.value, 
        ...updates,
        lastActive: new Date().toISOString()
      }
      saveUserSession()
    }
  }
  
  const setPreference = (key, value) => {
    preferences.value[key] = value
    saveUserSession()
    
    // 同时保存到单独的偏好设置存储中
    const prefKey = 'fashion-color-preferences'
    const storage = rememberMe.value ? localStorage : sessionStorage
    storage.setItem(prefKey, JSON.stringify(preferences.value))
  }
  
  const getPreference = (key, defaultValue = null) => {
    return preferences.value[key] ?? defaultValue
  }
  
  const loadUserPreferences = () => {
    try {
      const prefKey = 'fashion-color-preferences'
      let stored = localStorage.getItem(prefKey)
      if (!stored) {
        stored = sessionStorage.getItem(prefKey)
      }
      
      if (stored) {
        preferences.value = { ...preferences.value, ...JSON.parse(stored) }
      }
    } catch (error) {
      console.error('加载用户偏好失败:', error)
    }
  }
  
  const hasPermission = (permission) => {
    return currentUser.value?.permissions?.includes(permission) || false
  }
  
  const updateLastActive = () => {
    if (currentUser.value) {
      currentUser.value.lastActive = new Date().toISOString()
      saveUserSession()
    }
  }
  
  // 自动更新活跃时间
  setInterval(() => {
    if (isAuthenticated.value) {
      updateLastActive()
    }
  }, 5 * 60 * 1000) // 每5分钟更新一次
  
  return {
    currentUser,
    isAuthenticated,
    user,
    preferences,
    loginHistory,
    rememberMe,
    login,
    logout,
    saveUserSession,
    restoreUserSession,
    updateProfile,
    setPreference,
    getPreference,
    loadUserPreferences,
    hasPermission,
    updateLastActive
  }
})

=== FILE: src\styles\base.scss ===
/* ===== src/styles/base.scss ===== */
// 重置样式
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  scroll-behavior: smooth;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.6;
  color: $gray-800;
  background-color: $gray-50;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// 基础排版
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  line-height: 1.25;
  margin-bottom: $spacing-md;
}

h1 { font-size: $text-3xl; }
h2 { font-size: $text-2xl; }
h3 { font-size: $text-xl; }
h4 { font-size: $text-lg; }
h5 { font-size: $text-base; }
h6 { font-size: $text-sm; }

p {
  margin-bottom: $spacing-md;
}

a {
  color: $primary-blue;
  text-decoration: none;
  transition: color $transition-base;
  
  &:hover {
    color: darken-color($primary-blue, 15%);
  }
}

// 按钮基础样式
button {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

// 输入框基础样式
input, textarea, select {
  font-family: inherit;
  font-size: inherit;
}

// 图片响应式
img {
  max-width: 100%;
  height: auto;
}

// 滚动条样式
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: $gray-100;
  border-radius: $rounded;
}

::-webkit-scrollbar-thumb {
  background: $gray-400;
  border-radius: $rounded;
  
  &:hover {
    background: $gray-500;
  }
}

=== FILE: src\styles\components.scss ===
/* ===== src/styles/components.scss ===== */
// 按钮组件样式
.btn {
  @include button-style($primary-blue);
  
  &--primary { @include button-style($primary-navy); }
  &--secondary { @include button-style($gray-600); }
  &--success { @include button-style($primary-emerald); }
  &--warning { @include button-style($primary-amber); }
  &--danger { @include button-style($primary-coral); }
  
  &--outline {
    background: transparent;
    border: 2px solid currentColor;
    
    &:hover {
      background: currentColor;
      color: white;
    }
  }
  
  &--sm {
    padding: $spacing-xs $spacing-sm;
    font-size: $text-sm;
  }
  
  &--lg {
    padding: $spacing-md $spacing-lg;
    font-size: $text-lg;
  }
}

// 卡片组件样式
.card {
  @include card-style;
  
  &__header {
    padding: $spacing-lg;
    border-bottom: 1px solid $gray-200;
  }
  
  &__body {
    padding: $spacing-lg;
  }
  
  &__footer {
    padding: $spacing-lg;
    border-top: 1px solid $gray-200;
    background: $gray-50;
  }
}

// 标签组件样式
.tag {
  display: inline-block;
  padding: $spacing-xs $spacing-sm;
  background: $gray-200;
  color: $gray-700;
  border-radius: $rounded;
  font-size: $text-sm;
  
  &--primary { 
    background: $primary-blue; 
    color: white; 
  }
  &--success { 
    background: $primary-emerald; 
    color: white; 
  }
  &--warning { 
    background: $primary-amber; 
    color: white; 
  }
  &--danger { 
    background: $primary-coral; 
    color: white; 
  }
}

=== FILE: src\styles\main.scss ===
/* ===== src/styles/main.scss ===== */
@import 'variables';
@import 'mixins';
@import 'base';
@import 'components';

=== FILE: src\styles\mixins.scss ===
/* ===== src/styles/mixins.scss ===== */
// 使用内联函数替代darken，避免警告
@function darken-color($color, $amount) {
  @return mix(black, $color, $amount);
}

// 按钮混合器
@mixin button-style($bg-color, $text-color: white) {
  background-color: $bg-color;
  color: $text-color;
  border: none;
  border-radius: $rounded-lg;
  padding: $spacing-sm $spacing-md;
  font-weight: 500;
  transition: all $transition-base;
  cursor: pointer;
  
  &:hover {
    background-color: darken-color($bg-color, 10%);
    transform: translateY(-1px);
    box-shadow: $shadow-md;
  }
  
  &:active {
    transform: translateY(0);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    
    &:hover {
      transform: none;
      box-shadow: none;
    }
  }
}

// 卡片混合器
@mixin card-style {
  background: white;
  border-radius: $rounded-xl;
  box-shadow: $shadow;
  overflow: hidden;
  transition: all $transition-base;
  
  &:hover {
    box-shadow: $shadow-lg;
    transform: translateY(-2px);
  }
}

// 响应式混合器
@mixin respond-to($breakpoint) {
  @if $breakpoint == xs {
    @media (max-width: #{$breakpoint-sm - 1px}) { @content; }
  }
  @if $breakpoint == sm {
    @media (min-width: $breakpoint-sm) { @content; }
  }
  @if $breakpoint == md {
    @media (min-width: $breakpoint-md) { @content; }
  }
  @if $breakpoint == lg {
    @media (min-width: $breakpoint-lg) { @content; }
  }
  @if $breakpoint == xl {
    @media (min-width: $breakpoint-xl) { @content; }
  }
  @if $breakpoint == 2xl {
    @media (min-width: $breakpoint-2xl) { @content; }
  }
}

=== FILE: src\styles\responsive.scss ===
// ===== src/styles/responsive.scss =====
// 移动端优化
@media (max-width: $breakpoint-md) {
  .nav-tabs {
    flex-direction: column;
    gap: $spacing-sm;
  }
  
  .nav-tab {
    width: 100%;
    text-align: center;
  }
  
  .search-bar {
    flex-direction: column;
    
    .search-input {
      min-width: auto;
    }
  }
  
  .color-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: $spacing-md;
  }
  
  .modal__content {
    margin: $spacing-md;
    max-width: calc(100vw - #{$spacing-md * 2});
  }
  
  .toast {
    right: $spacing-md;
    left: $spacing-md;
    min-width: auto;
  }
}

// 触摸设备优化
@media (hover: none) and (pointer: coarse) {
  .color-card {
    &:active {
      transform: scale(0.98);
    }
  }
  
  .btn {
    min-height: 44px; // iOS推荐的最小触摸目标
    
    &:active {
      transform: scale(0.95);
    }
  }
  
  .tag {
    min-height: 32px;
    display: inline-flex;
    align-items: center;
    
    &:active {
      transform: scale(0.95);
    }
  }
}

// 高分辨率屏幕优化
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .color-card__preview {
    background-size: cover;
  }
}

// 深色模式支持（预留）
@media (prefers-color-scheme: dark) {
  // 这里可以添加深色模式样式
  // 暂时保留，后续可能会用到
}

// 动画偏好设置
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// 打印样式
@media print {
  .nav,
  .btn,
  .modal,
  .toast {
    display: none !important;
  }
  
  .color-card {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid $gray-300;
  }
}

=== FILE: src\styles\variables.scss ===
/* ===== src/styles/variables.scss ===== */
// 基础颜色变量
$primary-navy: #2C3E50;
$primary-blue: #3498DB;
$primary-coral: #E74C3C;
$primary-emerald: #27AE60;
$primary-amber: #F39C12;
$primary-rose: #E91E63;
$primary-purple: #9B59B6;
$primary-teal: #1ABC9C;

// 灰色系列 - 完整定义
$gray-50: #F8F9FA;
$gray-100: #F1F3F4;
$gray-200: #E9ECEF;
$gray-300: #DEE2E6;
$gray-400: #CED4DA;
$gray-500: #ADB5BD;
$gray-600: #6C757D;
$gray-700: #495057;
$gray-800: #343A40;
$gray-900: #212529;

// 间距系统
$spacing-xs: 0.25rem;   // 4px
$spacing-sm: 0.5rem;    // 8px
$spacing-md: 1rem;      // 16px
$spacing-lg: 1.5rem;    // 24px
$spacing-xl: 2rem;      // 32px
$spacing-2xl: 3rem;     // 48px
$spacing-3xl: 4rem;     // 64px

// 字体大小
$text-xs: 0.75rem;      // 12px
$text-sm: 0.875rem;     // 14px
$text-base: 1rem;       // 16px
$text-lg: 1.125rem;     // 18px
$text-xl: 1.25rem;      // 20px
$text-2xl: 1.5rem;      // 24px
$text-3xl: 1.875rem;    // 30px
$text-4xl: 2.25rem;     // 36px

// 圆角
$rounded-sm: 0.125rem;
$rounded: 0.25rem;
$rounded-md: 0.375rem;
$rounded-lg: 0.5rem;
$rounded-xl: 0.75rem;
$rounded-2xl: 1rem;
$rounded-3xl: 1.5rem;

// 阴影
$shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
$shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
$shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
$shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
$shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

// 过渡动画
$transition-fast: 150ms ease-in-out;
$transition-base: 250ms ease-in-out;
$transition-slow: 350ms ease-in-out;

// 断点
$breakpoint-sm: 640px;
$breakpoint-md: 768px;
$breakpoint-lg: 1024px;
$breakpoint-xl: 1280px;
$breakpoint-2xl: 1536px;

=== FILE: src\utils\colorUtils.js ===
// ===== src/utils/colorUtils.js =====
import chroma from 'chroma-js'
import Fuse from 'fuse.js'

// 加载颜色数据
export const loadColorsData = async () => {
  try {
    const response = await fetch('/colors.json')
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`)
    }
    const data = await response.json()
    
    // 为每个颜色添加计算属性
    data.colors = data.colors.map(color => ({
      ...color,
      hsl: rgbToHsl(color.rgb.r, color.rgb.g, color.rgb.b),
      brightness: getBrightness(color.rgb.r, color.rgb.g, color.rgb.b),
      contrast: getContrastColor(color.hex),
      chromaColor: chroma(color.hex)
    }))
    
    return data
  } catch (error) {
    console.error('颜色数据加载失败:', error)
    throw error
  }
}

// RGB转HSL
export const rgbToHsl = (r, g, b) => {
  r /= 255
  g /= 255
  b /= 255
  
  const max = Math.max(r, g, b)
  const min = Math.min(r, g, b)
  let h, s, l = (max + min) / 2
  
  if (max === min) {
    h = s = 0
  } else {
    const d = max - min
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min)
    
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break
      case g: h = (b - r) / d + 2; break
      case b: h = (r - g) / d + 4; break
    }
    h /= 6
  }
  
  return {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    l: Math.round(l * 100)
  }
}

// 计算亮度
export const getBrightness = (r, g, b) => {
  return Math.round((r * 299 + g * 587 + b * 114) / 1000)
}

// 获取对比色
export const getContrastColor = (hex) => {
  const color = chroma(hex)
  return color.luminance() > 0.5 ? '#000000' : '#FFFFFF'
}

// 颜色搜索
export const searchColors = (colors, query) => {
  if (!query.trim()) return colors
  
  const fuse = new Fuse(colors, {
    keys: [
      { name: 'chinese', weight: 0.3 },
      { name: 'english', weight: 0.3 },
      { name: 'hex', weight: 0.2 },
      { name: 'guofeng', weight: 0.2 },
      { name: 'tags', weight: 0.1 },
      { name: 'category', weight: 0.1 },
      { name: 'pantone', weight: 0.1 }
    ],
    threshold: 0.4,
    includeScore: true
  })
  
  const results = fuse.search(query)
  return results.map(result => result.item)
}

/* 
// 颜色筛选
export const filterColors = (colors, filters) => {
  return colors.filter(color => {
    // 分类筛选
    if (filters.category && color.category !== filters.category) {
      return false
    }
    
    // 标签筛选
    if (filters.tags.length > 0) {
      const hasMatchingTag = filters.tags.some(tag => 
        color.tags.includes(tag)
      )
      if (!hasMatchingTag) return false
    }
    
    // 国风颜色筛选
    if (filters.hasGuofeng && !color.guofeng) {
      return false
    }
    
    return true
  })
}
*/

export function filterColors(colors, filters) {
  let result = [...colors]
  
  // 分类筛选
  if (filters.category && filters.category !== '') {
    result = result.filter(color => color.category === filters.category)
  }
  
  // 标签筛选
  if (filters.tags && filters.tags.length > 0) {
    result = result.filter(color => 
      filters.tags.some(tag => color.tags && color.tags.includes(tag))
    )
  }
  
  // 国风筛选 - 修复逻辑
  if (filters.hasGuofeng === true) {
    result = result.filter(color => {
      return color.guofeng && 
             color.guofeng !== null && 
             color.guofeng !== '' && 
             color.guofeng !== 'null'  // 处理字符串'null'的情况
    })
  }
  
  return result
}

// 颜色排序
export const sortColors = (colors, sortBy, order = 'asc') => {
  const sorted = [...colors].sort((a, b) => {
    let comparison = 0
    
    switch (sortBy) {
      case 'name':
        comparison = a.chinese.localeCompare(b.chinese, 'zh-CN')
        break
      case 'hue':
        comparison = a.hsl.h - b.hsl.h
        break
      case 'brightness':
        comparison = a.brightness - b.brightness
        break
      case 'saturation':
        comparison = a.hsl.s - b.hsl.s
        break
      case 'lightness':
        comparison = a.hsl.l - b.hsl.l
        break
      default:
        comparison = 0
    }
    
    return order === 'desc' ? -comparison : comparison
  })
  
  return sorted
}

// 颜色相似度计算
export const getColorSimilarity = (color1, color2) => {
  const c1 = chroma(color1)
  const c2 = chroma(color2)
  
  // 使用Delta E CIE2000算法计算颜色差异
  return chroma.deltaE(c1, c2)
}

// 获取相似颜色
export const getSimilarColors = (targetColor, colors, limit = 6) => {
  const similarities = colors
    .filter(color => color.hex !== targetColor.hex)
    .map(color => ({
      color,
      similarity: getColorSimilarity(targetColor.hex, color.hex)
    }))
    .sort((a, b) => a.similarity - b.similarity)
    .slice(0, limit)
  
  return similarities.map(item => item.color)
}

// 生成配色方案
export const generateColorScheme = (baseColor, type = 'complementary') => {
  const base = chroma(baseColor.hex)
  let colors = []
  
  switch (type) {
    case 'complementary':
      colors = [
        base,
        base.set('hsl.h', '+180')
      ]
      break
    case 'triadic':
      colors = [
        base,
        base.set('hsl.h', '+120'),
        base.set('hsl.h', '+240')
      ]
      break
    case 'analogous':
      colors = [
        base.set('hsl.h', '-30'),
        base,
        base.set('hsl.h', '+30')
      ]
      break
    case 'split-complementary':
      colors = [
        base,
        base.set('hsl.h', '+150'),
        base.set('hsl.h', '+210')
      ]
      break
    case 'tetradic':
      colors = [
        base,
        base.set('hsl.h', '+90'),
        base.set('hsl.h', '+180'),
        base.set('hsl.h', '+270')
      ]
      break
    case 'monochromatic':
      colors = [
        base.brighten(2),
        base.brighten(1),
        base,
        base.darken(1),
        base.darken(2)
      ]
      break
  }
  
  return colors.map(color => color.hex())
}

// 颜色格式转换
export const convertColor = (color, format) => {
  const c = chroma(color)
  
  switch (format) {
    case 'hex':
      return c.hex()
    case 'rgb':
      return c.css('rgb')
    case 'hsl':
      return c.css('hsl')
    case 'cmyk':
      return c.cmyk()
    case 'lab':
      return c.lab()
    default:
      return color
  }
}















=== FILE: src\utils\constants.js ===
// ===== src/utils/constants.js =====
export const COLOR_CATEGORIES = [
  '红色系', '橙色系', '黄色系', '绿色系', 
  '蓝色系', '紫色系', '粉色系', '灰色系', 
  '黑白系', '棕色系'
]

export const SORT_OPTIONS = [
  { value: 'name', label: '按名称排序' },
  { value: 'hue', label: '按色相排序' },
  { value: 'brightness', label: '按亮度排序' },
  { value: 'saturation', label: '按饱和度排序' },
  { value: 'lightness', label: '按明度排序' }
]

export const COLOR_SCHEME_TYPES = [
  { value: 'complementary', label: '互补色' },
  { value: 'triadic', label: '三角色' },
  { value: 'analogous', label: '类似色' },
  { value: 'split-complementary', label: '分割互补色' },
  { value: 'tetradic', label: '正方形色' },
  { value: 'monochromatic', label: '单色系' }
]

export const FASHION_TAGS = [
  '春季时尚', '夏季时尚', '秋季时尚', '冬季时尚',
  '商务正装', '休闲时尚', '晚装正式', '运动时尚',
  '浪漫风格', '简约风格', '复古风格', '现代风格',
  '高级时尚色', '流行时尚色', '经典时尚色'
]

=== FILE: src\utils\imageUtils.js ===
// ===== src/utils/imageUtils.js =====
import ColorThief from 'colorthief'

// 图片上传验证
export const validateImageFile = (file) => {
  const maxSize = import.meta.env.VITE_MAX_UPLOAD_SIZE || 10485760 // 10MB
  const supportedFormats = (import.meta.env.VITE_SUPPORTED_FORMATS || 'image/jpeg,image/png,image/webp').split(',')
  
  if (file.size > maxSize) {
    throw new Error(`图片大小不能超过 ${Math.round(maxSize / 1024 / 1024)}MB`)
  }
  
  if (!supportedFormats.includes(file.type)) {
    throw new Error(`不支持的图片格式，请使用 ${supportedFormats.join(', ')} 格式`)
  }
  
  return true
}

// 图片预处理
export const preprocessImage = (file) => {
  return new Promise((resolve, reject) => {
    const reader = new FileReader()
    
    reader.onload = (e) => {
      const img = new Image()
      
      img.onload = () => {
        const canvas = document.createElement('canvas')
        const ctx = canvas.getContext('2d')
        
        // 限制最大尺寸
        const maxWidth = 800
        const maxHeight = 600
        let { width, height } = img
        
        if (width > maxWidth || height > maxHeight) {
          const ratio = Math.min(maxWidth / width, maxHeight / height)
          width *= ratio
          height *= ratio
        }
        
        canvas.width = width
        canvas.height = height
        
        ctx.drawImage(img, 0, 0, width, height)
        
        resolve({
          canvas,
          dataUrl: canvas.toDataURL('image/jpeg', 0.8),
          width,
          height
        })
      }
      
      img.onerror = () => reject(new Error('图片加载失败'))
      img.src = e.target.result
    }
    
    reader.onerror = () => reject(new Error('文件读取失败'))
    reader.readAsDataURL(file)
  })
}

// 从图片中提取颜色
export const extractColorsFromImage = (imageElement, colorCount = 10) => {
  const colorThief = new ColorThief()
  
  try {
    const palette = colorThief.getPalette(imageElement, colorCount)
    return palette.map(rgb => ({
      rgb: { r: rgb[0], g: rgb[1], b: rgb[2] },
      hex: chroma.rgb(rgb[0], rgb[1], rgb[2]).hex()
    }))
  } catch (error) {
    console.error('颜色提取失败:', error)
    return []
  }
}

// 获取图片特定位置的颜色
export const getColorAtPosition = (canvas, x, y) => {
  const ctx = canvas.getContext('2d')
  const imageData = ctx.getImageData(x, y, 1, 1)
  const [r, g, b] = imageData.data
  
  return {
    rgb: { r, g, b },
    hex: chroma.rgb(r, g, b).hex()
  }
}

=== FILE: src\views\ColorExtractView.vue ===
<template>
  <div class="extract-view">
    <MainNav />
    
    <div class="extract-container">
      <!-- 页面头部 -->
      <div class="extract-header">
        <h1 class="extract-title">图片取色工具</h1>
        <p class="extract-subtitle">
          上传图片，智能提取主要颜色，并匹配数据库中的相似颜色
        </p>
      </div>
      
      <!-- 工具主体 -->
      <div class="extract-content">
        <!-- 上传区域 -->
        <div class="upload-section">
          <div 
            class="upload-area"
            :class="{ 
              'upload-area--dragover': isDragOver,
              'upload-area--has-image': uploadedImage
            }"
            @drop="handleDrop"
            @dragover.prevent="isDragOver = true"
            @dragleave="isDragOver = false"
            @click="triggerFileInput"
          >
            <input
              ref="fileInput"
              type="file"
              accept="image/*"
              @change="handleFileSelect"
              class="file-input"
            />
            
            <div v-if="!uploadedImage" class="upload-placeholder">
              <PhotoIcon class="upload-icon" />
              <h3 class="upload-title">点击上传或拖拽图片到此处</h3>
              <p class="upload-text">支持 JPG、PNG、GIF 格式，文件大小不超过 10MB</p>
              <button class="upload-button">选择图片</button>
            </div>
            
            <div v-else class="image-preview">
              <img
                ref="previewImage"
                :src="uploadedImage"
                alt="预览图片"
                class="preview-img"
                @load="handleImageLoad"
              />
              <div class="image-actions">
                <button @click="removeImage" class="remove-button">
                  <XMarkIcon class="btn-icon" />
                  移除图片
                </button>
                <button @click="extractColors" :disabled="isExtracting" class="extract-button">
                  <SwatchIcon v-if="!isExtracting" class="btn-icon" />
                  <ArrowPathIcon v-else class="btn-icon spinning" />
                  {{ isExtracting ? '提取中...' : '提取颜色' }}
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 提取结果 -->
        <div v-if="extractedColors.length > 0" class="results-section">
          <div class="results-header">
            <h2 class="results-title">提取的颜色</h2>
            <div class="results-stats">
              找到 {{ extractedColors.length }} 个主要颜色
            </div>
          </div>
          
          <!-- 颜色调色板 -->
          <div class="color-palette">
            <div 
              v-for="(color, index) in extractedColors"
              :key="index"
              class="palette-item"
              :class="{ 'palette-item--selected': selectedExtractedColor === index }"
              @click="selectExtractedColor(index)"
            >
              <div 
                class="palette-color"
                :style="{ backgroundColor: color.hex }"
                :title="color.hex"
              ></div>
              <div class="palette-info">
                <div class="palette-hex">{{ color.hex }}</div>
                <div class="palette-percentage">{{ color.percentage }}%</div>
              </div>
            </div>
          </div>
          
          <!-- 相似颜色匹配 -->
          <div v-if="selectedExtractedColor !== null" class="matches-section">
            <div class="matches-header">
              <h3 class="matches-title">
                数据库中的相似颜色
                <span class="selected-color-indicator">
                  <span 
                    class="color-dot"
                    :style="{ backgroundColor: extractedColors[selectedExtractedColor].hex }"
                  ></span>
                  {{ extractedColors[selectedExtractedColor].hex }}
                </span>
              </h3>
              <div class="match-controls">
                <label class="similarity-label">
                  相似度阈值: {{ similarityThreshold }}%
                  <input
                    v-model="similarityThreshold"
                    type="range"
                    min="60"
                    max="95"
                    step="5"
                    class="similarity-slider"
                    @input="updateMatches"
                  />
                </label>
              </div>
            </div>
            
            <div v-if="isMatching" class="loading-matches">
              <ArrowPathIcon class="loading-icon" />
              正在匹配相似颜色...
            </div>
            
            <div v-else-if="matchedColors.length > 0" class="matches-grid">
              <div
                v-for="match in matchedColors"
                :key="match.hex"
                class="match-item"
                @click="viewColorDetail(match)"
              >
                <div class="match-color-preview">
                  <div 
                    class="match-color"
                    :style="{ backgroundColor: match.hex }"
                  ></div>
                  <div class="similarity-score">
                    {{ Math.round(match.similarity) }}% 相似
                  </div>
                </div>
                <div class="match-info">
                  <h4 class="match-name">{{ match.chinese }}</h4>
                  <p class="match-english">{{ match.english }}</p>
                  <div class="match-meta">
                    <span class="match-hex">{{ match.hex }}</span>
                    <span class="match-category">{{ match.category }}</span>
                  </div>
                  <div v-if="match.guofeng" class="match-guofeng">
                    国风: {{ match.guofeng }}
                  </div>
                </div>
                <div class="match-actions">
                  <button 
                    @click.stop="toggleFavorite(match)"
                    class="favorite-btn"
                    :class="{ 'is-favorite': favoriteStore.isFavorite(match.hex) }"
                  >
                    <HeartIcon class="heart-icon" />
                  </button>
                </div>
              </div>
            </div>
            
            <div v-else class="no-matches">
              <EyeSlashIcon class="no-matches-icon" />
              <p>未找到相似度超过 {{ similarityThreshold }}% 的颜色</p>
              <button @click="similarityThreshold = 60; updateMatches()" class="adjust-threshold-btn">
                降低相似度阈值
              </button>
            </div>
          </div>
        </div>
        
        <!-- 使用说明 -->
        <div v-if="extractedColors.length === 0" class="usage-guide">
          <div class="guide-card">
            <h3 class="guide-title">使用说明</h3>
            <div class="guide-steps">
              <div class="guide-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>上传图片</h4>
                  <p>支持 JPG、PNG、GIF 格式，建议使用色彩丰富的图片</p>
                </div>
              </div>
              <div class="guide-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>提取颜色</h4>
                  <p>系统会自动分析图片并提取主要颜色</p>
                </div>
              </div>
              <div class="guide-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>匹配相似色</h4>
                  <p>点击提取的颜色，查看数据库中的相似颜色</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 示例图片 -->
          <div class="example-section">
            <h3 class="example-title">试试这些示例</h3>
            <div class="example-images">
              <div
                v-for="example in exampleImages"
                :key="example.name"
                class="example-item"
                @click="loadExample(example)"
              >
                <img :src="example.url" :alt="example.name" class="example-img" />
                <p class="example-name">{{ example.name }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 颜色详情弹窗 -->
    <ColorDetailModal
      v-if="selectedColorDetail"
      :color="selectedColorDetail"
      @close="selectedColorDetail = null"
    />
  </div>
</template>

<script setup>
import { ref, reactive, computed, onMounted } from 'vue'
import { useColorStore } from '@stores/colorStore'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'
import MainNav from '@components/navigation/MainNav.vue'
import ColorDetailModal from '@components/color/ColorDetailModal.vue'
import {
  PhotoIcon, XMarkIcon, SwatchIcon, ArrowPathIcon, HeartIcon,
  EyeSlashIcon
} from '@heroicons/vue/24/outline'

const colorStore = useColorStore()
const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

// 响应式数据
const fileInput = ref(null)
const previewImage = ref(null)
const isDragOver = ref(false)
const uploadedImage = ref(null)
const isExtracting = ref(false)
const isMatching = ref(false)
const extractedColors = ref([])
const selectedExtractedColor = ref(null)
const matchedColors = ref([])
const similarityThreshold = ref(80)
const selectedColorDetail = ref(null)

// 示例图片
const exampleImages = ref([
  {
    name: '秋叶',
    url: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjY2MDAiLz48c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmOGYwMCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmYjkwMCIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTIwIiBmaWxsPSJ1cmwoI2EpIi8+PC9zdmc+'
  },
  {
    name: '海洋',
    url: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDc3YmUiLz48c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzAwYWNlZSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzUwZGRmZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTIwIiBmaWxsPSJ1cmwoI2IpIi8+PC9zdmc+'
  },
  {
    name: '花园',
    url: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjY5YjQiLz48c3RvcCBvZmZzZXQ9IjMzJSIgc3RvcC1jb2xvcj0iIzIyYzU1ZSIvPjxzdG9wIG9mZnNldD0iNjYlIiBzdG9wLWNvbG9yPSIjZmZkNzAwIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjOTMzM2VhIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIxMjAiIGZpbGw9InVybCgjYykiLz48L3N2Zz4='
  }
])

// 方法
const triggerFileInput = () => {
  fileInput.value?.click()
}

const handleFileSelect = (event) => {
  const file = event.target.files[0]
  if (file) {
    processFile(file)
  }
}

const handleDrop = (event) => {
  event.preventDefault()
  isDragOver.value = false
  
  const files = event.dataTransfer.files
  if (files.length > 0) {
    processFile(files[0])
  }
}

const processFile = (file) => {
  // 验证文件类型
  if (!file.type.startsWith('image/')) {
    uiStore.showMessage('请选择图片文件', 'error')
    return
  }
  
  // 验证文件大小 (10MB)
  if (file.size > 10 * 1024 * 1024) {
    uiStore.showMessage('文件大小不能超过 10MB', 'error')
    return
  }
  
  const reader = new FileReader()
  reader.onload = (e) => {
    uploadedImage.value = e.target.result
    resetExtraction()
  }
  reader.readAsDataURL(file)
}

const removeImage = () => {
  uploadedImage.value = null
  resetExtraction()
  if (fileInput.value) {
    fileInput.value.value = ''
  }
}

const resetExtraction = () => {
  extractedColors.value = []
  selectedExtractedColor.value = null
  matchedColors.value = []
}

const handleImageLoad = () => {
  // 图片加载完成后可以进行一些初始化操作
  console.log('图片加载完成')
}

const extractColors = async () => {
  if (!previewImage.value) return
  
  isExtracting.value = true
  
  try {
    // 模拟颜色提取过程
    await new Promise(resolve => setTimeout(resolve, 2000))
    
    // 模拟提取的颜色数据
    const mockColors = [
      { hex: '#2563eb', percentage: 35 },
      { hex: '#dc2626', percentage: 25 },
      { hex: '#059669', percentage: 20 },
      { hex: '#ca8a04', percentage: 15 },
      { hex: '#7c3aed', percentage: 5 }
    ]
    
    extractedColors.value = mockColors
    uiStore.showMessage(`成功提取了 ${mockColors.length} 个主要颜色`, 'success')
  } catch (error) {
    console.error('颜色提取失败:', error)
    uiStore.showMessage('颜色提取失败，请重试', 'error')
  } finally {
    isExtracting.value = false
  }
}

const selectExtractedColor = (index) => {
  selectedExtractedColor.value = index
  updateMatches()
}

const updateMatches = async () => {
  if (selectedExtractedColor.value === null) return
  
  isMatching.value = true
  
  try {
    const targetColor = extractedColors.value[selectedExtractedColor.value]
    
    // 模拟匹配过程
    await new Promise(resolve => setTimeout(resolve, 1000))
    
    // 使用颜色存储的相似颜色查找功能
    const matches = colorStore.getSimilarColors(
      { hex: targetColor.hex },
      10,
      similarityThreshold.value / 100
    )
    
    matchedColors.value = matches
  } catch (error) {
    console.error('颜色匹配失败:', error)
    uiStore.showMessage('颜色匹配失败，请重试', 'error')
  } finally {
    isMatching.value = false
  }
}

const loadExample = (example) => {
  uploadedImage.value = example.url
  resetExtraction()
  uiStore.showMessage(`已加载示例图片: ${example.name}`, 'info')
}

const viewColorDetail = (color) => {
  selectedColorDetail.value = color
}

const toggleFavorite = (color) => {
  favoriteStore.toggleFavorite(color)
  const message = favoriteStore.isFavorite(color.hex) ? 
    `已收藏 ${color.chinese}` : 
    `已取消收藏 ${color.chinese}`
  uiStore.showMessage(message, 'success')
}

onMounted(() => {
  document.title = '图片取色 - Fashion Color 颜色管理系统'
})
</script>

<style lang="scss" scoped>
.extract-view {
  min-height: 100vh;
  background: #f8fafc;
}

.extract-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.extract-header {
  text-align: center;
  margin-bottom: 32px;
}

.extract-title {
  font-size: 32px;
  font-weight: 700;
  color: #111827;
  margin: 0 0 8px 0;
}

.extract-subtitle {
  font-size: 16px;
  color: #6b7280;
  margin: 0;
}

.extract-content {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

// 上传区域样式
.upload-section {
  background: white;
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.upload-area {
  border: 2px dashed #d1d5db;
  border-radius: 12px;
  min-height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  
  &--dragover {
    border-color: #3b82f6;
    background: #dbeafe;
  }
  
  &--has-image {
    border: none;
    background: transparent;
    min-height: auto;
    padding: 0;
  }
}

.file-input {
  display: none;
}

.upload-placeholder {
  text-align: center;
  padding: 40px;
}

.upload-icon {
  width: 64px;
  height: 64px;
  color: #9ca3af;
  margin: 0 auto 16px;
}

.upload-title {
  font-size: 20px;
  font-weight: 600;
  color: #374151;
  margin: 0 0 8px 0;
}

.upload-text {
  font-size: 14px;
  color: #6b7280;
  margin: 0 0 20px 0;
}

.upload-button {
  padding: 12px 24px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  
  &:hover {
    background: #2563eb;
  }
}

.image-preview {
  width: 100%;
  text-align: center;
}

.preview-img {
  max-width: 100%;
  max-height: 400px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  margin-bottom: 16px;
}

.image-actions {
  display: flex;
  justify-content: center;
  gap: 12px;
}

.remove-button, .extract-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  .btn-icon {
    width: 16px;
    height: 16px;
  }
}

.remove-button {
  background: #f3f4f6;
  color: #374151;
  
  &:hover {
    background: #e5e7eb;
  }
}

.extract-button {
  background: #059669;
  color: white;
  
  &:hover:not(:disabled) {
    background: #047857;
  }
  
  &:disabled {
    background: #9ca3af;
    cursor: not-allowed;
  }
}

.spinning {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

// 结果区域样式
.results-section {
  background: white;
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  
  @media (max-width: 768px) {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
}

.results-title {
  font-size: 20px;
  font-weight: 600;
  color: #111827;
  margin: 0;
}

.results-stats {
  font-size: 14px;
  color: #6b7280;
}

// 调色板样式
.color-palette {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 16px;
  margin-bottom: 32px;
}

.palette-item {
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    border-color: #3b82f6;
    transform: translateY(-2px);
  }
  
  &--selected {
    border-color: #3b82f6;
    background: #dbeafe;
  }
}

.palette-color {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  margin: 0 auto 12px;
  border: 3px solid white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.palette-info {
  .palette-hex {
    font-family: monospace;
    font-size: 12px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 4px;
  }
  
  .palette-percentage {
    font-size: 11px;
    color: #6b7280;
  }
}

// 匹配结果样式
.matches-section {
  border-top: 1px solid #e5e7eb;
  padding-top: 32px;
}

.matches-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  
  @media (max-width: 768px) {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }
}

.matches-title {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  margin: 0;
}

.selected-color-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 400;
  color: #6b7280;
}

.color-dot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.match-controls {
  display: flex;
  align-items: center;
  gap: 16px;
}

.similarity-label {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 14px;
  color: #374151;
}

.similarity-slider {
  width: 120px;
}

.loading-matches {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px;
  color: #6b7280;
  
  .loading-icon {
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
  }
}

// 匹配网格样式
.matches-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
}

.match-item {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    border-color: #3b82f6;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
  }
}

.match-color-preview {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.match-color {
  width: 50px;
  height: 50px;
  border-radius: 8px;
  border: 2px solid white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.similarity-score {
  background: #059669;
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}

.match-info {
  flex: 1;
  margin-bottom: 12px;
}

.match-name {
  font-size: 16px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 4px 0;
}

.match-english {
  font-size: 14px;
  color: #6b7280;
  margin: 0 0 8px 0;
}

.match-meta {
  display: flex;
  gap: 12px;
  margin-bottom: 4px;
}

.match-hex {
  font-family: monospace;
  font-size: 12px;
  color: #374151;
  background: white;
  padding: 2px 6px;
  border-radius: 4px;
}

.match-category {
  font-size: 12px;
  color: #6b7280;
  background: #e5e7eb;
  padding: 2px 6px;
  border-radius: 4px;
}

.match-guofeng {
  font-size: 11px;
  color: #dc2626;
  font-weight: 500;
}

.match-actions {
  display: flex;
  justify-content: flex-end;
}

.favorite-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: all 0.2s;
  
  &:hover {
    background: #f3f4f6;
  }
  
  &.is-favorite {
    .heart-icon {
      color: #ef4444;
      fill: currentColor;
    }
  }
}

.heart-icon {
  width: 20px;
  height: 20px;
  color: #9ca3af;
  transition: color 0.2s;
}

// 无匹配结果样式
.no-matches {
  text-align: center;
  padding: 40px;
  color: #6b7280;
}

.no-matches-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 16px;
  color: #d1d5db;
}

.adjust-threshold-btn {
  margin-top: 16px;
  padding: 8px 16px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  
  &:hover {
    background: #2563eb;
  }
}

// 使用指南样式
.usage-guide {
  display: grid;
  gap: 32px;
  
  @media (min-width: 1024px) {
    grid-template-columns: 1fr 1fr;
  }
}

.guide-card {
  background: white;
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.guide-title {
  font-size: 20px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 24px 0;
}

.guide-steps {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.guide-step {
  display: flex;
  gap: 16px;
}

.step-number {
  width: 32px;
  height: 32px;
  background: #3b82f6;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  flex-shrink: 0;
}

.step-content {
  flex: 1;
  
  h4 {
    font-size: 16px;
    font-weight: 600;
    color: #111827;
    margin: 0 0 4px 0;
  }
  
  p {
    font-size: 14px;
    color: #6b7280;
    margin: 0;
    line-height: 1.5;
  }
}

// 示例图片样式
.example-section {
  background: white;
  border-radius: 16px;
  padding: 32px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.example-title {
  font-size: 20px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 24px 0;
}

.example-images {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 16px;
}

.example-item {
  text-align: center;
  cursor: pointer;
  transition: transform 0.2s;
  
  &:hover {
    transform: translateY(-2px);
  }
}

.example-img {
  width: 100%;
  height: 80px;
  object-fit: cover;
  border-radius: 8px;
  border: 2px solid #e5e7eb;
  margin-bottom: 8px;
  transition: border-color 0.2s;
  
  .example-item:hover & {
    border-color: #3b82f6;
  }
}

.example-name {
  font-size: 12px;
  color: #6b7280;
  margin: 0;
}

@media (max-width: 768px) {
  .extract-container {
    padding: 16px;
  }
  
  .upload-section,
  .results-section,
  .guide-card,
  .example-section {
    padding: 20px;
  }
  
  .matches-grid {
    grid-template-columns: 1fr;
  }
  
  .usage-guide {
    grid-template-columns: 1fr;
  }
}
</style>

=== FILE: src\views\ColorWheelView.vue ===
<template>
  <div class="wheel-view">
    <div class="wheel-container">
      <!-- 页面头部 -->
      <div class="wheel-header">
        <h1 class="wheel-title">色环选色工具</h1>
        <p class="wheel-subtitle">
          基于色彩理论的专业选色工具，支持 12/24 色环和多种配色方案生成
        </p>
      </div>
      
      <!-- 主要内容区域 -->
      <div class="wheel-content">
        <!-- 左侧控制面板 -->
        <div class="wheel-controls">
          <!-- 色环配置 -->
          <div class="control-section">
            <h3 class="section-title">色环配置</h3>
            
            <div class="control-group">
              <label class="control-label">色环类型</label>
              <div class="radio-group">
                <label class="radio-item">
                  <input
                    v-model="wheelType"
                    type="radio"
                    value="12"
                    @change="updateWheel"
                  />
                  <span>12色环</span>
                </label>
                <label class="radio-item">
                  <input
                    v-model="wheelType"
                    type="radio"
                    value="24"
                    @change="updateWheel"
                  />
                  <span>24色环</span>
                </label>
              </div>
            </div>
            
            <div class="control-group">
              <label class="control-label">饱和度</label>
              <div class="slider-container">
                <input
                  v-model="saturation"
                  type="range"
                  min="0"
                  max="100"
                  class="slider"
                  @input="updateWheel"
                />
                <span class="slider-value">{{ saturation }}%</span>
              </div>
            </div>
            
            <div class="control-group">
              <label class="control-label">明度</label>
              <div class="slider-container">
                <input
                  v-model="lightness"
                  type="range"
                  min="0"
                  max="100"
                  class="slider"
                  @input="updateWheel"
                />
                <span class="slider-value">{{ lightness }}%</span>
              </div>
            </div>
          </div>
          
          <!-- 配色方案 -->
          <div class="control-section">
            <h3 class="section-title">配色方案</h3>
            
            <div class="scheme-buttons">
              <button
                v-for="scheme in colorSchemes"
                :key="scheme.value"
                :class="['scheme-btn', { 'active': currentScheme === scheme.value }]"
                @click="setColorScheme(scheme.value)"
              >
                {{ scheme.label }}
              </button>
            </div>
          </div>
          
          <!-- 选中颜色信息 -->
          <div class="control-section">
            <h3 class="section-title">选中颜色</h3>
            
            <div v-if="selectedColor" class="selected-color-info">
              <div class="color-preview-large">
                <div 
                  class="color-block"
                  :style="{ backgroundColor: selectedColor.hex }"
                ></div>
                <div class="color-details">
                  <div class="color-hex">{{ selectedColor.hex }}</div>
                  <div class="color-hsl">
                    HSL({{ Math.round(selectedColor.hue) }}, {{ saturation }}%, {{ lightness }}%)
                  </div>
                  <div class="color-rgb">
                    RGB({{ selectedColor.rgb.r }}, {{ selectedColor.rgb.g }}, {{ selectedColor.rgb.b }})
                  </div>
                </div>
              </div>
              
              <div class="color-actions">
                <button @click="addToFavorites" class="action-btn favorite-btn">
                  收藏颜色
                </button>
                <button @click="copyColor" class="action-btn copy-btn">
                  复制HEX
                </button>
                <button @click="findSimilar" class="action-btn similar-btn">
                  查找相似
                </button>
              </div>
            </div>
            
            <div v-else class="no-selection">
              <p>点击色环选择颜色</p>
            </div>
          </div>
        </div>
        
        <!-- 中间色环区域 -->
        <div class="wheel-area">
          <div class="wheel-wrapper" ref="wheelWrapper">
            <!-- 色环SVG -->
            <svg
              :width="wheelSize"
              :height="wheelSize"
              class="color-wheel-svg"
              @click="handleWheelClick"
              @mousemove="handleWheelHover"
            >
              <!-- 色环扇形 -->
              <g v-for="(segment, index) in wheelSegments" :key="index">
                <path
                  :d="segment.path"
                  :fill="segment.color"
                  :stroke="segment.isSelected ? '#fff' : 'none'"
                  :stroke-width="segment.isSelected ? '3' : '0'"
                  class="wheel-segment"
                  :data-hue="segment.hue"
                />
              </g>
              
              <!-- 中心圆 -->
              <circle
                :cx="wheelSize / 2"
                :cy="wheelSize / 2"
                :r="wheelSize * 0.15"
                fill="white"
                stroke="#e5e7eb"
                stroke-width="2"
                class="center-circle"
              />
              
              <!-- 选中指示器 -->
              <circle
                v-if="selectedColor"
                :cx="selectedColor.x"
                :cy="selectedColor.y"
                r="8"
                fill="white"
                stroke="#111827"
                stroke-width="2"
                class="selection-indicator"
              />
            </svg>
            
            <!-- 色环标签 -->
            <div class="wheel-labels">
              <div
                v-for="label in wheelLabels"
                :key="label.hue"
                class="wheel-label"
                :style="{
                  left: label.x + 'px',
                  top: label.y + 'px',
                  transform: 'translate(-50%, -50%)'
                }"
              >
                {{ label.text }}
              </div>
            </div>
          </div>
        </div>
        
        <!-- 右侧结果面板 -->
        <div class="results-panel">
          <!-- 配色方案预览 -->
          <div v-if="generatedScheme.length > 0" class="scheme-preview">
            <h3 class="section-title">配色方案预览</h3>
            
            <div class="scheme-colors">
              <div
                v-for="(color, index) in generatedScheme"
                :key="index"
                class="scheme-color"
                :style="{ backgroundColor: color.hex }"
                @click="selectSchemeColor(color)"
              >
                <div class="scheme-color-info">
                  <div class="color-hex">{{ color.hex }}</div>
                  <div class="color-name">{{ color.name }}</div>
                </div>
              </div>
            </div>
            
            <div class="scheme-actions">
              <button @click="saveScheme" class="action-btn save-btn">
                保存方案
              </button>
              <button @click="exportScheme" class="action-btn export-btn">
                导出方案
              </button>
            </div>
          </div>
          
          <!-- 使用指南 -->
          <div class="usage-guide">
            <h3 class="section-title">使用指南</h3>
            
            <div class="guide-content">
              <div class="guide-item">
                <div class="guide-icon">1</div>
                <div class="guide-text">
                  <h4>选择色环类型</h4>
                  <p>12色环适合基础配色，24色环提供更精细的控制</p>
                </div>
              </div>
              
              <div class="guide-item">
                <div class="guide-icon">2</div>
                <div class="guide-text">
                  <h4>调整参数</h4>
                  <p>通过滑块调整饱和度和明度，获得理想的颜色效果</p>
                </div>
              </div>
              
              <div class="guide-item">
                <div class="guide-icon">3</div>
                <div class="guide-text">
                  <h4>选择配色方案</h4>
                  <p>点击配色方案按钮，自动生成和谐的颜色组合</p>
                </div>
              </div>
              
              <div class="guide-item">
                <div class="guide-icon">4</div>
                <div class="guide-text">
                  <h4>点击色环</h4>
                  <p>在色环上点击选择主色，系统自动生成配色方案</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, nextTick } from 'vue'
import { useColorStore } from '@stores/colorStore'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'

// 商店实例
const colorStore = useColorStore()
const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

// 响应式数据
const wheelType = ref('12')
const saturation = ref(80)
const lightness = ref(50)
const currentScheme = ref('complementary')
const selectedColor = ref(null)
const wheelSize = ref(300)
const wheelWrapper = ref(null)

// 配色方案选项
const colorSchemes = [
  { value: 'complementary', label: '互补色' },
  { value: 'triadic', label: '三角色' },
  { value: 'analogous', label: '类似色' },
  { value: 'split-complementary', label: '分割互补' },
  { value: 'tetradic', label: '正方形色' },
  { value: 'monochromatic', label: '单色系' }
]

// 计算属性
const wheelSegments = computed(() => {
  const segments = []
  const segmentCount = parseInt(wheelType.value)
  const anglePerSegment = 360 / segmentCount
  const centerX = wheelSize.value / 2
  const centerY = wheelSize.value / 2
  const outerRadius = wheelSize.value * 0.4
  const innerRadius = wheelSize.value * 0.2

  for (let i = 0; i < segmentCount; i++) {
    const startAngle = (i * anglePerSegment - 90) * Math.PI / 180
    const endAngle = ((i + 1) * anglePerSegment - 90) * Math.PI / 180
    const hue = i * anglePerSegment
    
    const x1 = centerX + Math.cos(startAngle) * innerRadius
    const y1 = centerY + Math.sin(startAngle) * innerRadius
    const x2 = centerX + Math.cos(startAngle) * outerRadius
    const y2 = centerY + Math.sin(startAngle) * outerRadius
    const x3 = centerX + Math.cos(endAngle) * outerRadius
    const y3 = centerY + Math.sin(endAngle) * outerRadius
    const x4 = centerX + Math.cos(endAngle) * innerRadius
    const y4 = centerY + Math.sin(endAngle) * innerRadius

    const largeArcFlag = anglePerSegment > 180 ? 1 : 0
    
    const pathData = [
      `M ${x1} ${y1}`,
      `L ${x2} ${y2}`,
      `A ${outerRadius} ${outerRadius} 0 ${largeArcFlag} 1 ${x3} ${y3}`,
      `L ${x4} ${y4}`,
      `A ${innerRadius} ${innerRadius} 0 ${largeArcFlag} 0 ${x1} ${y1}`,
      'Z'
    ].join(' ')

    segments.push({
      path: pathData,
      color: `hsl(${hue}, ${saturation.value}%, ${lightness.value}%)`,
      hue: hue,
      isSelected: selectedColor.value && Math.abs(selectedColor.value.hue - hue) < anglePerSegment / 2
    })
  }

  return segments
})

const wheelLabels = computed(() => {
  const labels = []
  const segmentCount = parseInt(wheelType.value)
  const anglePerSegment = 360 / segmentCount
  const centerX = wheelSize.value / 2
  const centerY = wheelSize.value / 2
  const labelRadius = wheelSize.value * 0.45

  for (let i = 0; i < segmentCount; i++) {
    const angle = (i * anglePerSegment - 90) * Math.PI / 180
    const x = centerX + Math.cos(angle) * labelRadius
    const y = centerY + Math.sin(angle) * labelRadius
    const hue = i * anglePerSegment

    labels.push({
      x: x,
      y: y,
      hue: hue,
      text: `${Math.round(hue)}°`
    })
  }

  return labels
})

const generatedScheme = computed(() => {
  if (!selectedColor.value) return []
  
  const baseHue = selectedColor.value.hue
  const colors = []
  
  switch (currentScheme.value) {
    case 'complementary':
      colors.push(
        { hex: selectedColor.value.hex, name: '主色' },
        { hex: hslToHex((baseHue + 180) % 360, saturation.value, lightness.value), name: '互补色' }
      )
      break
    case 'triadic':
      colors.push(
        { hex: selectedColor.value.hex, name: '主色' },
        { hex: hslToHex((baseHue + 120) % 360, saturation.value, lightness.value), name: '三角色1' },
        { hex: hslToHex((baseHue + 240) % 360, saturation.value, lightness.value), name: '三角色2' }
      )
      break
    case 'analogous':
      colors.push(
        { hex: hslToHex((baseHue - 30 + 360) % 360, saturation.value, lightness.value), name: '类似色1' },
        { hex: selectedColor.value.hex, name: '主色' },
        { hex: hslToHex((baseHue + 30) % 360, saturation.value, lightness.value), name: '类似色2' }
      )
      break
    case 'split-complementary':
      colors.push(
        { hex: selectedColor.value.hex, name: '主色' },
        { hex: hslToHex((baseHue + 150) % 360, saturation.value, lightness.value), name: '分割互补1' },
        { hex: hslToHex((baseHue + 210) % 360, saturation.value, lightness.value), name: '分割互补2' }
      )
      break
    case 'tetradic':
      colors.push(
        { hex: selectedColor.value.hex, name: '主色' },
        { hex: hslToHex((baseHue + 90) % 360, saturation.value, lightness.value), name: '正方形1' },
        { hex: hslToHex((baseHue + 180) % 360, saturation.value, lightness.value), name: '正方形2' },
        { hex: hslToHex((baseHue + 270) % 360, saturation.value, lightness.value), name: '正方形3' }
      )
      break
    case 'monochromatic':
      colors.push(
        { hex: hslToHex(baseHue, saturation.value, Math.max(20, lightness.value - 20)), name: '深色' },
        { hex: selectedColor.value.hex, name: '主色' },
        { hex: hslToHex(baseHue, saturation.value, Math.min(80, lightness.value + 20)), name: '浅色' }
      )
      break
  }
  
  return colors
})

// 方法
const updateWheel = () => {
  // 更新色环显示
}

const setColorScheme = (scheme) => {
  currentScheme.value = scheme
}

const handleWheelClick = (event) => {
  const rect = event.target.getBoundingClientRect()
  const centerX = wheelSize.value / 2
  const centerY = wheelSize.value / 2
  const x = event.clientX - rect.left
  const y = event.clientY - rect.top
  
  const dx = x - centerX
  const dy = y - centerY
  const distance = Math.sqrt(dx * dx + dy * dy)
  
  // 检查是否在色环范围内
  if (distance >= wheelSize.value * 0.2 && distance <= wheelSize.value * 0.4) {
    let angle = Math.atan2(dy, dx) * 180 / Math.PI + 90
    if (angle < 0) angle += 360
    
    const hue = Math.round(angle)
    const hex = hslToHex(hue, saturation.value, lightness.value)
    const rgb = hexToRgb(hex)
    
    selectedColor.value = {
      hex: hex,
      hue: hue,
      rgb: rgb,
      x: x,
      y: y
    }
  }
}

const handleWheelHover = (event) => {
  // 处理悬停效果
}

const selectSchemeColor = (color) => {
  const rgb = hexToRgb(color.hex)
  const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b)
  
  selectedColor.value = {
    hex: color.hex,
    hue: hsl.h,
    rgb: rgb,
    x: 0,
    y: 0
  }
}

const addToFavorites = () => {
  if (selectedColor.value) {
    const colorData = {
      hex: selectedColor.value.hex,
      chinese: `自定义颜色 ${selectedColor.value.hex}`,
      english: `Custom Color ${selectedColor.value.hex}`,
      rgb: selectedColor.value.rgb,
      category: '自定义'
    }
    
    favoriteStore.addToFavorites(colorData)
    uiStore.showToast('已添加到收藏', 'success')
  }
}

const copyColor = () => {
  if (selectedColor.value) {
    navigator.clipboard.writeText(selectedColor.value.hex)
    uiStore.showToast('颜色代码已复制', 'success')
  }
}

const findSimilar = () => {
  if (selectedColor.value) {
    // 跳转到搜索页面，搜索相似颜色
    uiStore.showToast('查找相似颜色功能待开发', 'info')
  }
}

const saveScheme = () => {
  if (generatedScheme.value.length > 0) {
    const scheme = {
      name: `配色方案 ${new Date().toLocaleString()}`,
      colors: generatedScheme.value,
      type: currentScheme.value,
      createdAt: new Date().toISOString()
    }
    
    favoriteStore.addScheme(scheme)
    uiStore.showToast('配色方案已保存', 'success')
  }
}

const exportScheme = () => {
  if (generatedScheme.value.length > 0) {
    const data = {
      scheme: generatedScheme.value,
      type: currentScheme.value,
      parameters: {
        wheelType: wheelType.value,
        saturation: saturation.value,
        lightness: lightness.value
      }
    }
    
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })
    const url = URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url
    a.download = `color-scheme-${Date.now()}.json`
    document.body.appendChild(a)
    a.click()
    document.body.removeChild(a)
    URL.revokeObjectURL(url)
    
    uiStore.showToast('配色方案已导出', 'success')
  }
}

// 工具函数
const hslToHex = (h, s, l) => {
  const hDecimal = h / 360
  const sDecimal = s / 100
  const lDecimal = l / 100
  
  const c = (1 - Math.abs(2 * lDecimal - 1)) * sDecimal
  const x = c * (1 - Math.abs((hDecimal * 6) % 2 - 1))
  const m = lDecimal - c / 2
  
  let r, g, b
  
  if (hDecimal < 1/6) {
    r = c; g = x; b = 0
  } else if (hDecimal < 2/6) {
    r = x; g = c; b = 0
  } else if (hDecimal < 3/6) {
    r = 0; g = c; b = x
  } else if (hDecimal < 4/6) {
    r = 0; g = x; b = c
  } else if (hDecimal < 5/6) {
    r = x; g = 0; b = c
  } else {
    r = c; g = 0; b = x
  }
  
  r = Math.round((r + m) * 255)
  g = Math.round((g + m) * 255)
  b = Math.round((b + m) * 255)
  
  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`
}

const hexToRgb = (hex) => {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex)
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null
}

const rgbToHsl = (r, g, b) => {
  r /= 255
  g /= 255
  b /= 255
  
  const max = Math.max(r, g, b)
  const min = Math.min(r, g, b)
  let h, s, l = (max + min) / 2
  
  if (max === min) {
    h = s = 0
  } else {
    const d = max - min
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min)
    
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break
      case g: h = (b - r) / d + 2; break
      case b: h = (r - g) / d + 4; break
    }
    h /= 6
  }
  
  return {
    h: Math.round(h * 360),
    s: Math.round(s * 100),
    l: Math.round(l * 100)
  }
}

// 生命周期
onMounted(() => {
  document.title = '色环选色 - 时装设计师颜色管理系统'
  
  nextTick(() => {
    if (wheelWrapper.value) {
      // 初始化色环
      updateWheel()
    }
  })
})
</script>

<style lang="scss" scoped>
.wheel-view {
  min-height: 100vh;
  background: #f8f9fa;
}

.wheel-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.wheel-header {
  text-align: center;
  margin-bottom: 2rem;
  
  .wheel-title {
    font-size: 2rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 0.5rem;
  }
  
  .wheel-subtitle {
    font-size: 1.125rem;
    color: #6b7280;
    max-width: 600px;
    margin: 0 auto;
  }
}

.wheel-content {
  display: grid;
  grid-template-columns: 300px 1fr 300px;
  gap: 2rem;
  
  @media (max-width: 1200px) {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
}

.wheel-controls,
.results-panel {
  background: white;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.control-section {
  margin-bottom: 2rem;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.section-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 1rem;
}

.control-group {
  margin-bottom: 1rem;
}

.control-label {
  display: block;
  font-size: 0.875rem;
  font-weight: 500;
  color: #374151;
  margin-bottom: 0.5rem;
}

.radio-group {
  display: flex;
  gap: 1rem;
}

.radio-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  
  input[type="radio"] {
    accent-color: #3498db;
  }
  
  span {
    font-size: 0.875rem;
    color: #374151;
  }
}

.slider-container {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.slider {
  flex: 1;
  height: 6px;
  background: #e5e7eb;
  border-radius: 3px;
  outline: none;
  
  &::-webkit-slider-thumb {
    appearance: none;
    width: 18px;
    height: 18px;
    background: #3498db;
    border-radius: 50%;
    cursor: pointer;
  }
  
  &::-moz-range-thumb {
    width: 18px;
    height: 18px;
    background: #3498db;
    border-radius: 50%;
    cursor: pointer;
    border: none;
  }
}

.slider-value {
  font-size: 0.875rem;
  font-weight: 500;
  color: #374151;
  min-width: 40px;
}

.scheme-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.5rem;
}

.scheme-btn {
  padding: 0.5rem 0.75rem;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: #e5e7eb;
  }
  
  &.active {
    background: #3498db;
    border-color: #3498db;
    color: white;
  }
}

.wheel-area {
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.wheel-wrapper {
  position: relative;
}

.color-wheel-svg {
  cursor: pointer;
}

.wheel-segment {
  transition: all 0.2s;
  
  &:hover {
    stroke: #fff;
    stroke-width: 2;
  }
}

.wheel-labels {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.wheel-label {
  position: absolute;
  font-size: 0.75rem;
  font-weight: 500;
  color: #6b7280;
  background: rgba(255, 255, 255, 0.9);
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  border: 1px solid #e5e7eb;
}

.selected-color-info {
  .color-preview-large {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    
    .color-block {
      width: 60px;
      height: 60px;
      border-radius: 0.5rem;
      border: 2px solid #e5e7eb;
    }
    
    .color-details {
      flex: 1;
      
      .color-hex {
        font-size: 1rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 0.25rem;
      }
      
      .color-hsl,
      .color-rgb {
        font-size: 0.75rem;
        color: #6b7280;
        font-family: 'Monaco', 'Menlo', monospace;
      }
    }
  }
}

.color-actions {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.action-btn {
  padding: 0.5rem 0.75rem;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  background: white;
  font-size: 0.875rem;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: #f9fafb;
    border-color: #d1d5db;
  }
  
  &.favorite-btn:hover {
    background: #fef2f2;
    border-color: #fecaca;
    color: #dc2626;
  }
  
  &.copy-btn:hover {
    background: #eff6ff;
    border-color: #bfdbfe;
    color: #2563eb;
  }
  
  &.similar-btn:hover {
    background: #f0fdf4;
    border-color: #bbf7d0;
    color: #16a34a;
  }
}

.no-selection {
  text-align: center;
  padding: 2rem 1rem;
  color: #9ca3af;
  
  p {
    margin: 0;
    font-size: 0.875rem;
  }
}

.scheme-preview {
  margin-bottom: 2rem;
}

.scheme-colors {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.scheme-color {
  aspect-ratio: 1;
  border-radius: 0.5rem;
  border: 2px solid #e5e7eb;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
  
  &:hover {
    border-color: #3498db;
    transform: scale(1.05);
  }
  
  .scheme-color-info {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 0.25rem;
    font-size: 0.625rem;
    text-align: center;
    
    .color-hex {
      font-weight: 600;
      margin-bottom: 0.125rem;
    }
    
    .color-name {
      font-size: 0.5rem;
      opacity: 0.8;
    }
  }
}

.scheme-actions {
  display: flex;
  gap: 0.5rem;
  
  .action-btn {
    flex: 1;
  }
  
  .save-btn:hover {
    background: #f0fdf4;
    border-color: #bbf7d0;
    color: #16a34a;
  }
  
  .export-btn:hover {
    background: #fefbf2;
    border-color: #fde68a;
    color: #d97706;
  }
}

.usage-guide {
  .guide-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .guide-item {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    
    .guide-icon {
      width: 24px;
      height: 24px;
      background: #3498db;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 600;
      flex-shrink: 0;
    }
    
    .guide-text {
      flex: 1;
      
      h4 {
        font-size: 0.875rem;
        font-weight: 600;
        color: #1f2937;
        margin: 0 0 0.25rem 0;
      }
      
      p {
        font-size: 0.75rem;
        color: #6b7280;
        margin: 0;
        line-height: 1.4;
      }
    }
  }
}

@media (max-width: 1200px) {
  .wheel-content {
    .wheel-controls,
    .results-panel {
      padding: 1rem;
    }
    
    .wheel-area {
      padding: 1rem;
    }
  }
  
  .scheme-buttons {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .wheel-container {
    padding: 1rem;
  }
  
  .wheel-header {
    .wheel-title {
      font-size: 1.5rem;
    }
    
    .wheel-subtitle {
      font-size: 1rem;
    }
  }
  
  .control-section {
    margin-bottom: 1.5rem;
  }
  
  .radio-group {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .scheme-colors {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .scheme-actions {
    flex-direction: column;
  }
  
  .color-actions {
    .action-btn {
      text-align: center;
    }
  }
}
</style>

=== FILE: src\views\FavoritesView.vue ===
// ===== src/views/FavoritesView.vue =====
<template>
  <div class="favorites-view">
    <!-- 页面头部 -->
    <div class="favorites-view__header">
      <h1 class="favorites-view__title">我的收藏</h1>
      <p class="favorites-view__subtitle">
        管理您收藏的颜色和配色方案
      </p>
      
      <!-- 统计信息 -->
      <div class="favorites-view__stats">
        <div class="stat-card">
          <div class="stat-card__number">{{ favoriteStore.favoriteCount }}</div>
          <div class="stat-card__label">收藏颜色</div>
        </div>
        <div class="stat-card">
          <div class="stat-card__number">{{ favoriteStore.schemeCount }}</div>
          <div class="stat-card__label">配色方案</div>
        </div>
      </div>
    </div>

    <!-- 操作工具栏 -->
    <div class="favorites-view__toolbar" v-if="favoriteStore.favoriteCount > 0">
      <div class="toolbar-left">
        <BaseButton
          @click="showCreateScheme = true"
          variant="primary"
          :disabled="selectedColors.length === 0"
        >
          <PlusIcon class="w-4 h-4 mr-2" />
          创建配色方案
        </BaseButton>
        
        <BaseButton
          @click="exportFavorites"
          variant="secondary"
          outline
        >
          <ArrowDownTrayIcon class="w-4 h-4 mr-2" />
          导出收藏
        </BaseButton>
      </div>
      
      <div class="toolbar-right">
        <button
          @click="toggleSelectMode"
          :class="[
            'select-mode-toggle',
            { 'select-mode-toggle--active': selectMode }
          ]"
        >
          {{ selectMode ? '取消选择' : '批量选择' }}
        </button>
        
        <div class="view-toggle">
          <button
            @click="viewMode = 'grid'"
            :class="{ active: viewMode === 'grid' }"
          >
            <Squares2X2Icon class="w-4 h-4" />
          </button>
          <button
            @click="viewMode = 'list'"
            :class="{ active: viewMode === 'list' }"
          >
            <ListBulletIcon class="w-4 h-4" />
          </button>
        </div>
      </div>
    </div>

    <!-- 内容区域 -->
    <div class="favorites-view__content">
      <!-- 空状态 -->
      <div v-if="favoriteStore.favoriteCount === 0" class="empty-state">
        <div class="empty-state__icon">
          <HeartIcon class="w-16 h-16 text-gray-300" />
        </div>
        <h3 class="empty-state__title">还没有收藏任何颜色</h3>
        <p class="empty-state__text">
          在颜色搜索页面点击心形图标来收藏您喜欢的颜色
        </p>
        <BaseButton @click="$router.push('/')" variant="primary">
          <MagnifyingGlassIcon class="w-4 h-4 mr-2" />
          去搜索颜色
        </BaseButton>
      </div>

      <!-- 收藏的颜色 -->
      <div v-else>
        <!-- 配色方案列表 -->
        <div v-if="favoriteStore.schemeCount > 0" class="schemes-section">
          <h2 class="section-title">我的配色方案</h2>
          <div class="schemes-grid">
            <ColorSchemeCard
              v-for="scheme in favoriteStore.colorSchemes"
              :key="scheme.id"
              :scheme="scheme"
              @edit="editScheme"
              @delete="deleteScheme"
              @view="viewScheme"
            />
          </div>
        </div>

        <!-- 收藏颜色列表 -->
        <div class="colors-section">
          <h2 class="section-title">
            收藏的颜色
            <span class="section-count">({{ favoriteStore.favoriteCount }})</span>
          </h2>
          
          <!-- 网格视图 -->
          <div v-if="viewMode === 'grid'" class="colors-grid">
            <FavoriteColorCard
              v-for="color in favoriteStore.favoriteColors"
              :key="color.hex"
              :color="color"
              :select-mode="selectMode"
              :selected="selectedColors.includes(color.hex)"
              @toggle-select="toggleColorSelect"
              @remove="removeFavorite"
              @view-details="viewColorDetails"
            />
          </div>
          
          <!-- 列表视图 -->
          <div v-else class="colors-list">
            <FavoriteColorRow
              v-for="color in favoriteStore.favoriteColors"
              :key="color.hex"
              :color="color"
              :select-mode="selectMode"
              :selected="selectedColors.includes(color.hex)"
              @toggle-select="toggleColorSelect"
              @remove="removeFavorite"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- 创建配色方案弹窗 -->
    <CreateSchemeModal
      v-if="showCreateScheme"
      :colors="selectedColorObjects"
      @close="showCreateScheme = false"
      @created="handleSchemeCreated"
    />

    <!-- 颜色详情弹窗 -->
    <ColorDetailModal
      v-if="selectedColor"
      :color="selectedColor"
      @close="selectedColor = null"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'
import {
  HeartIcon,
  MagnifyingGlassIcon,
  PlusIcon,
  ArrowDownTrayIcon,
  Squares2X2Icon,
  ListBulletIcon
} from '@heroicons/vue/24/outline'

import BaseButton from '@components/common/BaseButton.vue'
import FavoriteColorCard from '@components/favorites/FavoriteColorCard.vue'
import FavoriteColorRow from '@components/favorites/FavoriteColorRow.vue'
import ColorSchemeCard from '@components/favorites/ColorSchemeCard.vue'
import CreateSchemeModal from '@components/favorites/CreateSchemeModal.vue'
import ColorDetailModal from '@components/color/ColorDetailModal.vue'

const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

// 响应式数据
const viewMode = ref('grid') // grid 或 list
const selectMode = ref(false)
const selectedColors = ref([])
const showCreateScheme = ref(false)
const selectedColor = ref(null)

// 计算属性
const selectedColorObjects = computed(() => {
  return favoriteStore.favoriteColors.filter(color => 
    selectedColors.value.includes(color.hex)
  )
})

// 方法
const toggleSelectMode = () => {
  selectMode.value = !selectMode.value
  if (!selectMode.value) {
    selectedColors.value = []
  }
}

const toggleColorSelect = (hex) => {
  const index = selectedColors.value.indexOf(hex)
  if (index > -1) {
    selectedColors.value.splice(index, 1)
  } else {
    selectedColors.value.push(hex)
  }
}

const removeFavorite = (color) => {
  favoriteStore.removeFromFavorites(color.hex)
  uiStore.showToast(`已移除 ${color.chinese}`, 'success')
}

const viewColorDetails = (color) => {
  selectedColor.value = color
}

const editScheme = (scheme) => {
  // TODO: 实现编辑配色方案
  console.log('编辑方案:', scheme)
}

const deleteScheme = (scheme) => {
  favoriteStore.deleteScheme(scheme.id)
  uiStore.showToast(`已删除方案 ${scheme.name}`, 'success')
}

const viewScheme = (scheme) => {
  favoriteStore.setCurrentScheme(scheme)
  // TODO: 跳转到方案详情页
}

const handleSchemeCreated = (scheme) => {
  showCreateScheme.value = false
  selectedColors.value = []
  selectMode.value = false
  uiStore.showToast(`配色方案 ${scheme.name} 创建成功`, 'success')
}

const exportFavorites = () => {
  const data = favoriteStore.exportData()
  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })
  const url = URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = `favorites-${new Date().toISOString().split('T')[0]}.json`
  document.body.appendChild(a)
  a.click()
  document.body.removeChild(a)
  URL.revokeObjectURL(url)
  
  uiStore.showToast('收藏数据已导出', 'success')
}
</script>

<style lang="scss" scoped>
.favorites-view {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
  
  &__header {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  &__title {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 1rem;
    
    @media (max-width: 640px) {
      font-size: 2rem;
    }
  }
  
  &__subtitle {
    font-size: 1.125rem;
    color: #6b7280;
    margin-bottom: 2rem;
  }
  
  &__stats {
    display: flex;
    justify-content: center;
    gap: 2rem;
    
    @media (max-width: 640px) {
      gap: 1rem;
    }
  }
  
  &__toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding: 1rem;
    background: white;
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    
    @media (max-width: 768px) {
      flex-direction: column;
      gap: 1rem;
      align-items: stretch;
    }
  }
  
  &__content {
    min-height: 400px;
  }
}

.stat-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  text-align: center;
  min-width: 120px;
  
  &__number {
    font-size: 2rem;
    font-weight: 700;
    color: #3498db;
    margin-bottom: 0.5rem;
  }
  
  &__label {
    font-size: 0.875rem;
    color: #6b7280;
  }
}

.toolbar-left,
.toolbar-right {
  display: flex;
  align-items: center;
  gap: 1rem;
  
  @media (max-width: 768px) {
    justify-content: center;
  }
}

.select-mode-toggle {
  padding: 0.5rem 1rem;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  background: white;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    border-color: #3498db;
    color: #3498db;
  }
  
  &--active {
    background: #3498db;
    border-color: #3498db;
    color: white;
  }
}

.view-toggle {
  display: flex;
  border: 1px solid #d1d5db;
  border-radius: 0.5rem;
  overflow: hidden;
  
  button {
    padding: 0.5rem;
    background: white;
    border: none;
    cursor: pointer;
    color: #6b7280;
    transition: all 0.2s;
    
    &:hover {
      background: #f9fafb;
    }
    
    &.active {
      background: #3498db;
      color: white;
    }
  }
}

.empty-state {
  text-align: center;
  padding: 4rem 2rem;
  background: white;
  border-radius: 1rem;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  
  &__icon {
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: center;
  }
  
  &__title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 1rem;
  }
  
  &__text {
    color: #6b7280;
    margin-bottom: 2rem;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
  }
}

.schemes-section,
.colors-section {
  margin-bottom: 3rem;
}

.section-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.section-count {
  font-size: 0.875rem;
  color: #6b7280;
  font-weight: 400;
}

.schemes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
}

.colors-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1.5rem;
  
  @media (max-width: 640px) {
    grid-template-columns: 1fr;
  }
}

.colors-list {
  background: white;
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}
</style>

=== FILE: src\views\LoginView.vue ===
<template>
  <div class="login-view">
    <div class="login-container">
      <!-- 背景装饰 -->
      <div class="login-background">
        <div class="color-circles">
          <div class="circle circle-1" style="background: #ff6b6b;"></div>
          <div class="circle circle-2" style="background: #4ecdc4;"></div>
          <div class="circle circle-3" style="background: #45b7d1;"></div>
          <div class="circle circle-4" style="background: #96ceb4;"></div>
          <div class="circle circle-5" style="background: #ffeaa7;"></div>
        </div>
      </div>
      
      <!-- 登录表单 -->
      <div class="login-card">
        <!-- Logo 和标题 -->
        <div class="login-header">
          <div class="login-logo">
            <ColorSwatchIcon class="logo-icon" />
          </div>
          <h1 class="login-title">Fashion Color</h1>
          <p class="login-subtitle">时装设计师颜色管理系统</p>
        </div>
        
        <!-- 登录表单 -->
        <form @submit.prevent="handleLogin" class="login-form">
          <div class="form-group">
            <label for="username" class="form-label">用户名</label>
            <div class="input-wrapper">
              <UserIcon class="input-icon" />
              <input
                id="username"
                v-model="credentials.username"
                type="text"
                placeholder="请输入用户名"
                class="form-input"
                :class="{ 'form-input--error': errors.username }"
                required
              />
            </div>
            <div v-if="errors.username" class="error-message">{{ errors.username }}</div>
          </div>
          
          <div class="form-group">
            <label for="password" class="form-label">密码</label>
            <div class="input-wrapper">
              <LockClosedIcon class="input-icon" />
              <input
                id="password"
                v-model="credentials.password"
                :type="showPassword ? 'text' : 'password'"
                placeholder="请输入密码"
                class="form-input"
                :class="{ 'form-input--error': errors.password }"
                required
              />
              <button
                type="button"
                @click="showPassword = !showPassword"
                class="password-toggle"
              >
                <EyeIcon v-if="showPassword" class="toggle-icon" />
                <EyeSlashIcon v-else class="toggle-icon" />
              </button>
            </div>
            <div v-if="errors.password" class="error-message">{{ errors.password }}</div>
          </div>
          
          <!-- 记住我和忘记密码 -->
          <div class="form-options">
            <label class="checkbox-wrapper">
              <input
                v-model="credentials.rememberMe"
                type="checkbox"
                class="checkbox-input"
              />
              <span class="checkbox-label">记住我</span>
            </label>
            
            <button type="button" class="forgot-password" @click="showForgotPassword = true">
              忘记密码？
            </button>
          </div>
          
          <!-- 错误提示 -->
          <div v-if="loginError" class="login-error">
            <ExclamationCircleIcon class="error-icon" />
            {{ loginError }}
          </div>
          
          <!-- 登录按钮 -->
          <button
            type="submit"
            :disabled="isLoading"
            class="login-button"
            :class="{ 'login-button--loading': isLoading }"
          >
            <ArrowPathIcon v-if="isLoading" class="loading-icon" />
            <span>{{ isLoading ? '登录中...' : '登录' }}</span>
          </button>
        </form>
        
        <!-- 快速登录提示 -->
        <div class="quick-login">
          <p class="quick-login-title">快速体验</p>
          <div class="demo-accounts">
            <button @click="fillDemoAccount('designer')" class="demo-account">
              <UserIcon class="demo-icon" />
              设计师账号
            </button>
            <button @click="fillDemoAccount('admin')" class="demo-account">
              <CogIcon class="demo-icon" />
              管理员账号
            </button>
          </div>
        </div>
        
        <!-- 版本信息 -->
        <div class="login-footer">
          <p>© 2024 Fashion Color Management System v1.0.0</p>
        </div>
      </div>
    </div>
    
    <!-- 忘记密码弹窗 -->
    <div v-if="showForgotPassword" class="modal-overlay" @click="showForgotPassword = false">
      <div class="forgot-modal" @click.stop>
        <div class="modal-header">
          <h3>重置密码</h3>
          <button @click="showForgotPassword = false" class="modal-close">
            <XMarkIcon class="close-icon" />
          </button>
        </div>
        <div class="modal-content">
          <p>请联系系统管理员重置密码，或使用以下演示账号：</p>
          <div class="demo-info">
            <div class="demo-item">
              <strong>设计师账号:</strong> designer / fashion123
            </div>
            <div class="demo-item">
              <strong>管理员账号:</strong> admin / admin123
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <button @click="showForgotPassword = false" class="modal-button">
            我知道了
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { useUserStore } from '@stores/userStore'
import { useUIStore } from '@stores/uiStore'
import {
  ColorSwatchIcon, UserIcon, LockClosedIcon, EyeIcon, EyeSlashIcon,
  ExclamationCircleIcon, ArrowPathIcon, CogIcon, XMarkIcon
} from '@heroicons/vue/24/outline'

const router = useRouter()
const userStore = useUserStore()
const uiStore = useUIStore()

const credentials = reactive({
  username: '',
  password: '',
  rememberMe: false
})

const errors = reactive({
  username: '',
  password: ''
})

const showPassword = ref(false)
const isLoading = ref(false)
const loginError = ref('')
const showForgotPassword = ref(false)

const validateForm = () => {
  errors.username = ''
  errors.password = ''
  loginError.value = ''
  
  if (!credentials.username.trim()) {
    errors.username = '请输入用户名'
    return false
  }
  
  if (!credentials.password.trim()) {
    errors.password = '请输入密码'
    return false
  }
  
  if (credentials.password.length < 6) {
    errors.password = '密码至少需要6位字符'
    return false
  }
  
  return true
}

const handleLogin = async () => {
  if (!validateForm()) return
  
  isLoading.value = true
  loginError.value = ''
  
  try {
    const result = await userStore.login(credentials)
    
    if (result.success) {
      uiStore.showMessage(`欢迎回来，${result.user.name}！`, 'success')
      
      // 登录成功后跳转
      const redirectTo = router.currentRoute.value.query.redirect || '/'
      router.push(redirectTo)
    } else {
      loginError.value = result.error
      // 清空密码
      credentials.password = ''
    }
  } catch (error) {
    loginError.value = '登录时发生错误，请重试'
    console.error('登录错误:', error)
  } finally {
    isLoading.value = false
  }
}

const fillDemoAccount = (type) => {
  if (type === 'designer') {
    credentials.username = 'designer'
    credentials.password = 'fashion123'
  } else if (type === 'admin') {
    credentials.username = 'admin'
    credentials.password = 'admin123'
  }
  credentials.rememberMe = true
}

onMounted(() => {
  document.title = '登录 - Fashion Color 颜色管理系统'
  
  // 如果已经登录，直接跳转
  if (userStore.isAuthenticated) {
    router.push('/')
  }
})
</script>

<style lang="scss" scoped>
.login-view {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 20px;
}

.login-container {
  position: relative;
  width: 100%;
  max-width: 400px;
}

.login-background {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  border-radius: 20px;
  z-index: 0;
}

.color-circles {
  position: relative;
  width: 100%;
  height: 100%;
}

.circle {
  position: absolute;
  border-radius: 50%;
  opacity: 0.6;
  animation: float 6s ease-in-out infinite;
  
  &.circle-1 {
    width: 80px;
    height: 80px;
    top: 10%;
    left: 10%;
    animation-delay: 0s;
  }
  
  &.circle-2 {
    width: 60px;
    height: 60px;
    top: 20%;
    right: 15%;
    animation-delay: 1s;
  }
  
  &.circle-3 {
    width: 100px;
    height: 100px;
    bottom: 20%;
    left: 5%;
    animation-delay: 2s;
  }
  
  &.circle-4 {
    width: 70px;
    height: 70px;
    bottom: 30%;
    right: 10%;
    animation-delay: 3s;
  }
  
  &.circle-5 {
    width: 90px;
    height: 90px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation-delay: 4s;
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px) scale(1);
  }
  50% {
    transform: translateY(-20px) scale(1.1);
  }
}

.login-card {
  position: relative;
  z-index: 1;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.login-header {
  text-align: center;
  margin-bottom: 32px;
}

.login-logo {
  display: flex;
  justify-content: center;
  margin-bottom: 16px;
}

.logo-icon {
  width: 48px;
  height: 48px;
  color: #667eea;
}

.login-title {
  font-size: 28px;
  font-weight: 700;
  color: #1a202c;
  margin: 0 0 8px 0;
}

.login-subtitle {
  font-size: 14px;
  color: #718096;
  margin: 0;
}

.login-form {
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 8px;
  }
  
  .input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }
  
  .input-icon {
    position: absolute;
    left: 12px;
    width: 20px;
    height: 20px;
    color: #9ca3af;
    z-index: 1;
  }
  
  .form-input {
    width: 100%;
    padding: 12px 12px 12px 44px;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    font-size: 16px;
    transition: all 0.2s;
    background: white;
    
    &:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    &--error {
      border-color: #ef4444;
      
      &:focus {
        border-color: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
      }
    }
  }
  
  .password-toggle {
    position: absolute;
    right: 12px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: background 0.2s;
    
    &:hover {
      background: #f3f4f6;
    }
  }
  
  .toggle-icon {
    width: 20px;
    height: 20px;
    color: #6b7280;
  }
}

.form-options {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.checkbox-wrapper {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.checkbox-input {
  margin-right: 8px;
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.checkbox-label {
  font-size: 14px;
  color: #374151;
  cursor: pointer;
}

.forgot-password {
  background: none;
  border: none;
  color: #667eea;
  font-size: 14px;
  cursor: pointer;
  text-decoration: underline;
  
  &:hover {
    color: #5a67d8;
  }
}

.error-message {
  color: #ef4444;
  font-size: 12px;
  margin-top: 4px;
}

.login-error {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #fef2f2;
  border: 1px solid #fecaca;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 20px;
  color: #dc2626;
  font-size: 14px;
  
  .error-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }
}

.login-button {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  margin-bottom: 24px;
  
  &:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
  }
  
  &:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }
  
  &--loading {
    cursor: not-allowed;
  }
}

.loading-icon {
  width: 20px;
  height: 20px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.quick-login {
  text-align: center;
  margin-bottom: 24px;
  
  &-title {
    font-size: 14px;
    color: #6b7280;
    margin-bottom: 12px;
  }
}

.demo-accounts {
  display: flex;
  gap: 8px;
}

.demo-account {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  color: #475569;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
  }
  
  .demo-icon {
    width: 14px;
    height: 14px;
  }
}

.login-footer {
  text-align: center;
  
  p {
    font-size: 12px;
    color: #9ca3af;
    margin: 0;
  }
}

// 忘记密码弹窗
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.forgot-modal {
  background: white;
  border-radius: 16px;
  max-width: 400px;
  width: 100%;
  max-height: 90vh;
  overflow: hidden;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid #e5e7eb;
  
  h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #111827;
  }
}

.modal-close {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  
  &:hover {
    background: #f3f4f6;
  }
}

.close-icon {
  width: 20px;
  height: 20px;
  color: #6b7280;
}

.modal-content {
  padding: 24px;
  
  p {
    margin: 0 0 16px 0;
    color: #374151;
    line-height: 1.6;
  }
}

.demo-info {
  background: #f8fafc;
  border-radius: 8px;
  padding: 16px;
  font-family: monospace;
}

.demo-item {
  margin-bottom: 8px;
  font-size: 14px;
  color: #475569;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.modal-actions {
  padding: 16px 24px;
  border-top: 1px solid #e5e7eb;
}

.modal-button {
  width: 100%;
  padding: 10px;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  
  &:hover {
    background: #5a67d8;
  }
}

@media (max-width: 480px) {
  .login-card {
    padding: 24px;
  }
  
  .demo-accounts {
    flex-direction: column;
  }
}
</style>

=== FILE: src\views\ProfileView.vue ===
</script>

<style lang="scss" scoped>
.profile-view {
  min-height: 100vh;
  background: #f8fafc;
}

.profile-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.profile-header {
  background: white;
  border-radius: 16px;
  padding: 32px;
  margin-bottom: 24px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.header-content {
  display: flex;
  align-items: center;
  gap: 24px;
  
  @media (max-width: 768px) {
    flex-direction: column;
    text-align: center;
  }
}

.user-avatar {
  position: relative;
  flex-shrink: 0;
}

.avatar-image, .avatar-placeholder {
  width: 96px;
  height: 96px;
  border-radius: 50%;
  object-fit: cover;
  color: #9ca3af;
}

.avatar-edit {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #3b82f6;
  border: 2px solid white;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
  
  &:hover {
    background: #2563eb;
  }
}

.edit-icon {
  width: 16px;
  height: 16px;
}

.user-info {
  flex: 1;
}

.user-name {
  font-size: 32px;
  font-weight: 700;
  color: #111827;
  margin: 0 0 8px 0;
}

.user-role {
  font-size: 18px;
  color: #3b82f6;
  font-weight: 500;
  margin: 0 0 4px 0;
}

.user-email {
  font-size: 14px;
  color: #6b7280;
  margin: 0 0 16px 0;
}

.user-stats {
  display: flex;
  gap: 24px;
  
  @media (max-width: 768px) {
    justify-content: center;
  }
}

.stat-item {
  .stat-label {
    font-size: 12px;
    color: #6b7280;
    margin-right: 8px;
  }
  
  .stat-value {
    font-size: 14px;
    font-weight: 500;
    color: #374151;
  }
}

.profile-content {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 24px;
  
  @media (max-width: 1024px) {
    grid-template-columns: 1fr;
  }
}

.profile-sidebar {
  background: white;
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  height: fit-content;
  
  @media (max-width: 1024px) {
    padding: 16px;
  }
}

.profile-nav {
  display: flex;
  flex-direction: column;
  gap: 4px;
  
  @media (max-width: 1024px) {
    flex-direction: row;
    overflow-x: auto;
  }
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border: none;
  background: none;
  border-radius: 8px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
  color: #6b7280;
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  
  &:hover {
    background: #f3f4f6;
    color: #374151;
  }
  
  &--active {
    background: #dbeafe;
    color: #2563eb;
  }
}

.nav-icon {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

.profile-main {
  background: white;
  border-radius: 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.tab-content {
  padding: 32px;
  
  @media (max-width: 768px) {
    padding: 20px;
  }
}

.section-card {
  margin-bottom: 32px;
  
  &:last-child {
    margin-bottom: 0;
  }
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  
  @media (max-width: 768px) {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }
}

.section-title {
  font-size: 20px;
  font-weight: 600;
  color: #111827;
  margin: 0;
}

.edit-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  color: #374151;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.2s;
  
  &:hover {
    background: #e5e7eb;
  }
}

.btn-icon {
  width: 16px;
  height: 16px;
}

.profile-form {
  .form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
  }
  
  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .form-label {
    font-size: 14px;
    font-weight: 500;
    color: #374151;
  }
  
  .form-input, .form-select, .form-textarea {
    padding: 12px 16px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    transition: border-color 0.2s;
    
    &:focus {
      outline: none;
      border-color: #3b82f6;
    }
    
    &:disabled {
      background: #f9fafb;
      color: #6b7280;
      cursor: not-allowed;
    }
  }
  
  .form-textarea {
    resize: vertical;
    min-height: 100px;
  }
  
  .form-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
  }
  
  .save-button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: #3b82f6;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
    
    &:hover {
      background: #2563eb;
    }
  }
  
  .cancel-button {
    padding: 12px 24px;
    background: #f3f4f6;
    color: #374151;
    border: none;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
    
    &:hover {
      background: #e5e7eb;
    }
  }
}

// 偏好设置样式
.preferences-grid {
  display: grid;
  gap: 32px;
}

.pref-group {
  .pref-title {
    font-size: 16px;
    font-weight: 600;
    color: #111827;
    margin: 0 0 16px 0;
    padding-bottom: 8px;
    border-bottom: 2px solid #f3f4f6;
  }
}

.pref-items {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.pref-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  
  @media (max-width: 768px) {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
}

.pref-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
}

.pref-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.pref-select {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  background: white;
  min-width: 120px;
  
  &:focus {
    outline: none;
    border-color: #3b82f6;
  }
}

// 活动记录样式
.activity-filters {
  .filter-select {
    padding: 8px 12px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
  }
}

.activity-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.activity-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: #f8fafc;
  border-radius: 8px;
  border-left: 4px solid #3b82f6;
}

.activity-icon {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  
  .icon {
    width: 20px;
    height: 20px;
    color: #3b82f6;
  }
}

.activity-content {
  flex: 1;
}

.activity-description {
  font-size: 14px;
  font-weight: 500;
  color: #111827;
  margin-bottom: 4px;
}

.activity-time {
  font-size: 12px;
  color: #6b7280;
}

.activity-details {
  font-size: 12px;
  color: #374151;
  background: white;
  padding: 4px 8px;
  border-radius: 4px;
  border: 1px solid #e5e7eb;
}

// 统计数据样式
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 32px;
}

.stat-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 24px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 12px;
  color: white;
}

.stat-icon {
  width: 48px;
  height: 48px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  .icon {
    width: 24px;
    height: 24px;
  }
}

.stat-content {
  flex: 1;
}

.stat-number {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 4px;
}

.stat-label {
  font-size: 14px;
  opacity: 0.9;
}

// 分类统计样式
.category-stats {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.category-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.category-bar {
  flex: 1;
  height: 8px;
  background: #f3f4f6;
  border-radius: 4px;
  overflow: hidden;
}

.category-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.category-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-width: 120px;
  font-size: 14px;
}

.category-name {
  color: #374151;
}

.category-count {
  font-weight: 600;
  color: #111827;
}

@media (max-width: 768px) {
  .profile-container {
    padding: 16px;
  }
  
  .profile-header {
    padding: 20px;
  }
  
  .user-name {
    font-size: 24px;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .stat-card {
    padding: 16px;
  }
}
</style><template>
  <div class="profile-view">
    <MainNav />

=== FILE: src\views\SearchView.vue ===
<!-- 完整的 SearchView.vue 文件 -->
<template>
  <div class="search-view">
    <!-- 顶部导航栏 -->
    <nav class="top-nav">
      <div class="nav-content">
        <h1 class="nav-title">时装设计师颜色管理系统</h1>
        <div class="nav-actions">
          <!-- 收藏计数 -->
          <button @click="showFavorites" class="favorites-btn">
            <HeartIcon class="heart-icon" :class="{ 'has-favorites': favoriteStore.favorites.length > 0 }" />
            <span v-if="favoriteStore.favorites.length > 0" class="favorites-count">
              {{ favoriteStore.favorites.length }}
            </span>
          </button>
          <!-- 登录按钮 -->
          <button @click="handleLogin" class="login-btn">
            登录
          </button>
        </div>
      </div>
    </nav>

    <!-- 页面标题 -->
    <div class="search-view__header">
      <h1 class="search-view__title">颜色搜索与发现</h1>
      <p class="search-view__subtitle">
        智能搜索 {{ colorStore.colorCount.total }} 个专业颜色，
        包含 {{ colorStore.colorCount.withGuofeng }} 个国风传统色彩
      </p>
    </div>
    
    <!-- 搜索区域 -->
    <div class="search-view__search">
      <SearchBar />
      <FilterPanel />
    </div>
    
    <!-- 结果统计和排序 -->
    <div class="search-view__controls" v-if="!colorStore.isLoading">
      <div class="search-view__stats">
        找到 <strong>{{ colorStore.filteredColors.length }}</strong> 个颜色
      </div>
      
      <div class="search-view__sort">
        <SortControls />
      </div>
    </div>
    
    <!-- 加载状态 -->
    <div v-if="colorStore.isLoading" class="fixed-loading-state">
      <div class="fixed-loading-spinner"></div>
      <p>正在加载颜色数据...</p>
    </div>
    
    <!-- 修复后的颜色网格 -->
    <div v-else class="fixed-color-grid">
      <div 
        v-for="color in displayColors" 
        :key="color.hex"
        class="fixed-color-card"
        @click="showColorDetail(color)"
        @mouseenter="hoveredCard = color.hex"
        @mouseleave="hoveredCard = null"
      >
        <!-- 色块 -->
        <div 
          class="fixed-color-block"
          :style="{ backgroundColor: color.hex }"
          :title="`点击查看 ${color.chinese} 详细信息`"
        >
          <!-- 修复后的收藏按钮 -->
          <button
            @click.stop="toggleFavorite(color)"
            class="fixed-favorite-btn"
            :class="{
              'is-favorite': favoriteStore.isFavorite(color.hex),
              'is-hovered': hoveredCard === color.hex && !favoriteStore.isFavorite(color.hex)
            }"
          >
            <HeartIcon class="heart-icon" />
          </button>
        </div>
        
        <!-- 颜色信息 -->
        <div class="fixed-color-info">
          <h3 class="fixed-color-name">{{ color.chinese }}</h3>
          <p class="fixed-color-english">{{ color.english }}</p>
          
          <!-- 国风标识 -->
          <div v-if="color.guofeng && color.guofeng !== 'null'" class="fixed-guofeng-badge">
            国风
          </div>
        </div>
      </div>
    </div>

    <!-- 加载更多按钮 -->
    <div v-if="!colorStore.isLoading && hasMore" class="load-more-section">
      <button 
        @click="loadMore"
        :disabled="loadingMore"
        class="load-more-btn"
      >
        {{ loadingMore ? '加载中...' : '加载更多' }}
      </button>
    </div>
    
    <!-- 空状态 -->
    <div v-if="!colorStore.isLoading && colorStore.filteredColors.length === 0" class="fixed-empty-state">
      <div class="fixed-empty-icon">🎨</div>
      <h3>没有找到匹配的颜色</h3>
      <p>尝试调整搜索条件或筛选选项</p>
      <button @click="clearAllFilters" class="fixed-reset-btn">
        重置筛选
      </button>
    </div>
    
    <!-- 颜色详情弹窗 -->
    <ColorDetailModal 
      v-if="selectedColor"
      :color="selectedColor"
      @close="selectedColor = null"
      @view-color="showColorDetail"
    />

    <!-- 收藏页面弹窗 -->
    <FavoritesModal 
      v-if="showFavoritesModal"
      @close="showFavoritesModal = false"
    />

    <!-- 登录弹窗 -->
    <LoginModal 
      v-if="showLoginModal"
      @close="showLoginModal = false"
      @login="handleLoginSuccess"
    />
  </div>
</template>

<script setup>
import { ref, computed, onMounted, watch } from 'vue'
import { useColorStore } from '@stores/colorStore'
import { useFavoriteStore } from '@stores/favoriteStore'
import { useUIStore } from '@stores/uiStore'
import { HeartIcon } from '@heroicons/vue/24/outline'

// 组件导入
import SearchBar from '@components/search/SearchBar.vue'
import FilterPanel from '@components/search/FilterPanel.vue'
import SortControls from '@components/search/SortControls.vue'
import ColorDetailModal from '@components/color/ColorDetailModal.vue'
// 注意：以下组件可能需要创建或调整路径
// import FavoritesModal from '@components/favorites/FavoritesModal.vue'
// import LoginModal from '@components/auth/LoginModal.vue'

// Store
const colorStore = useColorStore()
const favoriteStore = useFavoriteStore()
const uiStore = useUIStore()

// 响应式数据
const selectedColor = ref(null)
const showFavoritesModal = ref(false)
const showLoginModal = ref(false)
const hoveredCard = ref(null) // 追踪悬停的卡片

// 分页相关
const pageSize = 48
const currentPage = ref(1)
const loadingMore = ref(false)
const shuffledColors = ref([])

// 计算显示的颜色
const displayColors = computed(() => {
  // 当筛选条件改变时，重新洗牌
  if (shuffledColors.value.length !== colorStore.filteredColors.length) {
    shuffledColors.value = [...colorStore.filteredColors].sort(() => Math.random() - 0.5)
  }
  
  const start = 0
  const end = currentPage.value * pageSize
  return shuffledColors.value.slice(start, end)
})

const hasMore = computed(() => {
  return displayColors.value.length < colorStore.filteredColors.length
})

// 显示颜色详情
const showColorDetail = (color) => {
  selectedColor.value = color
}

// 收藏功能
const toggleFavorite = (color) => {
  favoriteStore.toggleFavorite(color)
  
  const isFav = favoriteStore.isFavorite(color.hex)
  uiStore.showMessage(
    isFav ? `已收藏 ${color.chinese}` : `已取消收藏 ${color.chinese}`,
    isFav ? 'success' : 'info'
  )
}

// 显示收藏页面
const showFavorites = () => {
  if (favoriteStore.favorites.length === 0) {
    uiStore.showMessage('您还没有收藏任何颜色', 'info')
    return
  }
  showFavoritesModal.value = true
}

// 处理登录
const handleLogin = () => {
  showLoginModal.value = true
}

const handleLoginSuccess = (userInfo) => {
  uiStore.showMessage(`欢迎回来，${userInfo.username}！`, 'success')
  showLoginModal.value = false
}

// 加载更多
const loadMore = async () => {
  loadingMore.value = true
  
  await new Promise(resolve => setTimeout(resolve, 500))
  
  currentPage.value++
  loadingMore.value = false
}

// 清空所有筛选
const clearAllFilters = () => {
  colorStore.clearFilters()
  currentPage.value = 1
  uiStore.showMessage('已重置所有筛选条件', 'info')
}

// 监听筛选变化，重置分页
watch(
  () => colorStore.filteredColors.length,
  () => {
    currentPage.value = 1
    shuffledColors.value = []
  }
)

// 页面初始化
onMounted(() => {
  document.title = '颜色搜索 - 时装设计师颜色管理系统'
  colorStore.loadColors()
})
</script>

<style lang="scss" scoped>
/* 顶部导航栏 */
.top-nav {
  background: white;
  border-bottom: 1px solid #e5e7eb;
  padding: 12px 0;
  margin-bottom: 20px;
}

.nav-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav-title {
  font-size: 18px;
  font-weight: 600;
  color: #111827;
  margin: 0;
}

.nav-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}

.favorites-btn {
  position: relative;
  background: none;
  border: 1px solid #d1d5db;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 6px;
  
  &:hover {
    border-color: #3b82f6;
  }
}

.heart-icon {
  width: 18px;
  height: 18px;
  color: #6b7280;
  
  &.has-favorites {
    color: #ef4444;
    fill: currentColor;
  }
}

.favorites-count {
  background: #ef4444;
  color: white;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 10px;
  min-width: 18px;
  text-align: center;
}

.login-btn {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  
  &:hover {
    background: #2563eb;
  }
}

/* 主要内容样式 */
.search-view {
  min-height: 100vh;
  background: #f8fafc;
  padding: 0 20px 20px;

  @media (max-width: 768px) {
    padding: 0 16px 16px;
  }

  &__header {
    text-align: center;
    margin-bottom: 24px;
  }

  &__title {
    font-size: 28px;
    font-weight: 700;
    color: #111827;
    margin: 0 0 8px 0;

    @media (max-width: 768px) {
      font-size: 22px;
    }
  }

  &__subtitle {
    font-size: 14px;
    color: #6b7280;
    margin: 0;

    @media (max-width: 768px) {
      font-size: 13px;
    }
  }

  &__search {
    max-width: 800px;
    margin: 0 auto 20px auto;
  }

  &__controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 0 4px;

    @media (max-width: 768px) {
      flex-direction: column;
      gap: 12px;
      align-items: flex-start;
    }
  }

  &__stats {
    font-size: 13px;
    color: #6b7280;

    strong {
      color: #111827;
      font-weight: 600;
    }
  }
}

/* 颜色网格样式 */
.fixed-color-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
  margin-bottom: 32px;
  
  @media (max-width: 768px) {
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    gap: 10px;
  }
  
  @media (max-width: 480px) {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 8px;
  }
}

.fixed-color-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
}

.fixed-color-block {
  height: 70px;
  position: relative;
  
  @media (max-width: 480px) {
    height: 60px;
  }
}

/* 修复后的收藏按钮样式 */
.fixed-favorite-btn {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 24px;
  height: 24px;
  border: none;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.25s ease;
  
  /* 默认隐藏 */
  opacity: 0;
  transform: scale(0.8);
  
  /* 已收藏时显示 */
  &.is-favorite {
    opacity: 1;
    transform: scale(1);
    background: rgba(239, 68, 68, 0.15);
    
    .heart-icon {
      color: #ef4444;
      fill: currentColor;
    }
  }
  
  /* 悬停时显示 */
  &.is-hovered {
    opacity: 1;
    transform: scale(1);
  }
  
  &:hover {
    background: rgba(255, 255, 255, 1);
    transform: scale(1.1) !important;
  }
  
  .heart-icon {
    width: 12px;
    height: 12px;
    color: #6b7280;
    transition: all 0.2s ease;
  }
}

.fixed-color-info {
  padding: 8px;
}

.fixed-color-name {
  font-size: 11px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 2px 0;
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.fixed-color-english {
  font-size: 9px;
  color: #6b7280;
  margin: 0;
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.fixed-guofeng-badge {
  display: inline-block;
  background: linear-gradient(135deg, #dc2626, #b91c1c);
  color: white;
  font-size: 8px;
  font-weight: 600;
  padding: 1px 4px;
  border-radius: 3px;
  margin-top: 4px;
}

/* 加载更多 */
.load-more-section {
  text-align: center;
  margin: 40px 0;
}

.load-more-btn {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover:not(:disabled) {
    background: #2563eb;
    transform: translateY(-1px);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
}

/* 加载状态 */
.fixed-loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
  
  p {
    margin: 12px 0 0 0;
    color: #6b7280;
    font-size: 13px;
  }
}

.fixed-loading-spinner {
  width: 32px;
  height: 32px;
  border: 2px solid #e5e7eb;
  border-top: 2px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { 
    transform: rotate(0deg); 
  }
  100% { 
    transform: rotate(360deg); 
  }
}

/* 空状态 */
.fixed-empty-state {
  text-align: center;
  padding: 60px 20px;
  color: #6b7280;
}

.fixed-empty-icon {
  font-size: 40px;
  margin-bottom: 12px;
}

.fixed-empty-state h3 {
  font-size: 16px;
  font-weight: 600;
  color: #111827;
  margin: 0 0 6px 0;
}

.fixed-empty-state p {
  margin: 0 0 20px 0;
  color: #6b7280;
  font-size: 13px;
}

.fixed-reset-btn {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    background: #2563eb;
    transform: translateY(-1px);
  }
}
</style>

=== FILE: test-app\index.html ===
<!-- ===== public/index.html ===== -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="专业时装设计师颜色管理系统，提供智能颜色搜索、配色推荐、色环选择等功能">
    <meta name="keywords" content="时装设计,颜色管理,配色方案,色彩搭配,设计工具,Fashion,Color,Palette">
    <meta name="author" content="Fashion Color App">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="时装设计师颜色管理系统">
    <meta property="og:description" content="专业的颜色管理工具，为时装设计师提供完整的色彩解决方案">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/og-image.png">
    
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="时装设计师颜色管理系统">
    <meta name="twitter:description" content="专业的颜色管理工具，为时装设计师提供完整的色彩解决方案">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#2C3E50">
    <meta name="msapplication-TileColor" content="#2C3E50">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/colors.json" as="fetch" crossorigin="anonymous">
    
    <!-- Fonts (Optional - you can add Google Fonts here) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <title>时装设计师颜色管理系统</title>
    
    <!-- Loading styles -->
    <style>
        #app-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            font-weight: 500;
            opacity: 0.9;
        }
        
        .loading-subtitle {
            font-size: 14px;
            opacity: 0.7;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- 加载中的占位内容 -->
        <div id="app-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">时装设计师颜色管理系统</div>
            <div class="loading-subtitle">正在加载中...</div>
        </div>
    </div>
    
    <script type="module" src="/src/main.js"></script>
    
    <!-- 移除加载屏幕 -->
    <script>
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loading = document.getElementById('app-loading');
                if (loading) {
                    loading.style.opacity = '0';
                    loading.style.transition = 'opacity 0.5s ease';
                    setTimeout(() => {
                        loading.remove();
                    }, 500);
                }
            }, 1000);
        });
    </script>
</body>
</html>

=== FILE: test-app\vite.config.js ===
import { fileURLToPath, URL } from 'node:url'

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import vueDevTools from 'vite-plugin-vue-devtools'

// https://vite.dev/config/
export default defineConfig({
  plugins: [
    vue(),
    vueDevTools(),
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    },
  },
})


=== FILE: test-app\src\App.vue ===
<script setup></script>

<template>
  <h1>You did it!</h1>
  <p>
    Visit <a href="https://vuejs.org/" target="_blank" rel="noopener">vuejs.org</a> to read the
    documentation
  </p>
</template>

<style scoped></style>


=== FILE: test-app\src\main.js ===
import { createApp } from 'vue'
import App from './App.vue'

createApp(App).mount('#app')
